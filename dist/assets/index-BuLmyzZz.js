import{j as e,A as ce,m as G}from"./framer-motion-BFgEcCY5.js";import{a as xt,r as c,R as gt,b as pt}from"./react-vendor-DNUgy55u.js";import{s as Q,z as ft,i as pe,c as fe,p as vt}from"./d3-vendor-DXMZTTbz.js";import{c as _t}from"./supabase-vendor-CHnXwgyT.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var _e={},Se=xt;_e.createRoot=Se.createRoot,_e.hydrateRoot=Se.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ee(){return ee=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ee.apply(this,arguments)}var z;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(z||(z={}));const Le="popstate";function yt(t){t===void 0&&(t={});function s(a,r){let{pathname:i,search:o,hash:m}=a.location;return ye("",{pathname:i,search:o,hash:m},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(a,r){return typeof r=="string"?r:De(r)}return jt(s,n,null,t)}function A(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Ne(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function bt(){return Math.random().toString(36).substr(2,8)}function Ee(t,s){return{usr:t.state,key:t.key,idx:s}}function ye(t,s,n,a){return n===void 0&&(n=null),ee({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?K(s):s,{state:n,key:s&&s.key||a||bt()})}function De(t){let{pathname:s="/",search:n="",hash:a=""}=t;return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function K(t){let s={};if(t){let n=t.indexOf("#");n>=0&&(s.hash=t.substr(n),t=t.substr(0,n));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function jt(t,s,n,a){a===void 0&&(a={});let{window:r=document.defaultView,v5Compat:i=!1}=a,o=r.history,m=z.Pop,d=null,v=g();v==null&&(v=0,o.replaceState(ee({},o.state,{idx:v}),""));function g(){return(o.state||{idx:null}).idx}function l(){m=z.Pop;let k=g(),h=k==null?null:k-v;v=k,d&&d({action:m,location:C.location,delta:h})}function j(k,h){m=z.Push;let S=ye(C.location,k,h);v=g()+1;let b=Ee(S,v),L=C.createHref(S);try{o.pushState(b,"",L)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;r.location.assign(L)}i&&d&&d({action:m,location:C.location,delta:1})}function y(k,h){m=z.Replace;let S=ye(C.location,k,h);v=g();let b=Ee(S,v),L=C.createHref(S);o.replaceState(b,"",L),i&&d&&d({action:m,location:C.location,delta:0})}function w(k){let h=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof k=="string"?k:De(k);return S=S.replace(/ $/,"%20"),A(h,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,h)}let C={get action(){return m},get location(){return t(r,o)},listen(k){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Le,l),d=k,()=>{r.removeEventListener(Le,l),d=null}},createHref(k){return s(r,k)},createURL:w,encodeLocation(k){let h=w(k);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:j,replace:y,go(k){return o.go(k)}};return C}var Ie;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ie||(Ie={}));function Nt(t,s,n){return n===void 0&&(n="/"),kt(t,s,n)}function kt(t,s,n,a){let r=typeof s=="string"?K(s):s,i=Fe(r.pathname||"/",n);if(i==null)return null;let o=He(t);wt(o);let m=null;for(let d=0;m==null&&d<o.length;++d){let v=qt(i);m=At(o[d],v)}return m}function He(t,s,n,a){s===void 0&&(s=[]),n===void 0&&(n=[]),a===void 0&&(a="");let r=(i,o,m)=>{let d={relativePath:m===void 0?i.path||"":m,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(A(d.relativePath.startsWith(a),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(a.length));let v=J([a,d.relativePath]),g=n.concat(d);i.children&&i.children.length>0&&(A(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),He(i.children,s,g,v)),!(i.path==null&&!i.index)&&s.push({path:v,score:Tt(v,i.index),routesMeta:g})};return t.forEach((i,o)=>{var m;if(i.path===""||!((m=i.path)!=null&&m.includes("?")))r(i,o);else for(let d of Oe(i.path))r(i,o,d)}),s}function Oe(t){let s=t.split("/");if(s.length===0)return[];let[n,...a]=s,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(a.length===0)return r?[i,""]:[i];let o=Oe(a.join("/")),m=[];return m.push(...o.map(d=>d===""?i:[i,d].join("/"))),r&&m.push(...o),m.map(d=>t.startsWith("/")&&d===""?"/":d)}function wt(t){t.sort((s,n)=>s.score!==n.score?n.score-s.score:Ut(s.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const Ct=/^:[\w-]+$/,St=3,Lt=2,Et=1,It=10,Bt=-2,Be=t=>t==="*";function Tt(t,s){let n=t.split("/"),a=n.length;return n.some(Be)&&(a+=Bt),s&&(a+=Lt),n.filter(r=>!Be(r)).reduce((r,i)=>r+(Ct.test(i)?St:i===""?Et:It),a)}function Ut(t,s){return t.length===s.length&&t.slice(0,-1).every((a,r)=>a===s[r])?t[t.length-1]-s[s.length-1]:0}function At(t,s,n){let{routesMeta:a}=t,r={},i="/",o=[];for(let m=0;m<a.length;++m){let d=a[m],v=m===a.length-1,g=i==="/"?s:s.slice(i.length)||"/",l=$t({path:d.relativePath,caseSensitive:d.caseSensitive,end:v},g),j=d.route;if(!l)return null;Object.assign(r,l.params),o.push({params:r,pathname:J([i,l.pathname]),pathnameBase:Gt(J([i,l.pathnameBase])),route:j}),l.pathnameBase!=="/"&&(i=J([i,l.pathnameBase]))}return o}function $t(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=Mt(t.path,t.caseSensitive,t.end),r=s.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),m=r.slice(1);return{params:a.reduce((v,g,l)=>{let{paramName:j,isOptional:y}=g;if(j==="*"){let C=m[l]||"";o=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const w=m[l];return y&&!w?v[j]=void 0:v[j]=(w||"").replace(/%2F/g,"/"),v},{}),pathname:i,pathnameBase:o,pattern:t}}function Mt(t,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),Ne(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,m,d)=>(a.push({paramName:m,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,s?void 0:"i"),a]}function qt(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ne(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Fe(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}const Pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rt=t=>Pt.test(t);function Dt(t,s){s===void 0&&(s="/");let{pathname:n,search:a="",hash:r=""}=typeof t=="string"?K(t):t,i;if(n)if(Rt(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ne(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Te(n.substring(1),"/"):i=Te(n,s)}else i=s;return{pathname:i,search:Vt(a),hash:Wt(r)}}function Te(t,s){let n=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ve(t,s,n,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ht(t){return t.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function Ot(t,s){let n=Ht(t);return s?n.map((a,r)=>r===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function Ft(t,s,n,a){a===void 0&&(a=!1);let r;typeof t=="string"?r=K(t):(r=ee({},t),A(!r.pathname||!r.pathname.includes("?"),ve("?","pathname","search",r)),A(!r.pathname||!r.pathname.includes("#"),ve("#","pathname","hash",r)),A(!r.search||!r.search.includes("#"),ve("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,m;if(o==null)m=n;else{let l=s.length-1;if(!a&&o.startsWith("..")){let j=o.split("/");for(;j[0]==="..";)j.shift(),l-=1;r.pathname=j.join("/")}m=l>=0?s[l]:"/"}let d=Dt(r,m),v=o&&o!=="/"&&o.endsWith("/"),g=(i||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(v||g)&&(d.pathname+="/"),d}const J=t=>t.join("/").replace(/\/\/+/g,"/"),Gt=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Vt=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Wt=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zt(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ge=["post","put","patch","delete"];new Set(Ge);const Jt=["get",...Ge];new Set(Jt);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function te(){return te=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},te.apply(this,arguments)}const ke=c.createContext(null),Yt=c.createContext(null),ue=c.createContext(null),me=c.createContext(null),X=c.createContext({outlet:null,matches:[],isDataRoute:!1}),Ve=c.createContext(null);function he(){return c.useContext(me)!=null}function We(){return he()||A(!1),c.useContext(me).location}function ze(t){c.useContext(ue).static||c.useLayoutEffect(t)}function Zt(){let{isDataRoute:t}=c.useContext(X);return t?cs():Kt()}function Kt(){he()||A(!1);let t=c.useContext(ke),{basename:s,future:n,navigator:a}=c.useContext(ue),{matches:r}=c.useContext(X),{pathname:i}=We(),o=JSON.stringify(Ot(r,n.v7_relativeSplatPath)),m=c.useRef(!1);return ze(()=>{m.current=!0}),c.useCallback(function(v,g){if(g===void 0&&(g={}),!m.current)return;if(typeof v=="number"){a.go(v);return}let l=Ft(v,JSON.parse(o),i,g.relative==="path");t==null&&s!=="/"&&(l.pathname=l.pathname==="/"?s:J([s,l.pathname])),(g.replace?a.replace:a.push)(l,g.state,g)},[s,a,o,i,t])}function Xt(t,s){return Qt(t,s)}function Qt(t,s,n,a){he()||A(!1);let{navigator:r}=c.useContext(ue),{matches:i}=c.useContext(X),o=i[i.length-1],m=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let v=We(),g;if(s){var l;let k=typeof s=="string"?K(s):s;d==="/"||(l=k.pathname)!=null&&l.startsWith(d)||A(!1),g=k}else g=v;let j=g.pathname||"/",y=j;if(d!=="/"){let k=d.replace(/^\//,"").split("/");y="/"+j.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=Nt(t,{pathname:y}),C=as(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},m,k.params),pathname:J([d,r.encodeLocation?r.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?d:J([d,r.encodeLocation?r.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,a);return s&&C?c.createElement(me.Provider,{value:{location:te({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:z.Pop}},C):C}function es(){let t=ls(),s=zt(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},s),n?c.createElement("pre",{style:r},n):null,null)}const ts=c.createElement(es,null);class ss extends c.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,n){return n.location!==s.location||n.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:n.error,location:n.location,revalidation:s.revalidation||n.revalidation}}componentDidCatch(s,n){console.error("React Router caught the following error during render",s,n)}render(){return this.state.error!==void 0?c.createElement(X.Provider,{value:this.props.routeContext},c.createElement(Ve.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ns(t){let{routeContext:s,match:n,children:a}=t,r=c.useContext(ke);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),c.createElement(X.Provider,{value:s},a)}function as(t,s,n,a){var r;if(s===void 0&&(s=[]),n===void 0&&(n=null),a===void 0&&(a=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=a)!=null&&i.v7_partialHydration&&s.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,m=(r=n)==null?void 0:r.errors;if(m!=null){let g=o.findIndex(l=>l.route.id&&m?.[l.route.id]!==void 0);g>=0||A(!1),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,v=-1;if(n&&a&&a.v7_partialHydration)for(let g=0;g<o.length;g++){let l=o[g];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(v=g),l.route.id){let{loaderData:j,errors:y}=n,w=l.route.loader&&j[l.route.id]===void 0&&(!y||y[l.route.id]===void 0);if(l.route.lazy||w){d=!0,v>=0?o=o.slice(0,v+1):o=[o[0]];break}}}return o.reduceRight((g,l,j)=>{let y,w=!1,C=null,k=null;n&&(y=m&&l.route.id?m[l.route.id]:void 0,C=l.route.errorElement||ts,d&&(v<0&&j===0?(ds("route-fallback"),w=!0,k=null):v===j&&(w=!0,k=l.route.hydrateFallbackElement||null)));let h=s.concat(o.slice(0,j+1)),S=()=>{let b;return y?b=C:w?b=k:l.route.Component?b=c.createElement(l.route.Component,null):l.route.element?b=l.route.element:b=g,c.createElement(ns,{match:l,routeContext:{outlet:g,matches:h,isDataRoute:n!=null},children:b})};return n&&(l.route.ErrorBoundary||l.route.errorElement||j===0)?c.createElement(ss,{location:n.location,revalidation:n.revalidation,component:C,error:y,children:S(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):S()},null)}var Je=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Je||{}),Ye=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ye||{});function rs(t){let s=c.useContext(ke);return s||A(!1),s}function os(t){let s=c.useContext(Yt);return s||A(!1),s}function is(t){let s=c.useContext(X);return s||A(!1),s}function Ze(t){let s=is(),n=s.matches[s.matches.length-1];return n.route.id||A(!1),n.route.id}function ls(){var t;let s=c.useContext(Ve),n=os(),a=Ze();return s!==void 0?s:(t=n.errors)==null?void 0:t[a]}function cs(){let{router:t}=rs(Je.UseNavigateStable),s=Ze(Ye.UseNavigateStable),n=c.useRef(!1);return ze(()=>{n.current=!0}),c.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,te({fromRouteId:s},i)))},[t,s])}const Ue={};function ds(t,s,n){Ue[t]||(Ue[t]=!0)}function us(t,s){t?.v7_startTransition,t?.v7_relativeSplatPath}function be(t){A(!1)}function ms(t){let{basename:s="/",children:n=null,location:a,navigationType:r=z.Pop,navigator:i,static:o=!1,future:m}=t;he()&&A(!1);let d=s.replace(/^\/*/,"/"),v=c.useMemo(()=>({basename:d,navigator:i,static:o,future:te({v7_relativeSplatPath:!1},m)}),[d,m,i,o]);typeof a=="string"&&(a=K(a));let{pathname:g="/",search:l="",hash:j="",state:y=null,key:w="default"}=a,C=c.useMemo(()=>{let k=Fe(g,d);return k==null?null:{location:{pathname:k,search:l,hash:j,state:y,key:w},navigationType:r}},[d,g,l,j,y,w,r]);return C==null?null:c.createElement(ue.Provider,{value:v},c.createElement(me.Provider,{children:n,value:C}))}function hs(t){let{children:s,location:n}=t;return Xt(je(s),n)}new Promise(()=>{});function je(t,s){s===void 0&&(s=[]);let n=[];return c.Children.forEach(t,(a,r)=>{if(!c.isValidElement(a))return;let i=[...s,r];if(a.type===c.Fragment){n.push.apply(n,je(a.props.children,i));return}a.type!==be&&A(!1),!a.props.index||!a.props.children||A(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=je(a.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const xs="6";try{window.__reactRouterVersion=xs}catch{}const gs="startTransition",Ae=gt[gs];function ps(t){let{basename:s,children:n,future:a,window:r}=t,i=c.useRef();i.current==null&&(i.current=yt({window:r,v5Compat:!0}));let o=i.current,[m,d]=c.useState({action:o.action,location:o.location}),{v7_startTransition:v}=a||{},g=c.useCallback(l=>{v&&Ae?Ae(()=>d(l)):d(l)},[d,v]);return c.useLayoutEffect(()=>o.listen(g),[o,g]),c.useEffect(()=>us(a),[a]),c.createElement(ms,{basename:s,children:n,location:m.location,navigationType:m.action,navigator:o,future:a})}var $e;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($e||($e={}));var Me;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Me||(Me={}));const fs="_container_mis0l_1",vs="_backgroundLayer_mis0l_9",_s="_backgroundVideo_mis0l_28",ys="_backgroundDimmer_mis0l_41",bs="_svg_mis0l_52",js="_pickingMode_mis0l_64",Ns="_universeIcon_mis0l_68",ks="_spiralArms_mis0l_83",ws="_spiralArm_mis0l_83",Cs="_arm1_mis0l_98",Ss="_arm2_mis0l_102",Ls="_arm3_mis0l_106",Es="_stars_mis0l_133",Is="_star_mis0l_133",Bs="_iconWrapper_mis0l_178",Ts="_iconContainer_mis0l_186",Us="_iconImage_mis0l_198",As="_locationMarker_mis0l_206",$s="_regionText_mis0l_210",Ms="_glowCircle_mis0l_257",qs="_backButton_mis0l_265",Ps="_locationText_mis0l_312",Rs="_sonarRing_mis0l_341",E={container:fs,backgroundLayer:vs,backgroundVideo:_s,backgroundDimmer:ys,svg:bs,pickingMode:js,universeIcon:Ns,spiralArms:ks,spiralArm:ws,arm1:Cs,arm2:Ss,arm3:Ls,stars:Es,star:Is,iconWrapper:Bs,iconContainer:Ts,iconImage:Us,locationMarker:As,regionText:$s,glowCircle:Ms,backButton:qs,locationText:Ps,sonarRing:Rs};function Ke({onRegionSelect:t,selectedRegion:s,universeData:n,onCoordPick:a,baseBackground:r="/images/multiversal-bg.png",onLocationSelect:i,onLocationClose:o,zoomResetRef:m}){const d=c.useRef(null),v=c.useRef(null),g=c.useRef(null);c.useEffect(()=>{if(!d.current||!v.current)return;const h=Q(d.current),S=Q(v.current),b=ft().scaleExtent([.5,4]).on("zoom",L=>{S.attr("transform",L.transform)});g.current=b,h.call(b),l()},[]);const l=()=>{if(!d.current||!g.current)return;const h=Q(d.current),S=pe.translate(1e3,800).scale(.8).translate(-500,-400);h.transition().duration(1200).ease(fe).call(g.current.transform,S)},j=c.useCallback(h=>{if(!d.current||!g.current)return;const S=Q(d.current),L=pe.translate(1e3,800).scale(1.2).translate(-h.cx,-h.cy);S.transition().duration(1200).ease(fe).call(g.current.transform,L)},[]);c.useEffect(()=>(m&&s&&(m.current=()=>j(s)),()=>{m&&(m.current=null)}),[m,s,j]);const y=(h,S)=>{S.stopPropagation(),t(h),j(h)},w=h=>{if(v.current){if(a){const[S,b]=vt(h,v.current);a({x:S,y:b})}s||t(null)}},C=(h,S)=>{if(S.stopPropagation(),!i||!d.current||!g.current)return;const b=S.clientX,L=S.clientY,x=Q(d.current),R=pe.translate(1e3,800).scale(3.5).translate(-h.cx,-h.cy);x.transition().duration(800).ease(fe).call(g.current.transform,R),setTimeout(()=>{i(h,{x:b,y:L})},200)},k=h=>{h.stopPropagation(),o?.(),t(null),l()};return e.jsxs("div",{className:E.container,children:[e.jsx(ce,{children:s&&e.jsxs(G.button,{className:E.backButton,onClick:k,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Multiverse"]})}),e.jsx(ce,{mode:"wait",children:(()=>{const h=s?s.backgroundUrl:r;return h&&(h.endsWith(".mp4")||h.endsWith(".webm")||h.endsWith(".mov"))?e.jsx(G.video,{className:E.backgroundVideo,src:h,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,initial:{opacity:0,scale:1.15},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:1.2,ease:"easeInOut"}},s?s.id:"base"):e.jsx(G.div,{className:E.backgroundLayer,initial:{opacity:0,scale:1.15},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:1.2,ease:"easeInOut"},style:{backgroundImage:`url(${h})`}},s?s.id:"base")})()}),e.jsx("div",{className:E.backgroundDimmer}),e.jsxs("svg",{ref:d,className:`${E.svg} ${a?E.pickingMode:""}`,onClick:w,viewBox:"0 0 2000 1600",preserveAspectRatio:"xMidYMid meet",children:[e.jsxs("defs",{children:[a&&e.jsx("pattern",{id:"grid",width:"100",height:"100",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 100 0 L 0 0 0 100",fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"})}),n.map(h=>e.jsxs("radialGradient",{id:`grad-${h.id}`,cx:"50%",cy:"50%",r:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:h.color,stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:h.color,stopOpacity:"0"})]},`grad-${h.id}`))]}),e.jsxs("g",{ref:v,children:[a&&e.jsx("rect",{width:"2000",height:"2000",x:"-500",y:"-500",fill:"url(#grid)",pointerEvents:"none"}),!s&&n.map(h=>e.jsxs("g",{className:E.universeIcon,children:[e.jsxs("g",{transform:`translate(${h.cx}, ${h.cy})`,children:[e.jsxs("g",{className:E.spiralArms,style:{color:h.color},children:[e.jsx("circle",{r:"150",fill:`url(#grad-${h.id})`,pointerEvents:"none"}),e.jsx("path",{className:`${E.spiralArm} ${E.arm1}`,d:"M 0 0 q -25 -70 45 -115 t 95 25 q 40 80 -20 120",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("path",{className:`${E.spiralArm} ${E.arm2}`,d:"M 0 0 q 70 -25 115 45 t -25 95 q -80 40 -120 -20",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("path",{className:`${E.spiralArm} ${E.arm3}`,d:"M 0 0 q 25 70 -45 115 t -95 -25 q -40 -80 20 -120",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsxs("g",{className:E.stars,children:[e.jsx("circle",{className:E.star,cx:"30",cy:"-40",r:"2.5",fill:"white"}),e.jsx("circle",{className:E.star,cx:"-50",cy:"20",r:"2",fill:"white"}),e.jsx("circle",{className:E.star,cx:"60",cy:"50",r:"3",fill:"white"}),e.jsx("circle",{className:E.star,cx:"-20",cy:"-70",r:"2.2",fill:"white"}),e.jsx("circle",{className:E.star,cx:"80",cy:"-10",r:"2.5",fill:"white"}),e.jsx("circle",{className:E.star,cx:"-40",cy:"80",r:"2",fill:"white"}),e.jsx("circle",{className:E.star,cx:"45",cy:"35",r:"1.8",fill:"white"}),e.jsx("circle",{className:E.star,cx:"-60",cy:"-30",r:"2.2",fill:"white"}),e.jsx("circle",{className:E.star,cx:"10",cy:"65",r:"1.5",fill:"white"}),e.jsx("circle",{className:E.star,cx:"-70",cy:"50",r:"1.8",fill:"white"})]})]}),e.jsx("circle",{r:"80",fill:h.color,opacity:"0.15",className:E.glowCircle,style:{stroke:h.color,strokeWidth:1.5}})]}),e.jsx("foreignObject",{x:h.cx-70,y:h.cy-70,width:"140",height:"140",onClick:S=>y(h,S),children:e.jsx("div",{className:E.iconWrapper,children:e.jsx("div",{className:E.iconContainer,style:{width:"100px",height:"100px",border:`3px solid ${h.color}`,boxShadow:`0 0 35px ${h.color}99`},children:e.jsx("img",{src:h.thumbUrl,alt:h.name,className:E.iconImage})})})}),e.jsx("text",{x:h.cx,y:h.cy+75,className:E.regionText,children:h.name})]},h.id)),s&&s.locations.map(h=>e.jsxs("g",{className:E.locationMarker,style:{color:s.color},children:[e.jsx("circle",{cx:h.cx,cy:h.cy,r:"60",fill:s.color,opacity:"0.1",className:E.sonarRing}),e.jsx("foreignObject",{x:h.cx-55,y:h.cy-55,width:"110",height:"110",onClick:S=>C(h,S),style:{cursor:"pointer"},children:e.jsx("div",{className:E.iconWrapper,children:e.jsx("div",{className:E.iconContainer,style:{width:"80px",height:"80px",border:`2px solid ${s.color}`,boxShadow:`0 0 25px ${s.color}99`},children:e.jsx("img",{src:h.thumbUrl,alt:h.name,className:E.iconImage})})})}),e.jsx("text",{x:h.cx,y:h.cy+60,className:E.locationText,children:h.name})]},h.id))]})]})]})}var Ds={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hs=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Os=(t,s)=>{const n=c.forwardRef(({color:a="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:m,...d},v)=>c.createElement("svg",{ref:v,...Ds,width:r,height:r,stroke:a,strokeWidth:o?Number(i)*24/Number(r):i,className:`lucide lucide-${Hs(t)}`,...d},[...s.map(([g,l])=>c.createElement(g,l)),...(Array.isArray(m)?m:[m])||[]]));return n.displayName=`${t}`,n};var T=Os;const Fs=T("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),de=T("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Xe=T("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Gs=T("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),le=T("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Vs=T("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ws=T("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),we=T("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),zs=T("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Js=T("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Qe=T("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),Ys=T("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Zs=T("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),et=T("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),xe=T("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),tt=T("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),qe=T("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),se=T("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),st=T("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Pe=T("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ne=T("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ks=T("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Ce=T("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Y=T("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nt=T("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Xs="https://zrolrdnymkkdcyksuctq.supabase.co",Qs="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpyb2xyZG55bWtrZGN5a3N1Y3RxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzczNTA1NDcsImV4cCI6MjA1MjkyNjU0N30.QBbAW18vTmGe2jFYKdMYFWMAt_-AxLvJUiF2G95-s3c",O=_t(Xs,Qs,{auth:{persistSession:!0,autoRefreshToken:!0}});async function at(){const{data:t,error:s}=await O.from("lore_regions").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(s)throw console.error("Error fetching simulations:",s),s;if(!t||t.length===0)return[];const{data:n,error:a}=await O.from("lore_locations").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(a)throw console.error("Error fetching locations:",a),a;return t.map(i=>({...i,locations:n?.filter(o=>o.region_id===i.id)||[]}))}const en=at;async function rt(){const{data:t,error:s}=await O.from("lore_config").select("*").eq("config_key","multiverse_background").single();return s?(console.error("Error fetching lore config:",s),null):t}async function tn(t){const{data:s,error:n}=await O.rpc("upsert_lore_region",{p_region_id:t.region_id,p_name:t.name,p_description:t.description,p_color:t.color,p_cx:t.cx,p_cy:t.cy,p_thumb_url:t.thumb_url,p_background_url:t.background_url,p_image_url:t.image_url,p_sort_order:t.sort_order||0});if(n)throw console.error("Error upserting simulation:",n),n;return s}const sn=tn;async function nn(t){const{data:s,error:n}=await O.rpc("upsert_lore_location",{p_location_id:t.location_id,p_region_id:t.region_id,p_name:t.name,p_description:t.description,p_cx:t.cx,p_cy:t.cy,p_location_type:t.location_type,p_thumb_url:t.thumb_url,p_sort_order:t.sort_order||0});if(n)throw console.error("Error upserting location:",n),n;return s}async function an(t){const{data:s,error:n}=await O.rpc("update_lore_config",{p_config_key:"multiverse_background",p_config_value:t});if(n)throw console.error("Error updating lore config:",n),n;return s}async function rn(t){const{data:s,error:n}=await O.rpc("delete_lore_region",{p_region_id:t});if(n)throw console.error("Error deleting simulation:",n),n;return s}const on=rn;async function ln(t){const{data:s,error:n}=await O.rpc("delete_lore_location",{p_location_id:t});if(n)throw console.error("Error deleting location:",n),n;return s}async function ot(){const{data:t,error:s}=await O.from("lore_codex_entries").select("*").eq("is_active",!0).eq("is_unlocked",!0).order("sort_order",{ascending:!0});if(s)throw console.error("Error fetching codex entries:",s),s;return t||[]}async function cn(t){const{data:s,error:n}=await O.rpc("upsert_codex_entry",{p_entry_id:t.entry_id,p_entry_type:t.entry_type,p_name:t.name,p_subtitle:t.subtitle||null,p_summary:t.summary,p_known_info:t.known_info||[],p_locked_sections:t.locked_sections||[],p_icon_url:t.icon_url||null,p_image_url:t.image_url||null,p_color:t.color||"#6366f1",p_primary_location_id:t.primary_location_id||null,p_appears_in_locations:t.appears_in_locations||[],p_is_unlocked:t.is_unlocked!==!1,p_unlock_condition:t.unlock_condition||null,p_sort_order:t.sort_order||0});if(n)throw console.error("Error upserting codex entry:",n),n;return s}async function dn(t){const{data:s,error:n}=await O.rpc("delete_codex_entry",{p_entry_id:t});if(n)throw console.error("Error deleting codex entry:",n),n;return s}async function un(t){const{data:s,error:n}=await O.rpc("get_location_inhabitants",{p_location_id:t});return n?(console.error(`Error fetching location inhabitants for ${t}:`,n),{characters:[],factions:[],artifacts:[]}):s||{characters:[],factions:[],artifacts:[]}}async function mn(t){const{data:s,error:n}=await O.rpc("get_location_events",{p_location_id:t});return n?(console.error(`Error fetching events at location ${t}:`,n),[]):s||[]}const hn="_backdrop_1fx4v_9",xn="_overlay_1fx4v_23",gn="_closeButton_1fx4v_57",pn="_header_1fx4v_117",fn="_imageContainer_1fx4v_135",vn="_image_1fx4v_135",_n="_headerInfo_1fx4v_167",yn="_title_1fx4v_177",bn="_headerMeta_1fx4v_199",jn="_typeBadge_1fx4v_211",Nn="_threatBadge_1fx4v_213",kn="_threat1_1fx4v_255",wn="_threat2_1fx4v_257",Cn="_threat3_1fx4v_259",Sn="_threat4_1fx4v_261",Ln="_threat5_1fx4v_263",En="_tabNavigation_1fx4v_269",In="_tab_1fx4v_269",Bn="_tabActive_1fx4v_335",Tn="_tabContent_1fx4v_347",Un="_overviewTab_1fx4v_389",An="_description_1fx4v_401",$n="_atmosphereSection_1fx4v_417",Mn="_statsGrid_1fx4v_465",qn="_statCard_1fx4v_477",Pn="_statLabel_1fx4v_497",Rn="_statValue_1fx4v_515",Dn="_listSection_1fx4v_529",Hn="_resourceChips_1fx4v_621",On="_resourceChip_1fx4v_621",Fn="_inhabitantsTab_1fx4v_659",Gn="_inhabitantSection_1fx4v_671",Vn="_inhabitantGrid_1fx4v_705",Wn="_inhabitantCard_1fx4v_717",zn="_inhabitantHeader_1fx4v_749",Jn="_controlBadge_1fx4v_783",Yn="_stationedBadge_1fx4v_785",Zn="_controlDominant_1fx4v_807",Kn="_controlPresent_1fx4v_809",Xn="_controlMinor_1fx4v_811",Qn="_role_1fx4v_825",ea="_subtitle_1fx4v_827",ta="_cardDescription_1fx4v_829",sa="_eventsTab_1fx4v_857",na="_eventsList_1fx4v_869",aa="_eventCard_1fx4v_881",ra="_eventHeader_1fx4v_913",oa="_eventDate_1fx4v_947",ia="_eventSummary_1fx4v_971",la="_loading_1fx4v_989",ca="_emptyState_1fx4v_991",_={backdrop:hn,overlay:xn,closeButton:gn,header:pn,imageContainer:fn,image:vn,headerInfo:_n,title:yn,headerMeta:bn,typeBadge:jn,threatBadge:Nn,threat1:kn,threat2:wn,threat3:Cn,threat4:Sn,threat5:Ln,tabNavigation:En,tab:In,tabActive:Bn,tabContent:Tn,overviewTab:Un,description:An,atmosphereSection:$n,statsGrid:Mn,statCard:qn,statLabel:Pn,statValue:Rn,listSection:Dn,resourceChips:Hn,resourceChip:On,inhabitantsTab:Fn,inhabitantSection:Gn,inhabitantGrid:Vn,inhabitantCard:Wn,inhabitantHeader:zn,controlBadge:Jn,stationedBadge:Yn,controlDominant:Zn,controlPresent:Kn,controlMinor:Xn,role:Qn,subtitle:ea,cardDescription:ta,eventsTab:sa,eventsList:na,eventCard:aa,eventHeader:ra,eventDate:oa,eventSummary:ia,loading:la,emptyState:ca};function it({location:t,origin:s,regionColor:n,onClose:a}){const[r,i]=c.useState("overview"),[o,m]=c.useState(null),[d,v]=c.useState([]),[g,l]=c.useState(!1),[j,y]=c.useState(!1);c.useEffect(()=>{t&&r==="inhabitants"&&!o&&w()},[t,r]),c.useEffect(()=>{t&&r==="events"&&d.length===0&&C()},[t,r]);async function w(){if(t){l(!0);try{const x=await un(t.id);m(x)}catch(x){console.error("Error loading inhabitants:",x)}finally{l(!1)}}}async function C(){if(t){y(!0);try{const x=await mn(t.id);v(x)}catch(x){console.error("Error loading events:",x)}finally{y(!1)}}}if(!s||!t)return null;const k=t.threat_level||1,h=t.population,S=t.atmosphere,b=t.key_landmarks||[],L=t.resources||[];return e.jsxs(ce,{children:[e.jsx(G.div,{className:_.backdrop,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a}),e.jsxs(G.div,{className:_.overlay,style:{"--accent-color":n},initial:{opacity:0,scale:.9,x:s.x-window.innerWidth/2,y:s.y-window.innerHeight/2},animate:{opacity:1,scale:1,x:0,y:0},exit:{opacity:0,scale:.9,x:s.x-window.innerWidth/2,y:s.y-window.innerHeight/2},transition:{type:"spring",stiffness:200,damping:25},children:[e.jsx("button",{onClick:a,className:_.closeButton,children:e.jsx(Y,{className:"w-6 h-6"})}),e.jsxs("div",{className:_.header,children:[e.jsx("div",{className:_.imageContainer,children:e.jsx("img",{src:t.thumbUrl,alt:t.name,className:_.image})}),e.jsxs("div",{className:_.headerInfo,children:[e.jsx("h2",{className:_.title,children:t.name}),e.jsxs("div",{className:_.headerMeta,children:[e.jsx("span",{className:_.typeBadge,children:t.type.toUpperCase()}),e.jsxs("span",{className:`${_.threatBadge} ${_[`threat${k}`]}`,children:[e.jsx(Fs,{className:"w-3 h-3"}),"Threat ",k]})]})]})]}),e.jsxs("div",{className:_.tabNavigation,children:[e.jsxs("button",{className:`${_.tab} ${r==="overview"?_.tabActive:""}`,onClick:()=>i("overview"),children:[e.jsx(et,{className:"w-4 h-4"}),"Overview"]}),e.jsxs("button",{className:`${_.tab} ${r==="inhabitants"?_.tabActive:""}`,onClick:()=>i("inhabitants"),children:[e.jsx(Ce,{className:"w-4 h-4"}),"Inhabitants"]}),e.jsxs("button",{className:`${_.tab} ${r==="events"?_.tabActive:""}`,onClick:()=>i("events"),children:[e.jsx(Gs,{className:"w-4 h-4"}),"Events"]})]}),e.jsxs("div",{className:_.tabContent,children:[r==="overview"&&e.jsxs("div",{className:_.overviewTab,children:[e.jsx("p",{className:_.description,children:t.description}),S&&e.jsxs("div",{className:_.atmosphereSection,children:[e.jsx("h3",{children:"Atmosphere"}),e.jsx("p",{children:S})]}),e.jsxs("div",{className:_.statsGrid,children:[h&&e.jsxs("div",{className:_.statCard,children:[e.jsx("span",{className:_.statLabel,children:"Population"}),e.jsx("span",{className:_.statValue,children:h.toLocaleString()})]}),e.jsxs("div",{className:_.statCard,children:[e.jsx("span",{className:_.statLabel,children:"Coordinates"}),e.jsxs("span",{className:_.statValue,children:[t.cx,", ",t.cy]})]}),e.jsxs("div",{className:_.statCard,children:[e.jsx("span",{className:_.statLabel,children:"Point ID"}),e.jsx("span",{className:_.statValue,children:t.id.toUpperCase()})]})]}),b.length>0&&e.jsxs("div",{className:_.listSection,children:[e.jsxs("h3",{children:[e.jsx(tt,{className:"w-4 h-4"})," Key Landmarks"]}),e.jsx("ul",{children:b.map((x,I)=>e.jsx("li",{children:x},I))})]}),L.length>0&&e.jsxs("div",{className:_.listSection,children:[e.jsx("h3",{children:"Resources"}),e.jsx("div",{className:_.resourceChips,children:L.map((x,I)=>e.jsx("span",{className:_.resourceChip,children:x},I))})]})]}),r==="inhabitants"&&e.jsx("div",{className:_.inhabitantsTab,children:g?e.jsx("div",{className:_.loading,children:"Loading inhabitants..."}):o?e.jsxs(e.Fragment,{children:[o.factions.length>0&&e.jsxs("div",{className:_.inhabitantSection,children:[e.jsx("h3",{children:"Factions Present"}),e.jsx("div",{className:_.inhabitantGrid,children:o.factions.map(x=>e.jsxs("div",{className:_.inhabitantCard,children:[e.jsxs("div",{className:_.inhabitantHeader,children:[e.jsx("h4",{children:x.name}),e.jsx("span",{className:`${_.controlBadge} ${_[`control${x.control_level.charAt(0).toUpperCase()}${x.control_level.slice(1)}`]}`,children:x.control_level})]}),x.subtitle&&e.jsx("p",{className:_.subtitle,children:x.subtitle}),x.description&&e.jsx("p",{className:_.cardDescription,children:x.description})]},x.entry_id))})]}),o.characters.length>0&&e.jsxs("div",{className:_.inhabitantSection,children:[e.jsx("h3",{children:"Characters"}),e.jsx("div",{className:_.inhabitantGrid,children:o.characters.map(x=>e.jsxs("div",{className:_.inhabitantCard,children:[e.jsxs("div",{className:_.inhabitantHeader,children:[e.jsx("h4",{children:x.name}),x.stationed&&e.jsx("span",{className:_.stationedBadge,children:"Stationed"})]}),x.character_role&&e.jsx("p",{className:_.role,children:x.character_role}),x.subtitle&&e.jsx("p",{className:_.subtitle,children:x.subtitle})]},x.entry_id))})]}),o.artifacts.length>0&&e.jsxs("div",{className:_.inhabitantSection,children:[e.jsx("h3",{children:"Artifacts Found Here"}),e.jsx("div",{className:_.inhabitantGrid,children:o.artifacts.map(x=>e.jsxs("div",{className:_.inhabitantCard,children:[e.jsx("h4",{children:x.name}),e.jsx("p",{className:_.cardDescription,children:x.summary})]},x.entry_id))})]}),o.factions.length===0&&o.characters.length===0&&o.artifacts.length===0&&e.jsx("div",{className:_.emptyState,children:"No inhabitants data available"})]}):e.jsx("div",{className:_.emptyState,children:"No inhabitants data available"})}),r==="events"&&e.jsx("div",{className:_.eventsTab,children:j?e.jsx("div",{className:_.loading,children:"Loading events..."}):d.length>0?e.jsx("div",{className:_.eventsList,children:d.map(x=>e.jsxs("div",{className:_.eventCard,children:[e.jsxs("div",{className:_.eventHeader,children:[e.jsx("h4",{children:x.name}),x.event_date&&e.jsx("span",{className:_.eventDate,children:x.event_date})]}),e.jsx("p",{className:_.eventSummary,children:x.summary})]},x.entry_id))}):e.jsx("div",{className:_.emptyState,children:"No events recorded at this location"})})]})]})]})}const da="_toggleButton_6djhq_130",ua="_overlay_6djhq_163",ma="_container_6djhq_175",ha="_header_6djhq_211",xa="_marquee_6djhq_222",ga="_marqueeContent_6djhq_234",pa="_headerLeft_6djhq_250",fa="_title_6djhq_256",va="_glitching_6djhq_273",_a="_backButton_6djhq_277",ya="_closeButton_6djhq_303",ba="_content_6djhq_384",ja="_loading_6djhq_417",Na="_spinner_6djhq_434",ka="_categoriesGrid_6djhq_447",wa="_categoryCard_6djhq_456",Ca="_categoryCount_6djhq_523",Sa="_entriesList_6djhq_539",La="_listHeader_6djhq_545",Ea="_count_6djhq_556",Ia="_entriesGrid_6djhq_566",Ba="_entryCard_6djhq_572",Ta="_entryName_6djhq_611",Ua="_entrySubtitle_6djhq_621",Aa="_entrySummary_6djhq_629",$a="_entryFooter_6djhq_641",Ma="_entryBadge_6djhq_649",qa="_lockedBadge_6djhq_661",Pa="_detail_6djhq_677",Ra="_detailHeader_6djhq_685",Da="_detailTitle_6djhq_697",Ha="_detailSubtitle_6djhq_706",Oa="_detailBadge_6djhq_714",Fa="_detailSummary_6djhq_727",Ga="_section_6djhq_739",Va="_sectionTitle_6djhq_750",Wa="_infoBlock_6djhq_760",za="_infoTitle_6djhq_770",Ja="_infoContent_6djhq_779",Ya="_lockedBlock_6djhq_787",Za="_lockedHeader_6djhq_795",Ka="_lockedTitle_6djhq_802",Xa="_lockedMessage_6djhq_811",Qa="_simulationsView_6djhq_822",er="_simulationsHeader_6djhq_828",tr="_simulationsList_6djhq_852",sr="_simulationCard_6djhq_858",nr="_simulationName_6djhq_892",ar="_simulationHeader_6djhq_901",rr="_simulationIcon_6djhq_909",or="_simulationHeaderText_6djhq_935",ir="_simulationDescription_6djhq_953",lr="_simulationStats_6djhq_971",cr="_stat_6djhq_981",dr="_clickHint_6djhq_993",ur="_categoriesView_6djhq_1013",mr="_categoriesHeader_6djhq_1021",hr="_simulationHeaderInline_6djhq_1031",xr="_simulationIconSmall_6djhq_1037",gr="_simulationDescSmall_6djhq_1048",pr="_categoryInfoPanel_6djhq_1072",fr="_infoPanelHeader_6djhq_1102",vr="_infoPanelText_6djhq_1114",_r="_infoPanelStats_6djhq_1123",yr="_infoPanelStat_6djhq_1123",br="_statLabel_6djhq_1137",jr="_statValue_6djhq_1145",Nr="_categoryIconWrapper_6djhq_1151",kr="_categoryContent_6djhq_1160",wr="_categoryName_6djhq_1168",Cr="_introOverlay_6djhq_1180",Sr="_introDialog_6djhq_1192",Lr="_introHeader_6djhq_1213",Er="_introIcon_6djhq_1233",Ir="_introTitle_6djhq_1252",Br="_introContent_6djhq_1265",Tr="_introSection_6djhq_1272",Ur="_introCallout_6djhq_1291",Ar="_introCalloutTitle_6djhq_1302",$r="_introCalloutText_6djhq_1312",Mr="_introContact_6djhq_1319",qr="_contactItem_6djhq_1325",Pr="_contactLabel_6djhq_1332",Rr="_contactValue_6djhq_1338",Dr="_contactLink_6djhq_1342",Hr="_contactEmail_6djhq_1360",Or="_introFooter_6djhq_1374",Fr="_introButtonSecondary_6djhq_1381",Gr="_introButtonPrimary_6djhq_1401",u={toggleButton:da,overlay:ua,container:ma,header:ha,marquee:xa,marqueeContent:ga,headerLeft:pa,title:fa,glitching:va,backButton:_a,closeButton:ya,content:ba,loading:ja,spinner:Na,categoriesGrid:ka,categoryCard:wa,categoryCount:Ca,entriesList:Sa,listHeader:La,count:Ea,entriesGrid:Ia,entryCard:Ba,entryName:Ta,entrySubtitle:Ua,entrySummary:Aa,entryFooter:$a,entryBadge:Ma,lockedBadge:qa,detail:Pa,detailHeader:Ra,detailTitle:Da,detailSubtitle:Ha,detailBadge:Oa,detailSummary:Fa,section:Ga,sectionTitle:Va,infoBlock:Wa,infoTitle:za,infoContent:Ja,lockedBlock:Ya,lockedHeader:Za,lockedTitle:Ka,lockedMessage:Xa,simulationsView:Qa,simulationsHeader:er,simulationsList:tr,simulationCard:sr,simulationName:nr,simulationHeader:ar,simulationIcon:rr,simulationHeaderText:or,simulationDescription:ir,simulationStats:lr,stat:cr,clickHint:dr,categoriesView:ur,categoriesHeader:mr,simulationHeaderInline:hr,simulationIconSmall:xr,simulationDescSmall:gr,categoryInfoPanel:pr,infoPanelHeader:fr,infoPanelText:vr,infoPanelStats:_r,infoPanelStat:yr,statLabel:br,statValue:jr,categoryIconWrapper:Nr,categoryContent:kr,categoryName:wr,introOverlay:Cr,introDialog:Sr,introHeader:Lr,introIcon:Er,introTitle:Ir,introContent:Br,introSection:Tr,introCallout:Ur,introCalloutTitle:Ar,introCalloutText:$r,introContact:Mr,contactItem:qr,contactLabel:Pr,contactValue:Rr,contactLink:Dr,contactEmail:Hr,introFooter:Or,introButtonSecondary:Fr,introButtonPrimary:Gr},lt={character:Ce,faction:Xe,simulation:we,artifact:Qe,event:nt},Z={character:"Characters",faction:"Factions",simulation:"Simulations",artifact:"Artifacts",event:"Events"};function Vr({onEntrySelect:t,selectedEntry:s,simulationData:n=[]}){const[a,r]=c.useState(!1),[i,o]=c.useState("simulations"),[m,d]=c.useState(null),[v,g]=c.useState(null),[l,j]=c.useState([]),[y,w]=c.useState(!0),[C,k]=c.useState(!1);c.useEffect(()=>{async function x(){try{const I=await ot();j(I)}catch(I){console.error("Error loading codex:",I)}finally{w(!1)}}x()},[]),c.useEffect(()=>{const x=setInterval(()=>{k(!0),setTimeout(()=>k(!1),300)},5e3);return()=>clearInterval(x)},[]);const h=l.filter(x=>!m||x.entry_type===m),S=x=>{d(x),o("categories")},b=()=>{s?(t(null),o("categories")):m?(d(null),o(v?"simulation-categories":"simulations")):i==="simulation-categories"&&(o("simulations"),g(null))},L=x=>{t(x),o("detail")};return a?e.jsx(ce,{children:e.jsx(G.div,{className:u.overlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>r(!1),children:e.jsxs(G.div,{className:u.container,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:u.header,children:[e.jsxs("div",{className:u.headerLeft,children:[(s||m||i==="simulation-categories")&&e.jsx("button",{onClick:b,className:u.backButton,children:"â† Back"}),e.jsxs("h1",{className:`${u.title} ${C?u.glitching:""}`,children:[e.jsx(de,{className:"w-6 h-6"}),"Codex Database"]})]}),e.jsx("button",{onClick:()=>r(!1),className:u.closeButton,children:e.jsx(Y,{className:"w-6 h-6"})})]}),e.jsx("div",{className:u.marquee,children:e.jsx("div",{className:u.marqueeContent,children:"SYSTEM_ALERT: UNAUTHORIZED ACCESS // RELAYING DATA TO THE VOID // [01:00:23:55] // SYSTEM_ALERT: UNAUTHORIZED ACCESS // RELAYING DATA TO THE VOID // [01:00:23:55] //"})}),e.jsx("div",{className:u.content,children:y?e.jsxs("div",{className:u.loading,children:[e.jsx("div",{className:u.spinner}),e.jsx("p",{children:"Loading Codex..."})]}):s?e.jsx(zr,{entry:s}):i==="simulations"?e.jsx(Re,{simulationData:n,allEntries:l,glitchActive:C,onSimulationSelect:x=>{g(x),o("simulation-categories")}}):i==="simulation-categories"&&v?e.jsx(Jr,{simulation:n.find(x=>x.id===v),allEntries:l,glitchActive:C,onCategoryClick:S}):m?e.jsx(Wr,{category:m,entries:h,glitchActive:C,onEntryClick:L}):e.jsx(Re,{simulationData:n,allEntries:l,glitchActive:C,onSimulationSelect:x=>{g(x),o("simulation-categories")}})})]})})}):e.jsx("button",{className:u.toggleButton,onClick:()=>r(!0),title:"Open Codex",children:e.jsx(de,{className:"w-6 h-6"})})}function Wr({category:t,entries:s,glitchActive:n,onEntryClick:a}){const r=lt[t];return e.jsxs("div",{className:u.entriesList,children:[e.jsxs("div",{className:u.listHeader,children:[e.jsx(r,{className:"w-6 h-6 text-indigo-400"}),e.jsx("h2",{className:n?u.glitching:"",children:Z[t]}),e.jsxs("span",{className:u.count,children:[s.length," entries"]})]}),e.jsx("div",{className:u.entriesGrid,children:s.map(i=>e.jsxs(G.button,{className:u.entryCard,onClick:()=>a(i),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("h3",{className:`${u.entryName} ${n?u.glitching:""}`,children:i.name}),i.subtitle&&e.jsx("p",{className:u.entrySubtitle,children:i.subtitle}),e.jsx("p",{className:u.entrySummary,children:i.summary}),e.jsxs("div",{className:u.entryFooter,children:[e.jsx("span",{className:u.entryBadge,children:Z[i.entry_type]}),i.is_unlocked===!1&&e.jsxs("span",{className:u.lockedBadge,children:[e.jsx(xe,{className:"w-3 h-3"}),"Locked"]})]})]},i.entry_id))})]})}function zr({entry:t}){return e.jsxs("div",{className:u.detail,children:[e.jsxs("div",{className:u.detailHeader,children:[e.jsxs("div",{children:[e.jsx("h2",{className:u.detailTitle,children:t.name}),t.subtitle&&e.jsx("p",{className:u.detailSubtitle,children:t.subtitle})]}),e.jsx("span",{className:u.detailBadge,children:Z[t.entry_type]})]}),t.summary&&e.jsx("p",{className:u.detailSummary,children:t.summary}),t.known_info&&t.known_info.length>0&&e.jsxs("div",{className:u.section,children:[e.jsx("h3",{className:u.sectionTitle,children:"Known Information"}),t.known_info.map((s,n)=>e.jsxs("div",{className:u.infoBlock,children:[e.jsx("h4",{className:u.infoTitle,children:s.title}),e.jsx("p",{className:u.infoContent,children:s.content})]},n))]}),t.locked_sections&&t.locked_sections.length>0&&e.jsxs("div",{className:u.section,children:[e.jsx("h3",{className:u.sectionTitle,children:"Classified Information"}),t.locked_sections.map((s,n)=>e.jsxs("div",{className:u.lockedBlock,children:[e.jsxs("div",{className:u.lockedHeader,children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("h4",{className:u.lockedTitle,children:s.title})]}),e.jsx("p",{className:u.lockedMessage,children:s.message||"Data Incomplete"})]},n))]})]})}function Re({simulationData:t,allEntries:s,glitchActive:n,onSimulationSelect:a}){const[r,i]=c.useState({});return c.useEffect(()=>{const o=setInterval(()=>{if(Math.random()>.7&&t.length>0){const d=Math.floor(Math.random()*t.length),v=t[d],g="!@#$%^&*()_+{}|:<>?~",j=v.name.split("").map(y=>Math.random()>.8?g[Math.floor(Math.random()*g.length)]:y).join("");i(y=>({...y,[v.id]:j})),setTimeout(()=>{i(y=>{const w={...y};return delete w[v.id],w})},150)}},3e3);return()=>clearInterval(o)},[t]),e.jsxs("div",{className:u.simulationsView,children:[e.jsxs("div",{className:u.simulationsHeader,children:[e.jsx(we,{className:"w-6 h-6"}),e.jsx("h2",{className:n?u.glitching:"",children:"Simulations"}),e.jsxs("span",{className:u.count,children:[t.length," Available"]})]}),e.jsx("div",{className:u.simulationsList,children:t.map((o,m)=>{const d=s.filter(g=>g.appears_in_locations?.some(l=>o.locations?.some(j=>j.id===l))),v=r[o.id]||o.name;return e.jsxs(G.div,{className:u.simulationCard,onClick:()=>a(o.id),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},children:[e.jsx("div",{className:u.simulationHeader,children:e.jsx("div",{className:u.simulationIcon,style:{backgroundImage:`url(${o.thumbUrl})`,borderColor:o.color}})}),e.jsx("div",{className:u.simulationHeaderText,children:e.jsxs("h3",{className:u.simulationName,children:[String(m+1).padStart(2,"0"),". ",v]})}),e.jsx("div",{className:u.simulationDescription,children:e.jsx("p",{children:o.description})}),e.jsxs("div",{className:u.simulationStats,children:[e.jsxs("span",{className:u.stat,children:[o.locations?.length||0," LOC"]}),e.jsxs("span",{className:u.stat,children:[d.length," ENT"]})]}),e.jsx("div",{className:u.clickHint,children:"Access â†’"})]},o.id)})})]})}function Jr({simulation:t,allEntries:s,glitchActive:n,onCategoryClick:a}){const r=s.filter(o=>o.appears_in_locations?.some(m=>t.locations?.some(d=>d.id===m))),i=Object.keys(Z).reduce((o,m)=>(o[m]=r.filter(d=>d.entry_type===m),o),{});return e.jsxs("div",{className:u.categoriesView,children:[e.jsxs("div",{className:u.categoriesHeader,children:[e.jsxs("div",{className:u.simulationHeaderInline,children:[e.jsx("div",{className:u.simulationIconSmall,style:{backgroundImage:`url(${t.thumbUrl})`,borderColor:t.color}}),e.jsxs("div",{children:[e.jsx("h2",{className:n?u.glitching:"",children:t.name}),e.jsx("p",{className:u.simulationDescSmall,children:t.description})]})]}),e.jsxs("span",{className:u.count,children:[r.length," total entries"]})]}),e.jsx("div",{className:u.categoriesGrid,children:Object.keys(Z).map(o=>{const m=lt[o],d=i[o].length;return d===0?null:e.jsxs(G.button,{className:u.categoryCard,onClick:()=>a(o),whileHover:{x:5},whileTap:{scale:.98},children:[e.jsx("div",{className:u.categoryIconWrapper,children:e.jsx(m,{className:"w-6 h-6"})}),e.jsxs("div",{className:u.categoryContent,children:[e.jsx("h3",{className:`${u.categoryName} ${n?u.glitching:""}`,children:Z[o]}),e.jsxs("span",{className:u.categoryCount,children:[d," ENT"]})]})]},o)})}),e.jsxs("div",{className:u.categoryInfoPanel,children:[e.jsxs("div",{className:u.infoPanelHeader,children:[e.jsx(xe,{className:"w-5 h-5"}),e.jsx("span",{children:"SELECT CATEGORY"})]}),e.jsxs("p",{className:u.infoPanelText,children:["Choose a category from the left panel to view entries for ",t.name,"."]}),e.jsxs("div",{className:u.infoPanelStats,children:[e.jsxs("div",{className:u.infoPanelStat,children:[e.jsx("span",{className:u.statLabel,children:"LOCATIONS:"}),e.jsx("span",{className:u.statValue,children:t.locations?.length||0})]}),e.jsxs("div",{className:u.infoPanelStat,children:[e.jsx("span",{className:u.statLabel,children:"TOTAL ENTRIES:"}),e.jsx("span",{className:u.statValue,children:r.length})]})]})]})]})}function Yr({onClose:t}){return e.jsx(G.div,{className:u.introOverlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(G.div,{className:u.introDialog,initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[e.jsxs("div",{className:u.introHeader,children:[e.jsx("div",{className:u.introIcon,children:e.jsx(de,{className:"w-8 h-8"})}),e.jsx("h2",{className:u.introTitle,children:"Welcome to the Scavenjer Codex"})]}),e.jsxs("div",{className:u.introContent,children:[e.jsxs("div",{className:u.introSection,children:[e.jsx(et,{className:"w-5 h-5 text-indigo-400 flex-shrink-0"}),e.jsxs("p",{children:["You're viewing an ",e.jsx("strong",{children:"ever-evolving lore system"})," for Scavenjer. As the story unfolds, this codex will grow and changeâ€”entries may be updated, new mysteries revealed, and connections deepened."]})]}),e.jsxs("div",{className:u.introSection,children:[e.jsx(Zs,{className:"w-5 h-5 text-purple-400 flex-shrink-0"}),e.jsxs("p",{children:["Scavenjer is currently a ",e.jsx("strong",{children:"new experimental solo project"})," without backingâ€”a passion-driven exploration of interactive storytelling and world-building."]})]}),e.jsxs("div",{className:u.introCallout,children:[e.jsx("h3",{className:u.introCalloutTitle,children:"Want to Help Shape This Universe?"}),e.jsx("p",{className:u.introCalloutText,children:"If you'd like to contribute to the Scavenjer story, help with development, or support the project in other ways:"}),e.jsxs("div",{className:u.introContact,children:[e.jsxs("div",{className:u.contactItem,children:[e.jsx("span",{className:u.contactLabel,children:"Discord:"}),e.jsx("span",{className:u.contactValue,children:e.jsx("a",{href:"https://discord.com/invite/wX9hjx4cwA",target:"_blank",rel:"noopener noreferrer",className:u.contactLink,children:"click here"})})]}),e.jsxs("div",{className:u.contactItem,children:[e.jsx("span",{className:u.contactLabel,children:"Email:"}),e.jsx("span",{className:u.contactEmail,children:"Zaidek@scavenjer.com"})]})]})]})]}),e.jsxs("div",{className:u.introFooter,children:[e.jsx("button",{onClick:t,className:u.introButtonSecondary,children:"Remind Me Later"}),e.jsx("button",{onClick:t,className:u.introButtonPrimary,children:"Got It, Don't Show Again"})]})]})})}const ct={multiverseBackgroundUrl:"/videos/Lore%20Background.mp4"},dt=[{id:"nebula-prime",name:"ALPHA ONE",description:"The central hub of the galaxy, teeming with trade and ancient technology.",color:"#4f46e5",cx:500,cy:300,thumbUrl:"/images/nebula-prime-thumb.png",backgroundUrl:"/images/nebula-prime.png",imageUrl:"/images/nebula-prime.png",locations:[{id:"prime-core",name:"The Core",description:"Central command of the hub.",cx:400,cy:350,type:"station",thumbUrl:"/images/nebula-prime-thumb.png"},{id:"trading-outpost",name:"Outpost 7",description:"Busy trading post.",cx:600,cy:250,type:"station",thumbUrl:"/images/nebula-prime-thumb.png"},{id:"ancient-shard",name:"Ancient Shard",description:"Mysterious artifact floating in space.",cx:500,cy:500,type:"anomaly",thumbUrl:"/images/nebula-prime-thumb.png"}]},{id:"cryo-wastes",name:"Cryo Wastes",description:"A frozen sector where entropy has slowed time itself.",color:"#06b6d4",cx:200,cy:200,thumbUrl:"/images/cryo-wastes.png",backgroundUrl:"/images/cryo-wastes.png",imageUrl:"/images/cryo-wastes.png",locations:[{id:"ice-citadel",name:"Ice Base",description:"A fortress built into a moon.",cx:150,cy:150,type:"planet",thumbUrl:"/images/cryo-wastes.png"},{id:"frozen-wreck",name:"Frozen Wreck",description:"A ship lost to the ice.",cx:250,cy:250,type:"anomaly",thumbUrl:"/images/cryo-wastes.png"}]},{id:"magma-forge",name:"Magma Forge",description:"Industrial core mining heavy elements from dying stars.",color:"#ef4444",cx:800,cy:600,thumbUrl:"/images/magma-forge.png",backgroundUrl:"/images/magma-forge.png",imageUrl:"/images/magma-forge.png",locations:[{id:"smelter-complex",name:"Smelter Complex",description:"Primary refining station.",cx:750,cy:550,type:"station",thumbUrl:"/images/magma-forge.png"},{id:"lava-extraction",name:"Extraction Site B",description:"Mining operation in the magma rivers.",cx:850,cy:650,type:"planet",thumbUrl:"/images/magma-forge.png"}]},{id:"void-expanse",name:"Void Expanse",description:"Mysterious dark matter cloud. Enter at your own risk.",color:"#8b5cf6",cx:850,cy:150,thumbUrl:"/images/void-expanse.png",backgroundUrl:"/images/void-expanse.png",imageUrl:"/images/void-expanse.png",locations:[{id:"dark-anchor",name:"Dark Anchor",description:"Stable point in the void.",cx:800,cy:100,type:"anomaly",thumbUrl:"/images/void-expanse.png"},{id:"void-eye",name:"The Eye",description:"Silent observation post.",cx:900,cy:200,type:"station",thumbUrl:"/images/void-expanse.png"}]},{id:"univ-1767135380112",name:"ALPHA ONE",description:"A newly discovered realm.",color:"#ffffff",cx:500,cy:400,thumbUrl:"/images/multiversal-bg.png",backgroundUrl:"/images/multiversal-bg.png",imageUrl:"/images/multiversal-bg.png",locations:[]},{id:"univ-1767136475924",name:"Test Universe",description:"A newly discovered realm.",color:"#ffffff",cx:500,cy:400,thumbUrl:"/images/multiversal-bg.png",backgroundUrl:"/images/multiversal-bg.png",imageUrl:"/images/multiversal-bg.png",locations:[]}];function Zr(){const[t,s]=c.useState(null),[n,a]=c.useState(null),[r,i]=c.useState(null),[o,m]=c.useState(dt),[d,v]=c.useState(ct),[g,l]=c.useState(!1),[j,y]=c.useState(!0),[w,C]=c.useState(null),[k,h]=c.useState(!1),S=c.useRef(null);c.useEffect(()=>{const R=sessionStorage.getItem("codex_intro_timestamp");if(!R)h(!0);else{const D=parseInt(R,10),H=Date.now(),$=24*60*60*1e3;H-D>$&&h(!0)}},[]),c.useEffect(()=>{async function R(){try{const[D,H]=await Promise.all([at(),rt()]);if(D&&D.length>0){const $=D.map(U=>({id:U.region_id,name:U.name,description:U.description,color:U.color,cx:U.cx,cy:U.cy,thumbUrl:U.thumb_url,backgroundUrl:U.background_url,imageUrl:U.image_url,locations:(U.locations||[]).map(V=>({id:V.location_id,name:V.name,description:V.description,cx:V.cx,cy:V.cy,type:V.location_type,thumbUrl:V.thumb_url}))}));m($),console.log("âœ… Loaded data from Supabase")}else{const $=localStorage.getItem("simulationData");$?(m(JSON.parse($)),console.log("ðŸ“¦ Loaded data from localStorage")):console.log("ðŸ“‹ Using default fallback data")}if(H)v(H.config_value),console.log("âœ… Loaded config from Supabase");else{const $=localStorage.getItem("universeConfig");$&&(v(JSON.parse($)),console.log("ðŸ“¦ Loaded config from localStorage"))}}catch(D){console.error("Error loading data from Supabase:",D);const H=localStorage.getItem("simulationData"),$=localStorage.getItem("universeConfig");if(H)try{m(JSON.parse(H)),console.log("ðŸ“¦ Fallback: Loaded data from localStorage")}catch(U){console.error("Failed to parse saved simulation data:",U)}if($)try{v(JSON.parse($)),console.log("ðŸ“¦ Fallback: Loaded config from localStorage")}catch(U){console.error("Failed to parse saved config:",U)}}finally{y(!1),l(!0)}}R()},[]),c.useEffect(()=>{g&&localStorage.setItem("simulationData",JSON.stringify(o))},[o,g]),c.useEffect(()=>{g&&localStorage.setItem("universeConfig",JSON.stringify(d))},[d,g]);const b=t&&o.find(R=>R.id===t.id)||null,L=(R,D)=>{a(R),i(D)},x=()=>{a(null),i(null),S.current?.()},I=()=>{sessionStorage.setItem("codex_intro_timestamp",Date.now().toString()),h(!1)};return j?e.jsx("main",{className:"flex items-center justify-center min-h-screen bg-black",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading Simulations..."})]})}):e.jsxs("main",{children:[k&&e.jsx(Yr,{onClose:I}),e.jsx(Ke,{onRegionSelect:s,selectedRegion:b,universeData:o,baseBackground:d.multiverseBackgroundUrl,onLocationSelect:L,onLocationClose:x,zoomResetRef:S}),e.jsx(it,{location:n,origin:r,regionColor:b?.color||"#6366f1",onClose:x}),e.jsx(Vr,{onEntrySelect:C,selectedEntry:w,simulationData:o})]})}function Kr({data:t,config:s,onUpdate:n,onConfigUpdate:a,onCoordPick:r,pickedCoords:i,onPickingStateChange:o}){const[m,d]=c.useState(!0),[v,g]=c.useState("universes"),[l,j]=c.useState(null),[y,w]=c.useState(null),[C,k]=c.useState(!1),[h,S]=c.useState(!1),[b,L]=c.useState(null),[x,I]=c.useState(""),[R,D]=c.useState(""),[H,$]=c.useState(""),U=N=>{const p=t.map(q=>q.id===N.id?N:q);n(p),j(N)},V=async()=>{try{console.log("ðŸš€ Starting save to Supabase..."),console.log("ðŸ“Š Data to save:",{config:s,regions:t}),console.log("ðŸ’¾ Saving config..."),await an(s),console.log("âœ… Config saved");for(let N=0;N<t.length;N++){const p=t[N];console.log(`ðŸ“ Saving region ${N+1}/${t.length}: ${p.name} (${p.id})`);const q=await sn({region_id:p.id,name:p.name,description:p.description||"",color:p.color,cx:p.cx,cy:p.cy,thumb_url:p.thumbUrl||"",background_url:p.backgroundUrl||"",image_url:p.imageUrl||"",sort_order:N});console.log("âœ… Region saved:",q);for(let P=0;P<p.locations.length;P++){const B=p.locations[P];console.log(`  ðŸ“Œ Saving location ${P+1}/${p.locations.length}: ${B.name} (${B.id})`);const ht=await nn({location_id:B.id,region_id:p.id,name:B.name,description:B.description||"",cx:B.cx,cy:B.cy,location_type:B.type||"station",thumb_url:B.thumbUrl||"",sort_order:P});console.log("  âœ… Location saved:",ht)}}console.log("ðŸŽ‰ All data saved successfully!"),alert(`âœ… Changes saved to Supabase successfully!

Your lore data is now persistent across all devices.`)}catch(N){console.error("âŒ Error saving changes:",N),alert(`âŒ Error saving changes:

${N instanceof Error?N.message:JSON.stringify(N)}

Check console for details.`)}},ge=async N=>{if(confirm("Delete this universe and all its locations?"))try{console.log(`ðŸ—‘ï¸ Deleting region: ${N}`),await on(N),console.log(`âœ… Region deleted from database: ${N}`),n(t.filter(p=>p.id!==N)),l?.id===N&&j(null),alert("âœ… Universe deleted successfully!")}catch(p){console.error("âŒ Error deleting region:",p),alert(`âŒ Failed to delete universe:

${p instanceof Error?p.message:"Unknown error"}`)}},ae=()=>{const p={id:`univ-${Date.now()}`,name:"New Universe",description:"A newly discovered realm.",color:"#6366f1",cx:500,cy:400,thumbUrl:"/images/multiversal-bg.png",backgroundUrl:"/images/multiversal-bg.png",imageUrl:"/images/multiversal-bg.png",locations:[]};n([...t,p]),j(p),w(p.id)},re=()=>{const N=!C;k(N),o?.(N),N?S(!1):r(null)},oe=()=>{if(!l||!i)return;const N={...l,cx:Math.round(i.x),cy:Math.round(i.y)};j(N),U(N),k(!1),o?.(!1),r(null)},M=()=>{if(!l||!i)return;const N={id:`loc-${Date.now()}`,name:x||"New Location",description:R||"Description",cx:Math.round(i.x),cy:Math.round(i.y),type:"station",thumbUrl:H||l.thumbUrl},p={...l,locations:[...l.locations,N]};j(p),U(p),S(!1),o?.(!1),r(null),I(""),D(""),$("")},W=N=>{b===N?(L(null),o?.(!1),r(null)):(L(N),S(!1),k(!1),o?.(!0))},ie=N=>{if(!l||!i)return;const p=l.locations.map(P=>P.id===N?{...P,cx:Math.round(i.x),cy:Math.round(i.y)}:P),q={...l,locations:p};j(q),U(q),L(null),o?.(!1),r(null)},F=async N=>{if(l&&confirm("Delete this location?"))try{console.log(`ðŸ—‘ï¸ Deleting location: ${N}`),await ln(N),console.log(`âœ… Location deleted from database: ${N}`);const p={...l,locations:l.locations.filter(q=>q.id!==N)};j(p),U(p),alert("âœ… Location deleted successfully!")}catch(p){console.error("âŒ Error deleting location:",p),alert(`âŒ Failed to delete location:

${p instanceof Error?p.message:"Unknown error"}`)}};return m?e.jsxs("div",{className:"fixed left-0 top-16 bottom-0 w-96 bg-gray-900/95 backdrop-blur-md border-r border-indigo-500/30 shadow-2xl overflow-hidden flex flex-col z-40",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsxs("h2",{className:"text-white font-bold text-lg flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-indigo-400"}),"Control Panel"]}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-white transition-colors p-1",children:e.jsx(Vs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-b border-gray-800",children:[e.jsxs("button",{onClick:()=>g("universes"),className:`flex-1 px-4 py-3 text-sm font-semibold transition-all ${v==="universes"?"bg-indigo-500/20 text-indigo-300 border-b-2 border-indigo-500":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Ys,{className:"w-4 h-4 inline mr-2"}),"Universes"]}),e.jsxs("button",{onClick:()=>g("settings"),className:`flex-1 px-4 py-3 text-sm font-semibold transition-all ${v==="settings"?"bg-indigo-500/20 text-indigo-300 border-b-2 border-indigo-500":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Pe,{className:"w-4 h-4 inline mr-2"}),"Settings"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[v==="universes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:ae,className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(se,{className:"w-4 h-4"}),"New Universe"]}),e.jsxs("button",{onClick:V,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 shadow-lg",children:[e.jsx(st,{className:"w-4 h-4"}),"Save"]})]}),e.jsx("div",{className:"space-y-2",children:t.map(N=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700/50 overflow-hidden",children:[e.jsx("div",{className:`p-3 cursor-pointer hover:bg-gray-700/30 transition-all ${l?.id===N.id?"bg-indigo-500/10":""}`,onClick:()=>{j(N),w(y===N.id?null:N.id)},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-cover bg-center border border-gray-600",style:{backgroundImage:`url(${N.thumbUrl})`}}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-sm",children:N.name}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[N.locations.length," locations"]})]})]}),e.jsx("button",{onClick:p=>{p.stopPropagation(),ge(N.id)},className:"text-red-400 hover:text-red-300 p-1.5 hover:bg-red-500/10 rounded transition-all",children:e.jsx(ne,{className:"w-4 h-4"})})]})}),y===N.id&&l?.id===N.id&&e.jsxs("div",{className:"p-4 border-t border-gray-700/50 space-y-4 bg-gray-900/30",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Universe Name"}),e.jsx("input",{type:"text",value:l.name,onChange:p=>j({...l,name:p.target.value}),className:"w-full bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-indigo-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:p=>j({...l,description:p.target.value}),className:"w-full bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-indigo-500 transition-colors resize-none",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Color"}),e.jsx("input",{type:"color",value:l.color,onChange:p=>j({...l,color:p.target.value}),className:"w-full h-10 bg-gray-800 border border-gray-700 rounded-lg cursor-pointer"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700/50 space-y-3",children:[e.jsx("h4",{className:"text-white text-xs font-semibold mb-2",children:"Images"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Thumbnail URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l.thumbUrl||"",onChange:p=>j({...l,thumbUrl:p.target.value}),placeholder:"/images/your-image.png or https://...",className:"flex-1 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-xs focus:outline-none focus:border-indigo-500"}),e.jsx("div",{className:"w-10 h-10 rounded bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${l.thumbUrl})`},title:"Preview"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Background URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l.backgroundUrl||"",onChange:p=>j({...l,backgroundUrl:p.target.value}),placeholder:"/images/your-background.png or https://...",className:"flex-1 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-xs focus:outline-none focus:border-indigo-500"}),e.jsx("div",{className:"w-10 h-10 rounded bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${l.backgroundUrl})`},title:"Preview"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Detail Image URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l.imageUrl||"",onChange:p=>j({...l,imageUrl:p.target.value}),placeholder:"/images/your-detail.png or https://...",className:"flex-1 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-xs focus:outline-none focus:border-indigo-500"}),e.jsx("div",{className:"w-10 h-10 rounded bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${l.imageUrl})`},title:"Preview"})]})]}),e.jsx("p",{className:"text-gray-500 text-xs italic",children:"ðŸ’¡ Tip: Use /images/your-file.png for local files or https://... for external URLs"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-xs font-semibold",children:"Map Position"}),e.jsxs("span",{className:"text-indigo-300 text-xs font-mono",children:[l.cx,", ",l.cy]})]}),C?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/30 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-indigo-300 text-xs font-semibold mb-1",children:"Click map to select position"}),i&&e.jsxs("p",{className:"text-white text-xs font-mono",children:["New: ",Math.round(i.x),", ",Math.round(i.y)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:oe,disabled:!i,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 disabled:text-gray-500 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Apply"]}),e.jsxs("button",{onClick:re,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Cancel"]})]})]}):e.jsxs("button",{onClick:re,className:"w-full bg-indigo-600/20 hover:bg-indigo-600/30 text-indigo-300 px-3 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),"Reposition"]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-white font-semibold text-sm flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4 text-indigo-400"}),"Locations (",l.locations.length,")"]}),!h&&e.jsxs("button",{onClick:()=>{S(!0),k(!1),o?.(!0)},className:"bg-indigo-600/20 hover:bg-indigo-600/30 text-indigo-300 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all flex items-center gap-1.5",children:[e.jsx(se,{className:"w-3 h-3"}),"Add"]})]}),h&&e.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/30 rounded-lg p-3 mb-3 space-y-2",children:[e.jsx("p",{className:"text-indigo-300 text-xs font-semibold text-center",children:"Click map to place location"}),i&&e.jsxs("p",{className:"text-white text-xs font-mono text-center",children:[Math.round(i.x),", ",Math.round(i.y)]}),e.jsx("input",{type:"text",placeholder:"Location name",value:x,onChange:p=>I(p.target.value),className:"w-full bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-indigo-500"}),e.jsx("textarea",{placeholder:"Description",value:R,onChange:p=>D(p.target.value),className:"w-full bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-indigo-500 resize-none",rows:2}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1",children:"Image URL (optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"/images/location.png or https://...",value:H,onChange:p=>$(p.target.value),className:"flex-1 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-xs focus:outline-none focus:border-indigo-500"}),H&&e.jsx("div",{className:"w-8 h-8 rounded bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${H})`},title:"Preview"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:M,disabled:!i,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 disabled:text-gray-500 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Add"]}),e.jsxs("button",{onClick:()=>{S(!1),o?.(!1),I(""),D(""),$("")},className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Cancel"]})]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.locations.map(p=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700/50 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("input",{type:"text",value:p.name,onChange:q=>{const P=l.locations.map(B=>B.id===p.id?{...B,name:q.target.value}:B);j({...l,locations:P})},className:"flex-1 bg-transparent border-none text-white text-sm font-semibold focus:outline-none"}),e.jsx("button",{onClick:()=>F(p.id),className:"text-red-400 hover:text-red-300 p-1 hover:bg-red-500/10 rounded transition-all",children:e.jsx(ne,{className:"w-3.5 h-3.5"})})]}),e.jsxs("select",{value:p.type,onChange:q=>{const P=l.locations.map(B=>B.id===p.id?{...B,type:q.target.value}:B);j({...l,locations:P})},className:"w-full bg-gray-700 border border-gray-600 text-white px-2 py-1.5 rounded text-xs focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"planet",children:"ðŸª Planet"}),e.jsx("option",{value:"station",children:"ðŸ›°ï¸ Station"}),e.jsx("option",{value:"anomaly",children:"âœ¨ Anomaly"})]}),e.jsx("textarea",{value:p.description,onChange:q=>{const P=l.locations.map(B=>B.id===p.id?{...B,description:q.target.value}:B);j({...l,locations:P})},className:"w-full bg-gray-700 border border-gray-600 text-gray-300 px-2 py-1.5 rounded text-xs focus:outline-none focus:border-indigo-500 resize-none",rows:2,placeholder:"Description..."}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1",children:"Image URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:p.thumbUrl||"",onChange:q=>{const P=l.locations.map(B=>B.id===p.id?{...B,thumbUrl:q.target.value}:B);j({...l,locations:P})},placeholder:"/images/location.png or https://...",className:"flex-1 bg-gray-700 border border-gray-600 text-white px-2 py-1.5 rounded text-xs focus:outline-none focus:border-indigo-500"}),e.jsx("div",{className:"w-8 h-8 rounded bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${p.thumbUrl})`},title:"Preview"})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 rounded px-2 py-1.5",children:[e.jsxs("span",{className:"text-gray-400 text-xs",children:["Pos: ",p.cx,", ",p.cy]}),b!==p.id?e.jsxs("button",{onClick:()=>W(p.id),className:"text-indigo-400 hover:text-indigo-300 text-xs font-semibold flex items-center gap-1",children:[e.jsx(qe,{className:"w-3 h-3"}),"Move"]}):e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsxs("span",{className:"text-white text-xs font-mono",children:[Math.round(i.x),", ",Math.round(i.y)]}),e.jsx("button",{onClick:()=>ie(p.id),disabled:!i,className:"text-emerald-400 hover:text-emerald-300 disabled:text-gray-600 text-xs font-semibold",children:e.jsx(le,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>W(p.id),className:"text-gray-400 hover:text-gray-300 text-xs font-semibold",children:e.jsx(Y,{className:"w-3 h-3"})})]})]})]},p.id))})]}),e.jsxs("button",{onClick:()=>U(l),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center justify-center gap-2 mt-4",children:[e.jsx(le,{className:"w-4 h-4"}),"Apply Changes"]})]})]},N.id))})]}),v==="settings"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-3",children:"Global Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-2",children:"Multiverse Background URL"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${s.multiverseBackgroundUrl})`},title:"Preview"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("input",{type:"text",value:s.multiverseBackgroundUrl,onChange:N=>{a({...s,multiverseBackgroundUrl:N.target.value})},placeholder:"/images/multiversal-bg.png or https://...",className:"w-full bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-indigo-500"}),e.jsx("p",{className:"text-gray-500 text-xs italic",children:"ðŸ’¡ Use /images/filename.png for local files or paste an external URL"})]})]})]})]})})]})]}):e.jsx("button",{onClick:()=>d(!0),className:"fixed left-0 top-1/2 -translate-y-1/2 bg-gray-900/90 backdrop-blur-md text-white p-3 rounded-r-lg border border-l-0 border-indigo-500/30 hover:bg-gray-800/90 transition-all z-40 shadow-xl",children:e.jsx(Ws,{className:"w-5 h-5"})})}const Xr="_container_vrkvm_1",Qr="_header_vrkvm_21",eo="_headerLeft_vrkvm_39",to="_title_vrkvm_51",so="_addButton_vrkvm_65",no="_content_vrkvm_105",ao="_loading_vrkvm_151",ro="_spinner_vrkvm_171",oo="_entriesList_vrkvm_203",io="_categorySection_vrkvm_215",lo="_categoryHeader_vrkvm_227",co="_badge_vrkvm_245",uo="_entriesGrid_vrkvm_263",mo="_entryCard_vrkvm_275",ho="_entryHeader_vrkvm_307",xo="_entryName_vrkvm_321",go="_entrySubtitle_vrkvm_335",po="_entryActions_vrkvm_349",fo="_editButton_vrkvm_359",vo="_deleteButton_vrkvm_397",_o="_entrySummary_vrkvm_433",yo="_entryFooter_vrkvm_455",bo="_statusBadge_vrkvm_467",jo="_editor_vrkvm_493",No="_editorHeader_vrkvm_515",ko="_editorTitle_vrkvm_533",wo="_editorActions_vrkvm_551",Co="_cancelButton_vrkvm_561",So="_saveButton_vrkvm_599",Lo="_editorContent_vrkvm_641",Eo="_section_vrkvm_655",Io="_sectionHeader_vrkvm_675",Bo="_sectionTitle_vrkvm_687",To="_addSectionButton_vrkvm_701",Uo="_formGrid_vrkvm_739",Ao="_formGroup_vrkvm_751",$o="_input_vrkvm_779",Mo="_select_vrkvm_819",qo="_colorInput_vrkvm_851",Po="_textarea_vrkvm_867",Ro="_infoBlock_vrkvm_911",Do="_lockedBlock_vrkvm_913",Ho="_blockHeader_vrkvm_933",Oo="_removeButton_vrkvm_951",Fo="_helpText_vrkvm_989",Go="_locationsList_vrkvm_1001",Vo="_locationButton_vrkvm_1017",Wo="_locationSelected_vrkvm_1055",zo="_locationInfo_vrkvm_1065",Jo="_locationName_vrkvm_1077",Yo="_checkmark_vrkvm_1097",Zo="_toggleGroup_vrkvm_1107",Ko="_toggle_vrkvm_1107",f={container:Xr,header:Qr,headerLeft:eo,title:to,addButton:so,content:no,loading:ao,spinner:ro,entriesList:oo,categorySection:io,categoryHeader:lo,badge:co,entriesGrid:uo,entryCard:mo,entryHeader:ho,entryName:xo,entrySubtitle:go,entryActions:po,editButton:fo,deleteButton:vo,entrySummary:_o,entryFooter:yo,statusBadge:bo,editor:jo,editorHeader:No,editorTitle:ko,editorActions:wo,cancelButton:Co,saveButton:So,editorContent:Lo,section:Eo,sectionHeader:Io,sectionTitle:Bo,addSectionButton:To,formGrid:Uo,formGroup:Ao,input:$o,select:Mo,colorInput:qo,textarea:Po,infoBlock:Ro,lockedBlock:Do,blockHeader:Ho,removeButton:Oo,helpText:Fo,locationsList:Go,locationButton:Vo,locationSelected:Wo,locationInfo:zo,locationName:Jo,checkmark:Yo,toggleGroup:Zo,toggle:Ko},ut={character:Ce,faction:Xe,simulation:we,artifact:Qe,event:nt},mt={character:"Character",faction:"Faction",simulation:"Simulation",artifact:"Artifact",event:"Event"};function Xo({simulationData:t=[]}){const[s,n]=c.useState([]),[a,r]=c.useState(null),[i,o]=c.useState(!0);c.useEffect(()=>{m()},[]);async function m(){o(!0);try{const b=await ot();n(b)}catch(b){console.error("Error loading codex entries:",b)}finally{o(!1)}}const d=()=>{const b={id:"",entry_id:`entry-${Date.now()}`,entry_type:"character",name:"New Entry",summary:"",known_info:[],locked_sections:[],color:"#6366f1",appears_in_locations:[],is_unlocked:!0,is_active:!0,sort_order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r(b)},v=async()=>{if(a)try{console.log("ðŸ’¾ Saving codex entry:",a.name);const b=await cn({entry_id:a.entry_id,entry_type:a.entry_type,name:a.name,subtitle:a.subtitle,summary:a.summary,known_info:a.known_info,locked_sections:a.locked_sections,icon_url:a.icon_url,image_url:a.image_url,color:a.color,primary_location_id:a.primary_location_id,appears_in_locations:a.appears_in_locations,is_unlocked:a.is_unlocked,unlock_condition:a.unlock_condition,sort_order:a.sort_order||0});console.log("âœ… Codex entry saved with ID:",b),await m(),r(null),alert("âœ… Codex entry saved successfully!")}catch(b){console.error("âŒ Error saving codex entry:",b),alert(`âŒ Failed to save codex entry:

${b.message||"Unknown error"}`)}},g=async b=>{if(confirm("Delete this codex entry? This cannot be undone!"))try{console.log("ðŸ—‘ï¸ Deleting codex entry:",b),await dn(b),await m(),a?.entry_id===b&&r(null),alert("âœ… Codex entry deleted successfully!")}catch(L){console.error("âŒ Error deleting codex entry:",L),alert(`âŒ Failed to delete codex entry:

${L.message||"Unknown error"}`)}},l=()=>{a&&r({...a,known_info:[...a.known_info,{title:"New Info",content:""}]})},j=b=>{a&&r({...a,known_info:a.known_info.filter((L,x)=>x!==b)})},y=(b,L,x)=>{if(!a)return;const I=[...a.known_info];I[b]={...I[b],[L]:x},r({...a,known_info:I})},w=()=>{a&&r({...a,locked_sections:[...a.locked_sections,{title:"Classified",message:"Data Incomplete"}]})},C=b=>{a&&r({...a,locked_sections:a.locked_sections.filter((L,x)=>x!==b)})},k=(b,L,x)=>{if(!a)return;const I=[...a.locked_sections];I[b]={...I[b],[L]:x},r({...a,locked_sections:I})},h=b=>{if(!a)return;const L=a.appears_in_locations||[];L.includes(b)?r({...a,appears_in_locations:L.filter(x=>x!==b)}):r({...a,appears_in_locations:[...L,b]})},S=s.reduce((b,L)=>(b[L.entry_type]||(b[L.entry_type]=[]),b[L.entry_type].push(L),b),{});return e.jsxs("div",{className:f.container,children:[e.jsxs("div",{className:f.header,children:[e.jsxs("div",{className:f.headerLeft,children:[e.jsx(de,{className:"w-6 h-6 text-indigo-400"}),e.jsx("h2",{className:f.title,children:"Codex Admin"})]}),e.jsxs("button",{onClick:d,className:f.addButton,children:[e.jsx(se,{className:"w-5 h-5"}),"Add New Entry"]})]}),e.jsx("div",{className:f.content,children:i?e.jsxs("div",{className:f.loading,children:[e.jsx("div",{className:f.spinner}),e.jsx("p",{children:"Loading codex entries..."})]}):a?e.jsx(ei,{entry:a,onChange:r,onSave:v,onCancel:()=>{r(null)},simulationData:t,addKnownInfo:l,removeKnownInfo:j,updateKnownInfo:y,addLockedSection:w,removeLockedSection:C,updateLockedSection:k,toggleLocation:h}):e.jsx(Qo,{entriesByType:S,onEdit:r,onDelete:g})})]})}function Qo({entriesByType:t,onEdit:s,onDelete:n}){return e.jsx("div",{className:f.entriesList,children:Object.entries(ut).map(([a,r])=>{const i=t[a]||[];return i.length===0?null:e.jsxs("div",{className:f.categorySection,children:[e.jsxs("div",{className:f.categoryHeader,children:[e.jsx(r,{className:"w-5 h-5 text-indigo-400"}),e.jsxs("h3",{children:[mt[a],"s"]}),e.jsx("span",{className:f.badge,children:i.length})]}),e.jsx("div",{className:f.entriesGrid,children:i.map(o=>e.jsxs("div",{className:f.entryCard,children:[e.jsxs("div",{className:f.entryHeader,children:[e.jsxs("div",{children:[e.jsx("h4",{className:f.entryName,children:o.name}),o.subtitle&&e.jsx("p",{className:f.entrySubtitle,children:o.subtitle})]}),e.jsxs("div",{className:f.entryActions,children:[e.jsx("button",{onClick:()=>s(o),className:f.editButton,title:"Edit",children:"âœï¸"}),e.jsx("button",{onClick:()=>n(o.entry_id),className:f.deleteButton,title:"Delete",children:e.jsx(ne,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:f.entrySummary,children:o.summary}),e.jsxs("div",{className:f.entryFooter,children:[e.jsx("span",{className:f.statusBadge,children:o.is_unlocked?e.jsxs(e.Fragment,{children:[e.jsx(Ks,{className:"w-3 h-3"})," Unlocked"]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"w-3 h-3"})," Locked"]})}),e.jsx("span",{className:f.statusBadge,children:o.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-3 h-3"})," Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(zs,{className:"w-3 h-3"})," Hidden"]})})]})]},o.entry_id))})]},a)})})}function ei({entry:t,onChange:s,onSave:n,onCancel:a,simulationData:r,addKnownInfo:i,removeKnownInfo:o,updateKnownInfo:m,addLockedSection:d,removeLockedSection:v,updateLockedSection:g,toggleLocation:l}){const j=ut[t.entry_type];return e.jsxs("div",{className:f.editor,children:[e.jsxs("div",{className:f.editorHeader,children:[e.jsxs("div",{className:f.editorTitle,children:[e.jsx(j,{className:"w-6 h-6 text-indigo-400"}),e.jsx("h3",{children:t.id?"Edit Entry":"New Entry"})]}),e.jsxs("div",{className:f.editorActions,children:[e.jsxs("button",{onClick:a,className:f.cancelButton,children:[e.jsx(Y,{className:"w-5 h-5"}),"Cancel"]}),e.jsxs("button",{onClick:n,className:f.saveButton,children:[e.jsx(st,{className:"w-5 h-5"}),"Save"]})]})]}),e.jsxs("div",{className:f.editorContent,children:[e.jsxs("div",{className:f.section,children:[e.jsx("h4",{className:f.sectionTitle,children:"Basic Information"}),e.jsxs("div",{className:f.formGrid,children:[e.jsxs("div",{className:f.formGroup,children:[e.jsx("label",{children:"Type"}),e.jsx("select",{value:t.entry_type,onChange:y=>s({...t,entry_type:y.target.value}),className:f.select,children:Object.entries(mt).map(([y,w])=>e.jsx("option",{value:y,children:w},y))})]}),e.jsxs("div",{className:f.formGroup,children:[e.jsx("label",{children:"Color"}),e.jsx("input",{type:"color",value:t.color,onChange:y=>s({...t,color:y.target.value}),className:f.colorInput})]})]}),e.jsxs("div",{className:f.formGroup,children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:t.name,onChange:y=>s({...t,name:y.target.value}),className:f.input,placeholder:"Entry name..."})]}),e.jsxs("div",{className:f.formGroup,children:[e.jsx("label",{children:"Subtitle (optional)"}),e.jsx("input",{type:"text",value:t.subtitle||"",onChange:y=>s({...t,subtitle:y.target.value}),className:f.input,placeholder:"A short tagline..."})]}),e.jsxs("div",{className:f.formGroup,children:[e.jsx("label",{children:"Summary"}),e.jsx("textarea",{value:t.summary,onChange:y=>s({...t,summary:y.target.value}),className:f.textarea,rows:3,placeholder:"A brief summary..."})]})]}),e.jsxs("div",{className:f.section,children:[e.jsxs("div",{className:f.sectionHeader,children:[e.jsx("h4",{className:f.sectionTitle,children:"Known Information"}),e.jsxs("button",{onClick:i,className:f.addSectionButton,children:[e.jsx(se,{className:"w-4 h-4"}),"Add Info"]})]}),t.known_info.map((y,w)=>e.jsxs("div",{className:f.infoBlock,children:[e.jsxs("div",{className:f.blockHeader,children:[e.jsx("input",{type:"text",value:y.title,onChange:C=>m(w,"title",C.target.value),className:f.input,placeholder:"Info title..."}),e.jsx("button",{onClick:()=>o(w),className:f.removeButton,children:e.jsx(ne,{className:"w-4 h-4"})})]}),e.jsx("textarea",{value:y.content,onChange:C=>m(w,"content",C.target.value),className:f.textarea,rows:4,placeholder:"Information content..."})]},w))]}),e.jsxs("div",{className:f.section,children:[e.jsxs("div",{className:f.sectionHeader,children:[e.jsx("h4",{className:f.sectionTitle,children:"Locked Sections"}),e.jsxs("button",{onClick:d,className:f.addSectionButton,children:[e.jsx(se,{className:"w-4 h-4"}),"Add Locked"]})]}),t.locked_sections.map((y,w)=>e.jsxs("div",{className:f.lockedBlock,children:[e.jsxs("div",{className:f.blockHeader,children:[e.jsx("input",{type:"text",value:y.title,onChange:C=>g(w,"title",C.target.value),className:f.input,placeholder:"Locked section title..."}),e.jsx("button",{onClick:()=>v(w),className:f.removeButton,children:e.jsx(ne,{className:"w-4 h-4"})})]}),e.jsx("input",{type:"text",value:y.message||"",onChange:C=>g(w,"message",C.target.value),className:f.input,placeholder:"Lock message (e.g., 'Data Incomplete')..."})]},w))]}),e.jsxs("div",{className:f.section,children:[e.jsx("h4",{className:f.sectionTitle,children:"Map Locations"}),e.jsx("p",{className:f.helpText,children:"Select locations where this entry appears"}),e.jsx("div",{className:f.locationsList,children:r.map(y=>y.locations.map(w=>{const C=t.appears_in_locations?.includes(w.id);return e.jsxs("button",{onClick:()=>l(w.id),className:`${f.locationButton} ${C?f.locationSelected:""}`,children:[e.jsxs("div",{className:f.locationInfo,children:[e.jsx("span",{className:f.locationName,children:w.name}),e.jsxs("span",{className:f.simulationName,children:["in ",y.name]})]}),C&&e.jsx("span",{className:f.checkmark,children:"âœ“"})]},w.id)}))})]}),e.jsxs("div",{className:f.section,children:[e.jsx("h4",{className:f.sectionTitle,children:"Status"}),e.jsxs("div",{className:f.toggleGroup,children:[e.jsxs("label",{className:f.toggle,children:[e.jsx("input",{type:"checkbox",checked:t.is_unlocked,onChange:y=>s({...t,is_unlocked:y.target.checked})}),e.jsx("span",{children:"Unlocked (visible to players)"})]}),e.jsxs("label",{className:f.toggle,children:[e.jsx("input",{type:"checkbox",checked:t.is_active,onChange:y=>s({...t,is_active:y.target.checked})}),e.jsx("span",{children:"Active (shown in codex)"})]})]})]})]})]})}function ti(){const[t,s]=c.useState("universes"),[n,a]=c.useState(dt),[r,i]=c.useState(ct),[o,m]=c.useState(null),[d,v]=c.useState(!1),[g,l]=c.useState(!0),[j,y]=c.useState(!1),[w,C]=c.useState(""),[k,h]=c.useState(""),[S,b]=c.useState(null),[L,x]=c.useState(null),[I,R]=c.useState(null),D=c.useRef(null),H=Zt(),$="scavenjer2026";c.useEffect(()=>{sessionStorage.getItem("admin_authorized")==="true"?(y(!0),U()):l(!1)},[]);async function U(){l(!0);try{console.log("ðŸ“¥ Loading data from Supabase...");const[M,W]=await Promise.all([en(),rt()]);if(console.log("ðŸ“Š Fetched regions:",M),console.log("âš™ï¸ Fetched config:",W),M&&M.length>0){const ie=M.map(F=>({id:F.region_id,name:F.name,description:F.description,color:F.color,cx:F.cx,cy:F.cy,thumbUrl:F.thumb_url,backgroundUrl:F.background_url,imageUrl:F.image_url,locations:(F.locations||[]).map(N=>({id:N.location_id,name:N.name,description:N.description,cx:N.cx,cy:N.cy,type:N.location_type,thumbUrl:N.thumb_url}))}));console.log("âœ… Transformed regions:",ie),a(ie)}else console.warn("âš ï¸ No regions found in Supabase, using default data");W&&i(W.config_value)}catch(M){console.error("âŒ Error loading admin data:",M)}finally{l(!1)}}const V=M=>{M.preventDefault(),w===$?(sessionStorage.setItem("admin_authorized","true"),y(!0),h(""),U()):h("Incorrect password")},ge=()=>{sessionStorage.removeItem("admin_authorized"),y(!1),H("/")};if(!j)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-900 border border-indigo-500/30 rounded-lg p-8 max-w-md w-full",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Access"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Enter password to continue"}),e.jsxs("form",{onSubmit:V,children:[e.jsx("input",{type:"password",value:w,onChange:M=>C(M.target.value),placeholder:"Enter admin password",className:"w-full px-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-indigo-500 mb-4",autoFocus:!0}),k&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:k}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Access Admin Panel"})]}),e.jsx("button",{onClick:()=>H("/"),className:"w-full mt-4 text-gray-400 hover:text-white transition-colors",children:"â† Back to Map"}),e.jsx("div",{className:"mt-6 p-4 bg-gray-800/50 rounded border border-gray-700",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("strong",{children:"Default Password:"})," scavenjer2026",e.jsx("br",{}),e.jsx("em",{children:"(Set VITE_ADMIN_PASSWORD in .env.local to change)"})]})})]})});if(g)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading Admin Interface..."})]})});const ae=S&&n.find(M=>M.id===S.id)||null,re=(M,W)=>{x(M),R(W)},oe=()=>{x(null),R(null),D.current?.()};return e.jsxs("div",{className:"min-h-screen bg-black relative overflow-hidden",children:[t==="universes"&&e.jsxs(e.Fragment,{children:[e.jsx(Ke,{onRegionSelect:b,selectedRegion:ae,universeData:n,onCoordPick:d?m:void 0,baseBackground:r.multiverseBackgroundUrl,onLocationSelect:re,onLocationClose:oe,zoomResetRef:D}),L&&e.jsx(it,{location:L,origin:I,regionColor:ae?.color||"#6366f1",onClose:oe})]}),e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-gray-900/80 backdrop-blur-md border-b border-indigo-500/30 z-40",children:e.jsxs("div",{className:"max-w-full px-6 py-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h1",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"âš™ï¸"}),"Admin Dashboard"]}),e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-300 text-xs rounded-full font-semibold",children:"â— AUTHORIZED"}),e.jsxs("div",{className:"flex gap-2 ml-6",children:[e.jsx("button",{onClick:()=>s("universes"),className:`px-4 py-2 text-sm rounded-lg transition-all font-semibold ${t==="universes"?"bg-indigo-600 text-white":"bg-white/5 text-gray-300 hover:bg-white/10"}`,children:"ðŸŒŒ Universes"}),e.jsx("button",{onClick:()=>s("codex"),className:`px-4 py-2 text-sm rounded-lg transition-all font-semibold ${t==="codex"?"bg-indigo-600 text-white":"bg-white/5 text-gray-300 hover:bg-white/10"}`,children:"ðŸ“– Codex"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>H("/"),className:"px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-lg transition-all",children:"ðŸ‘ï¸ Public View"}),e.jsx("button",{onClick:ge,className:"px-4 py-2 text-sm bg-red-500/20 text-red-300 hover:bg-red-500/30 rounded-lg transition-all font-semibold",children:"ðŸšª Logout"})]})]})}),e.jsx("div",{className:"pt-16 h-screen",children:t==="universes"?e.jsx(Kr,{data:n,config:r,onUpdate:a,onConfigUpdate:i,onCoordPick:m,pickedCoords:o,onPickingStateChange:v}):e.jsx("div",{className:"h-full p-6",children:e.jsx(Xo,{simulationData:n})})})]})}function si(){return e.jsx(ps,{children:e.jsxs(hs,{children:[e.jsx(be,{path:"/",element:e.jsx(Zr,{})}),e.jsx(be,{path:"/admin",element:e.jsx(ti,{})})]})})}_e.createRoot(document.getElementById("root")).render(e.jsx(pt.StrictMode,{children:e.jsx(si,{})}));
//# sourceMappingURL=index-BuLmyzZz.js.map
