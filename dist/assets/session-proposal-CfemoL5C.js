import{z as m,A as p,B as d}from"./index-D2Em5isd.js";import"./framer-motion-BLeoVWJg.js";import"./react-vendor-hc9cV1gX.js";import"./d3-vendor-DXMZTTbz.js";import"./supabase-vendor-CzrfDcjy.js";async function N(n){const{wallet:s,walletConnectClient:e,event:i,chains:t,onConnect:r}=n,o=s.getAccount();if(!o)throw new Error("No account connected to provided wallet");const a=i.verifyContext?.verified?.origin;a&&await w({origin:a,walletConnectClient:e});const c=await f({account:o,chains:t,sessionProposal:i,walletConnectClient:e});await m(c),s.subscribe("disconnect",()=>{p({session:c,walletConnectClient:e})}),r?.(c)}async function w({walletConnectClient:n,origin:s}){const e=await d();for(const i of e)i.origin===s&&await p({session:i,walletConnectClient:n})}async function f({account:n,walletConnectClient:s,sessionProposal:e,chains:i}){if(!e.params.requiredNamespaces?.eip155&&!e.params.optionalNamespaces?.eip155)throw new Error("No EIP155 namespace found in Wallet Connect session proposal");const t={chains:[...Array.from(new Set([...e.params.requiredNamespaces?.eip155?.chains?.map(a=>`${a}:${n.address}`)??[],...e.params.optionalNamespaces?.eip155?.chains?.map(a=>`${a}:${n.address}`)??[],...i?.map(a=>`eip155:${a.id}:${n.address}`)??[]]))],events:[...e.params.requiredNamespaces?.eip155?.events??[],...e.params.optionalNamespaces?.eip155?.events??[]],methods:[...e.params.requiredNamespaces?.eip155?.methods??[],...e.params.optionalNamespaces?.eip155?.methods??[]]},o=await(await s.approve({id:e.id,namespaces:{eip155:{accounts:t.chains,events:t.events,methods:t.methods}}})).acknowledged();return{origin:e.verifyContext?.verified?.origin||"Unknown origin",topic:o.topic}}export{f as acceptSessionProposal,w as disconnectExistingSessions,N as onSessionProposal};
//# sourceMappingURL=session-proposal-CfemoL5C.js.map
