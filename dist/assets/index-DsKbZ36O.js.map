{"version":3,"file":"index-DsKbZ36O.js","sources":["../../node_modules/thirdweb/dist/esm/bridge/Status.js"],"sourcesContent":["import { getThirdwebBaseUrl } from \"../utils/domains.js\";\nimport { getClientFetch } from \"../utils/fetch.js\";\nimport { ApiError } from \"./types/Errors.js\";\n/**\n * Retrieves a Bridge quote for the provided sell intent. The quote will specify the expected `destinationAmount` that will be received in exchange for the specified `originAmount`, which is specified with the `sellAmountWei` option.\n *\n * The returned status will include both the origin and destination transactions and any finalized amounts for the route.\n *\n * @example\n * ```typescript\n * import { Bridge } from \"thirdweb\";\n *\n * const status = await Bridge.status({\n *   transactionHash: \"0xe199ef82a0b6215221536e18ec512813c1aa10b4f5ed0d4dfdfcd703578da56d\",\n *   chainId: 8453,\n *   client: thirdwebClient,\n * });\n * ```\n *\n * If the transaction is complete, a response might look like:\n * ```typescript\n * {\n *   status: 'COMPLETED',\n *   originAmount: 200000000000000n,\n *   destinationAmount: 188625148000000n,\n *   originChainId: 8453,\n *   destinationChainId: 2741,\n *   originTokenAddress: '0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE',\n *   destinationTokenAddress: '0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE',\n *   transactions: [\n *     {\n *       chainId: 8453,\n *       transactionHash: '0xe199ef82a0b6215221536e18ec512813c1aa10b4f5ed0d4dfdfcd703578da56d'\n *     },\n *     {\n *       chainId: 2741,\n *       transactionHash: '0xa70a82f42330f54be95a542e1fcfe6ed2dd9f07fb8c82ae67afb4342319f7433'\n *     }\n *   ],\n *   purchaseData: {\n *     foo: \"bar\"\n *   }\n * }\n * ```\n *\n * If the origin transaction hasn't been mined yet, a response might look like:\n * ```typescript\n * {\n *   status: \"NOT_FOUND\",\n * }\n * ```\n * This is to allow you to poll for the status without catching an error. Be sure your transaction hash and chain are correct though, as this could also represent a legitimate 404 if the transaction doesn't exist.\n *\n * If the transaction is still pending, a response might look like:\n * ```typescript\n * {\n *   status: \"PENDING\",\n *   originAmount: 1000000000000000000n,\n *   originChainId: 466,\n *   destinationChainId: 1,\n *   originTokenAddress: \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n *   destinationTokenAddress: \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\",\n *   transactions: [\n *     {\n *       transactionHash: \"0xe199ef82a0b6215221536e18ec512813c1aa10b4f5ed0d4dfdfcd703578da56d\",\n *       chainId: 466,\n *     }\n *   ]\n * }\n * ```\n *\n * If the transaction failed, a response might look like:\n * ```typescript\n * {\n *   status: \"FAILED\",\n *   transactions: [\n *     {\n *       transactionHash: \"0xe199ef82a0b6215221536e18ec512813c1aa10b4f5ed0d4dfdfcd703578da56d\",\n *       chainId: 466,\n *     }\n *   ]\n * }\n * ```\n *\n * This status is for a **single origin transaction only**. If your route involves multiple transactions, you'll need to get the status for each of them individually.\n *\n * If sending multiple dependent sequential transactions, wait until `status` returns `COMPLETED` before sending the next transaction.\n *\n * You can access this function's input and output types with `status.Options` and `status.Result`, respectively.\n *\n * @param options - The options for the quote.\n * @param options.transactionHash - The hash of the origin transaction to get the bridge status for.\n * @param options.chainId - The chain ID of the origin token.\n * @param options.transactionId - The transaction ID received from the `prepare` request.\n * @param options.client - Your thirdweb client.\n *\n * @returns A promise that resolves to a status object for the transaction.\n *\n * @throws Will throw an error if there is an issue fetching the status.\n * @bridge\n * @beta\n */\nexport async function status(options) {\n    const { transactionHash, client, transactionId } = options;\n    const chainId = \"chainId\" in options ? options.chainId : options.chain.id;\n    const clientFetch = getClientFetch(client);\n    const url = new URL(`${getThirdwebBaseUrl(\"bridge\")}/v1/status`);\n    url.searchParams.set(\"transactionHash\", transactionHash);\n    url.searchParams.set(\"chainId\", chainId.toString());\n    if (transactionId) {\n        url.searchParams.set(\"transactionId\", transactionId);\n    }\n    const response = await clientFetch(url.toString());\n    if (!response.ok) {\n        const errorJson = await response.json();\n        throw new ApiError({\n            code: errorJson.code || \"UNKNOWN_ERROR\",\n            correlationId: errorJson.correlationId || undefined,\n            message: errorJson.message || response.statusText,\n            statusCode: response.status,\n        });\n    }\n    const { data } = await response.json();\n    if (data.status === \"FAILED\") {\n        return {\n            paymentId: data.paymentId,\n            status: \"FAILED\",\n            transactions: data.transactions,\n        };\n    }\n    if (data.status === \"PENDING\") {\n        return {\n            destinationChainId: data.destinationChainId,\n            destinationToken: data.destinationToken,\n            destinationTokenAddress: data.destinationTokenAddress,\n            originAmount: BigInt(data.originAmount),\n            originChainId: data.originChainId,\n            originToken: data.originToken,\n            originTokenAddress: data.originTokenAddress,\n            paymentId: data.paymentId,\n            purchaseData: data.purchaseData,\n            receiver: data.receiver,\n            sender: data.sender,\n            status: \"PENDING\",\n            transactions: data.transactions,\n        };\n    }\n    if (data.status === \"NOT_FOUND\") {\n        return {\n            paymentId: data.paymentId,\n            status: \"NOT_FOUND\",\n            transactions: [],\n        };\n    }\n    return {\n        destinationAmount: BigInt(data.destinationAmount),\n        destinationChainId: data.destinationChainId,\n        destinationToken: data.destinationToken,\n        destinationTokenAddress: data.destinationTokenAddress,\n        originAmount: BigInt(data.originAmount),\n        originChainId: data.originChainId,\n        originToken: data.originToken,\n        originTokenAddress: data.originTokenAddress,\n        paymentId: data.paymentId,\n        purchaseData: data.purchaseData,\n        receiver: data.receiver,\n        sender: data.sender,\n        status: \"COMPLETED\",\n        transactions: data.transactions,\n    };\n}\n//# sourceMappingURL=Status.js.map"],"names":["status","options","transactionHash","client","transactionId","chainId","clientFetch","getClientFetch","url","getThirdwebBaseUrl","response","errorJson","ApiError","data"],"mappings":"iFAsGO,eAAeA,EAAOC,EAAS,CAClC,KAAM,CAAE,gBAAAC,EAAiB,OAAAC,EAAQ,cAAAC,CAAa,EAAKH,EAC7CI,EAAU,YAAaJ,EAAUA,EAAQ,QAAUA,EAAQ,MAAM,GACjEK,EAAcC,EAAeJ,CAAM,EACnCK,EAAM,IAAI,IAAI,GAAGC,EAAmB,QAAQ,CAAC,YAAY,EAC/DD,EAAI,aAAa,IAAI,kBAAmBN,CAAe,EACvDM,EAAI,aAAa,IAAI,UAAWH,EAAQ,SAAQ,CAAE,EAC9CD,GACAI,EAAI,aAAa,IAAI,gBAAiBJ,CAAa,EAEvD,MAAMM,EAAW,MAAMJ,EAAYE,EAAI,SAAQ,CAAE,EACjD,GAAI,CAACE,EAAS,GAAI,CACd,MAAMC,EAAY,MAAMD,EAAS,KAAI,EACrC,MAAM,IAAIE,EAAS,CACf,KAAMD,EAAU,MAAQ,gBACxB,cAAeA,EAAU,eAAiB,OAC1C,QAASA,EAAU,SAAWD,EAAS,WACvC,WAAYA,EAAS,MACjC,CAAS,CACL,CACA,KAAM,CAAE,KAAAG,CAAI,EAAK,MAAMH,EAAS,KAAI,EACpC,OAAIG,EAAK,SAAW,SACT,CACH,UAAWA,EAAK,UAChB,OAAQ,SACR,aAAcA,EAAK,YAC/B,EAEQA,EAAK,SAAW,UACT,CACH,mBAAoBA,EAAK,mBACzB,iBAAkBA,EAAK,iBACvB,wBAAyBA,EAAK,wBAC9B,aAAc,OAAOA,EAAK,YAAY,EACtC,cAAeA,EAAK,cACpB,YAAaA,EAAK,YAClB,mBAAoBA,EAAK,mBACzB,UAAWA,EAAK,UAChB,aAAcA,EAAK,aACnB,SAAUA,EAAK,SACf,OAAQA,EAAK,OACb,OAAQ,UACR,aAAcA,EAAK,YAC/B,EAEQA,EAAK,SAAW,YACT,CACH,UAAWA,EAAK,UAChB,OAAQ,YACR,aAAc,CAAA,CAC1B,EAEW,CACH,kBAAmB,OAAOA,EAAK,iBAAiB,EAChD,mBAAoBA,EAAK,mBACzB,iBAAkBA,EAAK,iBACvB,wBAAyBA,EAAK,wBAC9B,aAAc,OAAOA,EAAK,YAAY,EACtC,cAAeA,EAAK,cACpB,YAAaA,EAAK,YAClB,mBAAoBA,EAAK,mBACzB,UAAWA,EAAK,UAChB,aAAcA,EAAK,aACnB,SAAUA,EAAK,SACf,OAAQA,EAAK,OACb,OAAQ,YACR,aAAcA,EAAK,YAC3B,CACA","x_google_ignoreList":[0]}