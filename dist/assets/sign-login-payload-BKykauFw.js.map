{"version":3,"file":"sign-login-payload-BKykauFw.js","sources":["../../node_modules/thirdweb/dist/esm/auth/core/create-login-message.js","../../node_modules/thirdweb/dist/esm/auth/core/sign-login-payload.js"],"sourcesContent":["/**\n * Create an EIP-4361 & CAIP-122 compliant message to sign based on the login payload\n * @param payload - The login payload containing the necessary information.\n * @returns The generated login message.\n * @internal\n */\nexport function createLoginMessage(payload) {\n    const typeField = \"Ethereum\";\n    const header = `${payload.domain} wants you to sign in with your ${typeField} account:`;\n    let prefix = [header, payload.address].join(\"\\n\");\n    prefix = [prefix, payload.statement].join(\"\\n\\n\");\n    if (payload.statement) {\n        prefix += \"\\n\";\n    }\n    const suffixArray = [];\n    if (payload.uri) {\n        const uriField = `URI: ${payload.uri}`;\n        suffixArray.push(uriField);\n    }\n    const versionField = `Version: ${payload.version}`;\n    suffixArray.push(versionField);\n    if (payload.chain_id) {\n        const chainField = `Chain ID: ${payload.chain_id}` || \"1\";\n        suffixArray.push(chainField);\n    }\n    const nonceField = `Nonce: ${payload.nonce}`;\n    suffixArray.push(nonceField);\n    const issuedAtField = `Issued At: ${payload.issued_at}`;\n    suffixArray.push(issuedAtField);\n    const expiryField = `Expiration Time: ${payload.expiration_time}`;\n    suffixArray.push(expiryField);\n    if (payload.invalid_before) {\n        const invalidBeforeField = `Not Before: ${payload.invalid_before}`;\n        suffixArray.push(invalidBeforeField);\n    }\n    if (payload.resources) {\n        suffixArray.push([\"Resources:\", ...payload.resources.map((x) => `- ${x}`)].join(\"\\n\"));\n    }\n    const suffix = suffixArray.join(\"\\n\");\n    return [prefix, suffix].join(\"\\n\");\n}\n//# sourceMappingURL=create-login-message.js.map","import { createLoginMessage } from \"./create-login-message.js\";\n/**\n * Signs the login payload using the provided account.\n * @param options - The options for signing the login payload.\n * @returns An object containing the signature and the payload.\n * @example\n * ```ts\n * import { signLoginPayload } from 'thirdweb/auth';\n *\n * const { signature, payload } = await signLoginPayload({\n *  payload: loginPayload,\n *  account: account,\n * });\n * ```\n * @auth\n */\nexport async function signLoginPayload(options) {\n    const { payload, account } = options;\n    const signature = await account.signMessage({\n        message: createLoginMessage(payload),\n    });\n    return {\n        payload,\n        signature,\n    };\n}\n//# sourceMappingURL=sign-login-payload.js.map"],"names":["createLoginMessage","payload","prefix","suffixArray","uriField","versionField","chainField","nonceField","issuedAtField","expiryField","invalidBeforeField","x","suffix","signLoginPayload","options","account","signature"],"mappings":"AAMO,SAASA,EAAmBC,EAAS,CAGxC,IAAIC,EAAS,CADE,GAAGD,EAAQ,MAAM,oDACVA,EAAQ,OAAO,EAAE,KAAK;AAAA,CAAI,EAChDC,EAAS,CAACA,EAAQD,EAAQ,SAAS,EAAE,KAAK;AAAA;AAAA,CAAM,EAC5CA,EAAQ,YACRC,GAAU;AAAA,GAEd,MAAMC,EAAc,CAAA,EACpB,GAAIF,EAAQ,IAAK,CACb,MAAMG,EAAW,QAAQH,EAAQ,GAAG,GACpCE,EAAY,KAAKC,CAAQ,CAC7B,CACA,MAAMC,EAAe,YAAYJ,EAAQ,OAAO,GAEhD,GADAE,EAAY,KAAKE,CAAY,EACzBJ,EAAQ,SAAU,CAClB,MAAMK,EAAa,aAAaL,EAAQ,QAAQ,IAAM,IACtDE,EAAY,KAAKG,CAAU,CAC/B,CACA,MAAMC,EAAa,UAAUN,EAAQ,KAAK,GAC1CE,EAAY,KAAKI,CAAU,EAC3B,MAAMC,EAAgB,cAAcP,EAAQ,SAAS,GACrDE,EAAY,KAAKK,CAAa,EAC9B,MAAMC,EAAc,oBAAoBR,EAAQ,eAAe,GAE/D,GADAE,EAAY,KAAKM,CAAW,EACxBR,EAAQ,eAAgB,CACxB,MAAMS,EAAqB,eAAeT,EAAQ,cAAc,GAChEE,EAAY,KAAKO,CAAkB,CACvC,CACIT,EAAQ,WACRE,EAAY,KAAK,CAAC,aAAc,GAAGF,EAAQ,UAAU,IAAKU,GAAM,KAAKA,CAAC,EAAE,CAAC,EAAE,KAAK;AAAA,CAAI,CAAC,EAEzF,MAAMC,EAAST,EAAY,KAAK;AAAA,CAAI,EACpC,MAAO,CAACD,EAAQU,CAAM,EAAE,KAAK;AAAA,CAAI,CACrC,CCxBO,eAAeC,EAAiBC,EAAS,CAC5C,KAAM,CAAE,QAAAb,EAAS,QAAAc,CAAO,EAAKD,EACvBE,EAAY,MAAMD,EAAQ,YAAY,CACxC,QAASf,EAAmBC,CAAO,CAC3C,CAAK,EACD,MAAO,CACH,QAAAA,EACA,UAAAe,CACR,CACA","x_google_ignoreList":[0,1]}