{"version":3,"mappings":"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","names":["handleSendRawTransactionRequest","options","account","chainId","rawTransaction","validateAccountAddress","address","checksumAddress","parseEip155ChainId","chainIdParts","chainIdAsNumber","handleSendTransactionRequest","thirdwebClient","transaction","preparedTransaction","prepareTransaction","getCachedChain","hexToBigInt","sendTransaction","handleSignRequest","params","handleSignTransactionRequest","hexToNumber","handleSignTypedDataRequest","fulfillRequest","wallet","walletConnectClient","topic","id","rawChainId","request","handlers","result","handleSwitchChain","__vitePreload","potentialHandler","error"],"ignoreList":[0,1,2,3,4,5,6],"sources":["../../node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/request-handlers/send-raw-transaction.js","../../node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/utils.js","../../node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/request-handlers/send-transaction.js","../../node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/request-handlers/sign.js","../../node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/request-handlers/sign-transaction.js","../../node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/request-handlers/sign-typed-data.js","../../node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/session-request.js"],"sourcesContent":["/**\n * @internal\n */\nexport async function handleSendRawTransactionRequest(options) {\n    const { account, chainId, params: [rawTransaction], } = options;\n    if (!account.sendRawTransaction) {\n        throw new Error(\"The current account does not support sending raw transactions\");\n    }\n    const txResult = await account.sendRawTransaction({\n        chainId,\n        rawTransaction,\n    });\n    return txResult.transactionHash;\n}\n//# sourceMappingURL=send-raw-transaction.js.map","import { checksumAddress } from \"../../../utils/address.js\";\n/**\n * @internal\n */\nexport function validateAccountAddress(account, address) {\n    if (checksumAddress(account.address) !== checksumAddress(address)) {\n        throw new Error(`Failed to validate account address (${account.address}), differs from ${address}`);\n    }\n}\n/**\n * @internal\n */\nexport function parseEip155ChainId(chainId) {\n    const chainIdParts = chainId.split(\":\");\n    const chainIdAsNumber = Number.parseInt(chainIdParts[1] ?? \"0\");\n    if (chainIdParts.length !== 2 ||\n        chainIdParts[0] !== \"eip155\" ||\n        chainIdAsNumber === 0 ||\n        !chainIdAsNumber) {\n        throw new Error(`Invalid chainId ${chainId}, should have the format 'eip155:1'`);\n    }\n    return chainIdAsNumber;\n}\n//# sourceMappingURL=utils.js.map","import { getCachedChain } from \"../../../../chains/utils.js\";\nimport { sendTransaction } from \"../../../../transaction/actions/send-transaction.js\";\nimport { prepareTransaction } from \"../../../../transaction/prepare-transaction.js\";\nimport { hexToBigInt } from \"../../../../utils/encoding/hex.js\";\nimport { validateAccountAddress } from \"../utils.js\";\n/**\n * @internal\n */\nexport async function handleSendTransactionRequest(options) {\n    const { account, chainId, thirdwebClient, params: [transaction], } = options;\n    if (transaction.from !== undefined) {\n        validateAccountAddress(account, transaction.from);\n    }\n    const preparedTransaction = prepareTransaction({\n        chain: getCachedChain(chainId),\n        client: thirdwebClient,\n        data: transaction.data,\n        gas: transaction.gas ? hexToBigInt(transaction.gas) : undefined,\n        gasPrice: transaction.gasPrice\n            ? hexToBigInt(transaction.gasPrice)\n            : undefined,\n        to: transaction.to,\n        value: transaction.value ? hexToBigInt(transaction.value) : undefined,\n    });\n    const txResult = await sendTransaction({\n        account,\n        transaction: preparedTransaction,\n    });\n    return txResult.transactionHash;\n}\n//# sourceMappingURL=send-transaction.js.map","import { validateAccountAddress } from \"../utils.js\";\n/**\n * @internal\n */\nexport async function handleSignRequest(options) {\n    const { account, params } = options;\n    validateAccountAddress(account, params[1]);\n    return account.signMessage({ message: { raw: params[0] } });\n}\n//# sourceMappingURL=sign.js.map","import { hexToBigInt, hexToNumber, } from \"../../../../utils/encoding/hex.js\";\nimport { validateAccountAddress } from \"../utils.js\";\n/**\n * @internal\n */\nexport async function handleSignTransactionRequest(options) {\n    const { account, params: [transaction], } = options;\n    if (!account.signTransaction) {\n        throw new Error(\"The current account does not support signing transactions\");\n    }\n    if (transaction.from !== undefined) {\n        validateAccountAddress(account, transaction.from);\n    }\n    return account.signTransaction({\n        data: transaction.data,\n        gas: transaction.gas ? hexToBigInt(transaction.gas) : undefined,\n        gasPrice: transaction.gasPrice\n            ? hexToBigInt(transaction.gasPrice)\n            : undefined,\n        nonce: transaction.nonce ? hexToNumber(transaction.nonce) : undefined,\n        to: transaction.to,\n        value: transaction.value ? hexToBigInt(transaction.value) : undefined,\n    });\n}\n//# sourceMappingURL=sign-transaction.js.map","import { validateAccountAddress } from \"../utils.js\";\n/**\n * @internal\n */\nexport async function handleSignTypedDataRequest(options) {\n    const { account, params } = options;\n    validateAccountAddress(account, params[0]);\n    return account.signTypedData(\n    // The data could be sent to us as a string or object, depending on the level of parsing on the client side\n    typeof params[1] === \"string\" ? JSON.parse(params[1]) : params[1]);\n}\n//# sourceMappingURL=sign-typed-data.js.map","import { handleSendRawTransactionRequest } from \"./request-handlers/send-raw-transaction.js\";\nimport { handleSendTransactionRequest } from \"./request-handlers/send-transaction.js\";\n// Due to some edge cases, we can't import these handlers dynamically\nimport { handleSignRequest } from \"./request-handlers/sign.js\";\nimport { handleSignTransactionRequest } from \"./request-handlers/sign-transaction.js\";\nimport { handleSignTypedDataRequest } from \"./request-handlers/sign-typed-data.js\";\nimport { parseEip155ChainId } from \"./utils.js\";\n/**\n * @internal\n */\nexport async function fulfillRequest(options) {\n    const { wallet, walletConnectClient, thirdwebClient, event: { topic, id, params: { chainId: rawChainId, request }, }, handlers, } = options;\n    const account = wallet.getAccount();\n    if (!account) {\n        throw new Error(\"No account connected to provided wallet\");\n    }\n    let result;\n    try {\n        switch (request.method) {\n            case \"personal_sign\": {\n                if (handlers?.personal_sign) {\n                    result = await handlers.personal_sign({\n                        account,\n                        params: request.params,\n                    });\n                }\n                else {\n                    result = await handleSignRequest({\n                        account,\n                        params: request.params,\n                    });\n                }\n                break;\n            }\n            case \"eth_sign\": {\n                if (handlers?.eth_sign) {\n                    result = await handlers.eth_sign({\n                        account,\n                        params: request.params,\n                    });\n                }\n                else {\n                    result = await handleSignRequest({\n                        account,\n                        params: request.params,\n                    });\n                }\n                break;\n            }\n            case \"eth_signTypedData\": {\n                if (handlers?.eth_signTypedData) {\n                    result = await handlers.eth_signTypedData({\n                        account,\n                        params: request.params,\n                    });\n                }\n                else {\n                    result = await handleSignTypedDataRequest({\n                        account,\n                        params: request.params,\n                    });\n                }\n                break;\n            }\n            case \"eth_signTypedData_v4\": {\n                if (handlers?.eth_signTypedData_v4) {\n                    result = await handlers.eth_signTypedData_v4({\n                        account,\n                        params: request.params,\n                    });\n                }\n                else {\n                    result = await handleSignTypedDataRequest({\n                        account,\n                        params: request.params,\n                    });\n                }\n                break;\n            }\n            case \"eth_signTransaction\": {\n                if (handlers?.eth_signTransaction) {\n                    result = await handlers.eth_signTransaction({\n                        account,\n                        params: request.params,\n                    });\n                }\n                else {\n                    result = await handleSignTransactionRequest({\n                        account,\n                        params: request.params,\n                    });\n                }\n                break;\n            }\n            case \"eth_sendTransaction\": {\n                const chainId = parseEip155ChainId(rawChainId);\n                if (handlers?.eth_sendTransaction) {\n                    result = await handlers.eth_sendTransaction({\n                        account,\n                        chainId,\n                        params: request.params,\n                    });\n                }\n                else {\n                    result = await handleSendTransactionRequest({\n                        account,\n                        chainId,\n                        params: request.params,\n                        thirdwebClient,\n                    });\n                }\n                break;\n            }\n            case \"eth_sendRawTransaction\": {\n                const chainId = parseEip155ChainId(rawChainId);\n                if (handlers?.eth_sendRawTransaction) {\n                    result = await handlers.eth_sendRawTransaction({\n                        account,\n                        chainId,\n                        params: request.params,\n                    });\n                }\n                else {\n                    result = await handleSendRawTransactionRequest({\n                        account,\n                        chainId,\n                        params: request.params,\n                    });\n                }\n                break;\n            }\n            case \"wallet_addEthereumChain\": {\n                if (handlers?.wallet_addEthereumChain) {\n                    result = await handlers.wallet_addEthereumChain({\n                        params: request.params,\n                        wallet,\n                    });\n                }\n                else {\n                    throw new Error(\"Unsupported request method: wallet_addEthereumChain\");\n                }\n                break;\n            }\n            case \"wallet_switchEthereumChain\": {\n                if (handlers?.wallet_switchEthereumChain) {\n                    result = await handlers.wallet_switchEthereumChain({\n                        params: request.params,\n                        wallet,\n                    });\n                }\n                else {\n                    const { handleSwitchChain } = await import(\"./request-handlers/switch-chain.js\");\n                    result = await handleSwitchChain({\n                        params: request.params,\n                        wallet,\n                    });\n                }\n                break;\n            }\n            default: {\n                const potentialHandler = handlers?.[request.method];\n                if (potentialHandler) {\n                    result = await potentialHandler({\n                        account,\n                        chainId: parseEip155ChainId(rawChainId),\n                        params: request.params,\n                    });\n                }\n                else {\n                    throw new Error(`Unsupported request method: ${request.method}`);\n                }\n            }\n        }\n    }\n    catch (error) {\n        result = {\n            code: typeof error === \"object\" && error !== null && \"code\" in error\n                ? error.code\n                : 500,\n            message: typeof error === \"object\" && error !== null && \"message\" in error\n                ? error.message\n                : \"Unknown error\",\n        };\n    }\n    walletConnectClient.respond({\n        response: {\n            id,\n            jsonrpc: \"2.0\",\n            result,\n        },\n        topic,\n    });\n}\n//# sourceMappingURL=session-request.js.map"],"file":"assets/session-request-DSNzVZAA.js"}