import{j as e,A as ce,m as V}from"./framer-motion-BFgEcCY5.js";import{a as mt,r as c,R as ht,b as gt}from"./react-vendor-DNUgy55u.js";import{s as X,z as xt,i as pe,c as fe,p as pt}from"./d3-vendor-DXMZTTbz.js";import{c as ft}from"./supabase-vendor-CHnXwgyT.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var ve={},Ce=mt;ve.createRoot=Ce.createRoot,ve.hydrateRoot=Ce.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ee(){return ee=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ee.apply(this,arguments)}var q;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(q||(q={}));const Se="popstate";function yt(t){t===void 0&&(t={});function s(a,r){let{pathname:o,search:i,hash:m}=a.location;return _e("",{pathname:o,search:i,hash:m},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(a,r){return typeof r=="string"?r:Oe(r)}return _t(s,n,null,t)}function T(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Ne(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function vt(){return Math.random().toString(36).substr(2,8)}function Le(t,s){return{usr:t.state,key:t.key,idx:s}}function _e(t,s,n,a){return n===void 0&&(n=null),ee({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Z(s):s,{state:n,key:s&&s.key||a||vt()})}function Oe(t){let{pathname:s="/",search:n="",hash:a=""}=t;return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function Z(t){let s={};if(t){let n=t.indexOf("#");n>=0&&(s.hash=t.substr(n),t=t.substr(0,n));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function _t(t,s,n,a){a===void 0&&(a={});let{window:r=document.defaultView,v5Compat:o=!1}=a,i=r.history,m=q.Pop,u=null,f=p();f==null&&(f=0,i.replaceState(ee({},i.state,{idx:f}),""));function p(){return(i.state||{idx:null}).idx}function l(){m=q.Pop;let j=p(),h=j==null?null:j-f;f=j,u&&u({action:m,location:k.location,delta:h})}function b(j,h){m=q.Push;let w=_e(k.location,j,h);f=p()+1;let v=Le(w,f),S=k.createHref(w);try{i.pushState(v,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;r.location.assign(S)}o&&u&&u({action:m,location:k.location,delta:1})}function y(j,h){m=q.Replace;let w=_e(k.location,j,h);f=p();let v=Le(w,f),S=k.createHref(w);i.replaceState(v,"",S),o&&u&&u({action:m,location:k.location,delta:0})}function N(j){let h=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof j=="string"?j:Oe(j);return w=w.replace(/ $/,"%20"),T(h,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,h)}let k={get action(){return m},get location(){return t(r,i)},listen(j){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(Se,l),u=j,()=>{r.removeEventListener(Se,l),u=null}},createHref(j){return s(r,j)},createURL:N,encodeLocation(j){let h=N(j);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:b,replace:y,go(j){return i.go(j)}};return k}var Ee;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ee||(Ee={}));function bt(t,s,n){return n===void 0&&(n="/"),jt(t,s,n)}function jt(t,s,n,a){let r=typeof s=="string"?Z(s):s,o=Fe(r.pathname||"/",n);if(o==null)return null;let i=De(t);Nt(i);let m=null;for(let u=0;m==null&&u<i.length;++u){let f=Mt(o);m=Ut(i[u],f)}return m}function De(t,s,n,a){s===void 0&&(s=[]),n===void 0&&(n=[]),a===void 0&&(a="");let r=(o,i,m)=>{let u={relativePath:m===void 0?o.path||"":m,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};u.relativePath.startsWith("/")&&(T(u.relativePath.startsWith(a),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(a.length));let f=J([a,u.relativePath]),p=n.concat(u);o.children&&o.children.length>0&&(T(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),De(o.children,s,p,f)),!(o.path==null&&!o.index)&&s.push({path:f,score:It(f,o.index),routesMeta:p})};return t.forEach((o,i)=>{var m;if(o.path===""||!((m=o.path)!=null&&m.includes("?")))r(o,i);else for(let u of He(o.path))r(o,i,u)}),s}function He(t){let s=t.split("/");if(s.length===0)return[];let[n,...a]=s,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(a.length===0)return r?[o,""]:[o];let i=He(a.join("/")),m=[];return m.push(...i.map(u=>u===""?o:[o,u].join("/"))),r&&m.push(...i),m.map(u=>t.startsWith("/")&&u===""?"/":u)}function Nt(t){t.sort((s,n)=>s.score!==n.score?n.score-s.score:Bt(s.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const kt=/^:[\w-]+$/,wt=3,Ct=2,St=1,Lt=10,Et=-2,Ie=t=>t==="*";function It(t,s){let n=t.split("/"),a=n.length;return n.some(Ie)&&(a+=Et),s&&(a+=Ct),n.filter(r=>!Ie(r)).reduce((r,o)=>r+(kt.test(o)?wt:o===""?St:Lt),a)}function Bt(t,s){return t.length===s.length&&t.slice(0,-1).every((a,r)=>a===s[r])?t[t.length-1]-s[s.length-1]:0}function Ut(t,s,n){let{routesMeta:a}=t,r={},o="/",i=[];for(let m=0;m<a.length;++m){let u=a[m],f=m===a.length-1,p=o==="/"?s:s.slice(o.length)||"/",l=Tt({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},p),b=u.route;if(!l)return null;Object.assign(r,l.params),i.push({params:r,pathname:J([o,l.pathname]),pathnameBase:Ft(J([o,l.pathnameBase])),route:b}),l.pathnameBase!=="/"&&(o=J([o,l.pathnameBase]))}return i}function Tt(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=At(t.path,t.caseSensitive,t.end),r=s.match(n);if(!r)return null;let o=r[0],i=o.replace(/(.)\/+$/,"$1"),m=r.slice(1);return{params:a.reduce((f,p,l)=>{let{paramName:b,isOptional:y}=p;if(b==="*"){let k=m[l]||"";i=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const N=m[l];return y&&!N?f[b]=void 0:f[b]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:i,pattern:t}}function At(t,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),Ne(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,m,u)=>(a.push({paramName:m,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,s?void 0:"i"),a]}function Mt(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ne(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Fe(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}const $t=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pt=t=>$t.test(t);function Rt(t,s){s===void 0&&(s="/");let{pathname:n,search:a="",hash:r=""}=typeof t=="string"?Z(t):t,o;if(n)if(Pt(n))o=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Ne(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?o=Be(n.substring(1),"/"):o=Be(n,s)}else o=s;return{pathname:o,search:Vt(a),hash:Gt(r)}}function Be(t,s){let n=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ye(t,s,n,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ot(t){return t.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function Dt(t,s){let n=Ot(t);return s?n.map((a,r)=>r===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function Ht(t,s,n,a){a===void 0&&(a=!1);let r;typeof t=="string"?r=Z(t):(r=ee({},t),T(!r.pathname||!r.pathname.includes("?"),ye("?","pathname","search",r)),T(!r.pathname||!r.pathname.includes("#"),ye("#","pathname","hash",r)),T(!r.search||!r.search.includes("#"),ye("#","search","hash",r)));let o=t===""||r.pathname==="",i=o?"/":r.pathname,m;if(i==null)m=n;else{let l=s.length-1;if(!a&&i.startsWith("..")){let b=i.split("/");for(;b[0]==="..";)b.shift(),l-=1;r.pathname=b.join("/")}m=l>=0?s[l]:"/"}let u=Rt(r,m),f=i&&i!=="/"&&i.endsWith("/"),p=(o||i===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||p)&&(u.pathname+="/"),u}const J=t=>t.join("/").replace(/\/\/+/g,"/"),Ft=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Vt=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Gt=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Wt(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ve=["post","put","patch","delete"];new Set(Ve);const zt=["get",...Ve];new Set(zt);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function te(){return te=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},te.apply(this,arguments)}const ke=c.createContext(null),qt=c.createContext(null),ue=c.createContext(null),me=c.createContext(null),K=c.createContext({outlet:null,matches:[],isDataRoute:!1}),Ge=c.createContext(null);function he(){return c.useContext(me)!=null}function We(){return he()||T(!1),c.useContext(me).location}function ze(t){c.useContext(ue).static||c.useLayoutEffect(t)}function Jt(){let{isDataRoute:t}=c.useContext(K);return t?is():Yt()}function Yt(){he()||T(!1);let t=c.useContext(ke),{basename:s,future:n,navigator:a}=c.useContext(ue),{matches:r}=c.useContext(K),{pathname:o}=We(),i=JSON.stringify(Dt(r,n.v7_relativeSplatPath)),m=c.useRef(!1);return ze(()=>{m.current=!0}),c.useCallback(function(f,p){if(p===void 0&&(p={}),!m.current)return;if(typeof f=="number"){a.go(f);return}let l=Ht(f,JSON.parse(i),o,p.relative==="path");t==null&&s!=="/"&&(l.pathname=l.pathname==="/"?s:J([s,l.pathname])),(p.replace?a.replace:a.push)(l,p.state,p)},[s,a,i,o,t])}function Zt(t,s){return Kt(t,s)}function Kt(t,s,n,a){he()||T(!1);let{navigator:r}=c.useContext(ue),{matches:o}=c.useContext(K),i=o[o.length-1],m=i?i.params:{};i&&i.pathname;let u=i?i.pathnameBase:"/";i&&i.route;let f=We(),p;if(s){var l;let j=typeof s=="string"?Z(s):s;u==="/"||(l=j.pathname)!=null&&l.startsWith(u)||T(!1),p=j}else p=f;let b=p.pathname||"/",y=b;if(u!=="/"){let j=u.replace(/^\//,"").split("/");y="/"+b.replace(/^\//,"").split("/").slice(j.length).join("/")}let N=bt(t,{pathname:y}),k=ss(N&&N.map(j=>Object.assign({},j,{params:Object.assign({},m,j.params),pathname:J([u,r.encodeLocation?r.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?u:J([u,r.encodeLocation?r.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,a);return s&&k?c.createElement(me.Provider,{value:{location:te({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:q.Pop}},k):k}function Xt(){let t=os(),s=Wt(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},s),n?c.createElement("pre",{style:r},n):null,null)}const Qt=c.createElement(Xt,null);class es extends c.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,n){return n.location!==s.location||n.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:n.error,location:n.location,revalidation:s.revalidation||n.revalidation}}componentDidCatch(s,n){console.error("React Router caught the following error during render",s,n)}render(){return this.state.error!==void 0?c.createElement(K.Provider,{value:this.props.routeContext},c.createElement(Ge.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ts(t){let{routeContext:s,match:n,children:a}=t,r=c.useContext(ke);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),c.createElement(K.Provider,{value:s},a)}function ss(t,s,n,a){var r;if(s===void 0&&(s=[]),n===void 0&&(n=null),a===void 0&&(a=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=a)!=null&&o.v7_partialHydration&&s.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,m=(r=n)==null?void 0:r.errors;if(m!=null){let p=i.findIndex(l=>l.route.id&&m?.[l.route.id]!==void 0);p>=0||T(!1),i=i.slice(0,Math.min(i.length,p+1))}let u=!1,f=-1;if(n&&a&&a.v7_partialHydration)for(let p=0;p<i.length;p++){let l=i[p];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(f=p),l.route.id){let{loaderData:b,errors:y}=n,N=l.route.loader&&b[l.route.id]===void 0&&(!y||y[l.route.id]===void 0);if(l.route.lazy||N){u=!0,f>=0?i=i.slice(0,f+1):i=[i[0]];break}}}return i.reduceRight((p,l,b)=>{let y,N=!1,k=null,j=null;n&&(y=m&&l.route.id?m[l.route.id]:void 0,k=l.route.errorElement||Qt,u&&(f<0&&b===0?(ls("route-fallback"),N=!0,j=null):f===b&&(N=!0,j=l.route.hydrateFallbackElement||null)));let h=s.concat(i.slice(0,b+1)),w=()=>{let v;return y?v=k:N?v=j:l.route.Component?v=c.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=p,c.createElement(ts,{match:l,routeContext:{outlet:p,matches:h,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||b===0)?c.createElement(es,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:w(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):w()},null)}var qe=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qe||{}),Je=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Je||{});function ns(t){let s=c.useContext(ke);return s||T(!1),s}function as(t){let s=c.useContext(qt);return s||T(!1),s}function rs(t){let s=c.useContext(K);return s||T(!1),s}function Ye(t){let s=rs(),n=s.matches[s.matches.length-1];return n.route.id||T(!1),n.route.id}function os(){var t;let s=c.useContext(Ge),n=as(),a=Ye();return s!==void 0?s:(t=n.errors)==null?void 0:t[a]}function is(){let{router:t}=ns(qe.UseNavigateStable),s=Ye(Je.UseNavigateStable),n=c.useRef(!1);return ze(()=>{n.current=!0}),c.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,te({fromRouteId:s},o)))},[t,s])}const Ue={};function ls(t,s,n){Ue[t]||(Ue[t]=!0)}function cs(t,s){t?.v7_startTransition,t?.v7_relativeSplatPath}function be(t){T(!1)}function ds(t){let{basename:s="/",children:n=null,location:a,navigationType:r=q.Pop,navigator:o,static:i=!1,future:m}=t;he()&&T(!1);let u=s.replace(/^\/*/,"/"),f=c.useMemo(()=>({basename:u,navigator:o,static:i,future:te({v7_relativeSplatPath:!1},m)}),[u,m,o,i]);typeof a=="string"&&(a=Z(a));let{pathname:p="/",search:l="",hash:b="",state:y=null,key:N="default"}=a,k=c.useMemo(()=>{let j=Fe(p,u);return j==null?null:{location:{pathname:j,search:l,hash:b,state:y,key:N},navigationType:r}},[u,p,l,b,y,N,r]);return k==null?null:c.createElement(ue.Provider,{value:f},c.createElement(me.Provider,{children:n,value:k}))}function us(t){let{children:s,location:n}=t;return Zt(je(s),n)}new Promise(()=>{});function je(t,s){s===void 0&&(s=[]);let n=[];return c.Children.forEach(t,(a,r)=>{if(!c.isValidElement(a))return;let o=[...s,r];if(a.type===c.Fragment){n.push.apply(n,je(a.props.children,o));return}a.type!==be&&T(!1),!a.props.index||!a.props.children||T(!1);let i={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(i.children=je(a.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ms="6";try{window.__reactRouterVersion=ms}catch{}const hs="startTransition",Te=ht[hs];function gs(t){let{basename:s,children:n,future:a,window:r}=t,o=c.useRef();o.current==null&&(o.current=yt({window:r,v5Compat:!0}));let i=o.current,[m,u]=c.useState({action:i.action,location:i.location}),{v7_startTransition:f}=a||{},p=c.useCallback(l=>{f&&Te?Te(()=>u(l)):u(l)},[u,f]);return c.useLayoutEffect(()=>i.listen(p),[i,p]),c.useEffect(()=>cs(a),[a]),c.createElement(ds,{basename:s,children:n,location:m.location,navigationType:m.action,navigator:i,future:a})}var Ae;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={}));var Me;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Me||(Me={}));const xs="_container_mis0l_1",ps="_backgroundLayer_mis0l_9",fs="_backgroundVideo_mis0l_28",ys="_backgroundDimmer_mis0l_41",vs="_svg_mis0l_52",_s="_pickingMode_mis0l_64",bs="_universeIcon_mis0l_68",js="_spiralArms_mis0l_83",Ns="_spiralArm_mis0l_83",ks="_arm1_mis0l_98",ws="_arm2_mis0l_102",Cs="_arm3_mis0l_106",Ss="_stars_mis0l_133",Ls="_star_mis0l_133",Es="_iconWrapper_mis0l_178",Is="_iconContainer_mis0l_186",Bs="_iconImage_mis0l_198",Us="_locationMarker_mis0l_206",Ts="_regionText_mis0l_210",As="_glowCircle_mis0l_257",Ms="_backButton_mis0l_265",$s="_locationText_mis0l_312",Ps="_sonarRing_mis0l_341",L={container:xs,backgroundLayer:ps,backgroundVideo:fs,backgroundDimmer:ys,svg:vs,pickingMode:_s,universeIcon:bs,spiralArms:js,spiralArm:Ns,arm1:ks,arm2:ws,arm3:Cs,stars:Ss,star:Ls,iconWrapper:Es,iconContainer:Is,iconImage:Bs,locationMarker:Us,regionText:Ts,glowCircle:As,backButton:Ms,locationText:$s,sonarRing:Ps};function Ze({onRegionSelect:t,selectedRegion:s,universeData:n,onCoordPick:a,baseBackground:r="/images/multiversal-bg.png",onLocationSelect:o,onLocationClose:i,zoomResetRef:m}){const u=c.useRef(null),f=c.useRef(null),p=c.useRef(null);c.useEffect(()=>{if(!u.current||!f.current)return;const h=X(u.current),w=X(f.current),v=xt().scaleExtent([.5,4]).on("zoom",S=>{w.attr("transform",S.transform)});p.current=v,h.call(v),l()},[]);const l=()=>{if(!u.current||!p.current)return;const h=X(u.current),w=pe.translate(1e3,800).scale(.8).translate(-500,-400);h.transition().duration(1200).ease(fe).call(p.current.transform,w)},b=c.useCallback(h=>{if(!u.current||!p.current)return;const w=X(u.current),S=pe.translate(1e3,800).scale(1.2).translate(-h.cx,-h.cy);w.transition().duration(1200).ease(fe).call(p.current.transform,S)},[]);c.useEffect(()=>(m&&s&&(m.current=()=>b(s)),()=>{m&&(m.current=null)}),[m,s,b]);const y=(h,w)=>{w.stopPropagation(),t(h),b(h)},N=h=>{if(f.current){if(a){const[w,v]=pt(h,f.current);a({x:w,y:v})}s||t(null)}},k=(h,w)=>{if(w.stopPropagation(),!o||!u.current||!p.current)return;const v=w.clientX,S=w.clientY,C=X(u.current),R=pe.translate(1e3,800).scale(3.5).translate(-h.cx,-h.cy);C.transition().duration(800).ease(fe).call(p.current.transform,R),setTimeout(()=>{o(h,{x:v,y:S})},200)},j=h=>{h.stopPropagation(),i?.(),t(null),l()};return e.jsxs("div",{className:L.container,children:[e.jsx(ce,{children:s&&e.jsxs(V.button,{className:L.backButton,onClick:j,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Multiverse"]})}),e.jsx(ce,{mode:"wait",children:(()=>{const h=s?s.backgroundUrl:r;return h&&(h.endsWith(".mp4")||h.endsWith(".webm")||h.endsWith(".mov"))?e.jsx(V.video,{className:L.backgroundVideo,src:h,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,initial:{opacity:0,scale:1.15},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:1.2,ease:"easeInOut"}},s?s.id:"base"):e.jsx(V.div,{className:L.backgroundLayer,initial:{opacity:0,scale:1.15},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:1.2,ease:"easeInOut"},style:{backgroundImage:`url(${h})`}},s?s.id:"base")})()}),e.jsx("div",{className:L.backgroundDimmer}),e.jsxs("svg",{ref:u,className:`${L.svg} ${a?L.pickingMode:""}`,onClick:N,viewBox:"0 0 2000 1600",preserveAspectRatio:"xMidYMid meet",children:[e.jsxs("defs",{children:[a&&e.jsx("pattern",{id:"grid",width:"100",height:"100",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 100 0 L 0 0 0 100",fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"})}),n.map(h=>e.jsxs("radialGradient",{id:`grad-${h.id}`,cx:"50%",cy:"50%",r:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:h.color,stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:h.color,stopOpacity:"0"})]},`grad-${h.id}`))]}),e.jsxs("g",{ref:f,children:[a&&e.jsx("rect",{width:"2000",height:"2000",x:"-500",y:"-500",fill:"url(#grid)",pointerEvents:"none"}),!s&&n.map(h=>e.jsxs("g",{className:L.universeIcon,children:[e.jsxs("g",{transform:`translate(${h.cx}, ${h.cy})`,children:[e.jsxs("g",{className:L.spiralArms,style:{color:h.color},children:[e.jsx("circle",{r:"150",fill:`url(#grad-${h.id})`,pointerEvents:"none"}),e.jsx("path",{className:`${L.spiralArm} ${L.arm1}`,d:"M 0 0 q -25 -70 45 -115 t 95 25 q 40 80 -20 120",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("path",{className:`${L.spiralArm} ${L.arm2}`,d:"M 0 0 q 70 -25 115 45 t -25 95 q -80 40 -120 -20",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("path",{className:`${L.spiralArm} ${L.arm3}`,d:"M 0 0 q 25 70 -45 115 t -95 -25 q -40 -80 20 -120",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsxs("g",{className:L.stars,children:[e.jsx("circle",{className:L.star,cx:"30",cy:"-40",r:"2.5",fill:"white"}),e.jsx("circle",{className:L.star,cx:"-50",cy:"20",r:"2",fill:"white"}),e.jsx("circle",{className:L.star,cx:"60",cy:"50",r:"3",fill:"white"}),e.jsx("circle",{className:L.star,cx:"-20",cy:"-70",r:"2.2",fill:"white"}),e.jsx("circle",{className:L.star,cx:"80",cy:"-10",r:"2.5",fill:"white"}),e.jsx("circle",{className:L.star,cx:"-40",cy:"80",r:"2",fill:"white"}),e.jsx("circle",{className:L.star,cx:"45",cy:"35",r:"1.8",fill:"white"}),e.jsx("circle",{className:L.star,cx:"-60",cy:"-30",r:"2.2",fill:"white"}),e.jsx("circle",{className:L.star,cx:"10",cy:"65",r:"1.5",fill:"white"}),e.jsx("circle",{className:L.star,cx:"-70",cy:"50",r:"1.8",fill:"white"})]})]}),e.jsx("circle",{r:"80",fill:h.color,opacity:"0.15",className:L.glowCircle,style:{stroke:h.color,strokeWidth:1.5}})]}),e.jsx("foreignObject",{x:h.cx-70,y:h.cy-70,width:"140",height:"140",onClick:w=>y(h,w),children:e.jsx("div",{className:L.iconWrapper,children:e.jsx("div",{className:L.iconContainer,style:{width:"100px",height:"100px",border:`3px solid ${h.color}`,boxShadow:`0 0 35px ${h.color}99`},children:e.jsx("img",{src:h.thumbUrl,alt:h.name,className:L.iconImage})})})}),e.jsx("text",{x:h.cx,y:h.cy+75,className:L.regionText,children:h.name})]},h.id)),s&&s.locations.map(h=>e.jsxs("g",{className:L.locationMarker,style:{color:s.color},children:[e.jsx("circle",{cx:h.cx,cy:h.cy,r:"60",fill:s.color,opacity:"0.1",className:L.sonarRing}),e.jsx("foreignObject",{x:h.cx-55,y:h.cy-55,width:"110",height:"110",onClick:w=>k(h,w),style:{cursor:"pointer"},children:e.jsx("div",{className:L.iconWrapper,children:e.jsx("div",{className:L.iconContainer,style:{width:"80px",height:"80px",border:`2px solid ${s.color}`,boxShadow:`0 0 25px ${s.color}99`},children:e.jsx("img",{src:h.thumbUrl,alt:h.name,className:L.iconImage})})})}),e.jsx("text",{x:h.cx,y:h.cy+60,className:L.locationText,children:h.name})]},h.id))]})]})]})}const Rs="_backdrop_1dns5_1",Os="_overlay_1dns5_17",Ds="_closeButton_1dns5_59",Hs="_content_1dns5_105",Fs="_imageContainer_1dns5_117",Vs="_image_1dns5_117",Gs="_title_1dns5_169",Ws="_description_1dns5_193",zs="_metaSection_1dns5_211",qs="_metaItem_1dns5_227",Js="_metaValue_1dns5_255",H={backdrop:Rs,overlay:Os,closeButton:Ds,content:Hs,imageContainer:Fs,image:Vs,title:Gs,description:Ws,metaSection:zs,metaItem:qs,metaValue:Js};function Ke({location:t,origin:s,regionColor:n,onClose:a}){return s?e.jsx(ce,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(V.div,{className:H.backdrop,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a}),e.jsxs(V.div,{className:H.overlay,style:{"--origin-x":`${s.x}px`,"--origin-y":`${s.y}px`,"--accent-color":n},initial:{opacity:0,scale:.1,x:s.x-window.innerWidth/2,y:s.y-window.innerHeight/2},animate:{opacity:1,scale:1,x:0,y:0},exit:{opacity:0,scale:.1,x:s.x-window.innerWidth/2,y:s.y-window.innerHeight/2},transition:{type:"spring",stiffness:200,damping:25},children:[e.jsx("button",{onClick:a,className:H.closeButton,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsxs("div",{className:H.content,children:[e.jsx("div",{className:H.imageContainer,children:e.jsx("img",{src:t.thumbUrl,alt:t.name,className:H.image})}),e.jsx("h2",{className:H.title,children:t.name}),e.jsx("p",{className:H.description,children:t.description}),e.jsxs("div",{className:H.metaSection,children:[e.jsxs("div",{className:H.metaItem,children:[e.jsx("span",{children:"Point ID"}),e.jsx("span",{className:H.metaValue,children:t.id.toUpperCase()})]}),e.jsxs("div",{className:H.metaItem,children:[e.jsx("span",{children:"Type"}),e.jsx("span",{className:H.metaValue,children:t.type.toUpperCase()})]}),e.jsxs("div",{className:H.metaItem,children:[e.jsx("span",{children:"Coordinates"}),e.jsxs("span",{className:H.metaValue,children:[t.cx,", ",t.cy]})]})]})]})]})]})}):null}const Ys="_toggleButton_irds9_130",Zs="_overlay_irds9_163",Ks="_container_irds9_175",Xs="_header_irds9_211",Qs="_marquee_irds9_222",en="_marqueeContent_irds9_234",tn="_headerLeft_irds9_250",sn="_title_irds9_256",nn="_glitching_irds9_273",an="_backButton_irds9_277",rn="_closeButton_irds9_303",on="_content_irds9_384",ln="_loading_irds9_417",cn="_spinner_irds9_434",dn="_categoriesGrid_irds9_447",un="_categoryCard_irds9_456",mn="_categoryCount_irds9_523",hn="_entriesList_irds9_539",gn="_listHeader_irds9_545",xn="_count_irds9_556",pn="_entriesGrid_irds9_566",fn="_entryCard_irds9_572",yn="_entryName_irds9_611",vn="_entrySubtitle_irds9_621",_n="_entrySummary_irds9_629",bn="_entryFooter_irds9_641",jn="_entryBadge_irds9_649",Nn="_lockedBadge_irds9_661",kn="_detail_irds9_677",wn="_detailHeader_irds9_685",Cn="_detailTitle_irds9_697",Sn="_detailSubtitle_irds9_706",Ln="_detailBadge_irds9_714",En="_detailSummary_irds9_727",In="_section_irds9_739",Bn="_sectionTitle_irds9_750",Un="_infoBlock_irds9_760",Tn="_infoTitle_irds9_770",An="_infoContent_irds9_779",Mn="_lockedBlock_irds9_787",$n="_lockedHeader_irds9_795",Pn="_lockedTitle_irds9_802",Rn="_lockedMessage_irds9_811",On="_simulationsView_irds9_822",Dn="_simulationsHeader_irds9_828",Hn="_simulationsList_irds9_852",Fn="_simulationCard_irds9_858",Vn="_simulationName_irds9_892",Gn="_simulationHeader_irds9_901",Wn="_simulationIcon_irds9_909",zn="_simulationHeaderText_irds9_935",qn="_simulationDescription_irds9_953",Jn="_simulationStats_irds9_971",Yn="_stat_irds9_981",Zn="_clickHint_irds9_993",Kn="_categoriesView_irds9_1013",Xn="_categoriesHeader_irds9_1021",Qn="_simulationHeaderInline_irds9_1031",ea="_simulationIconSmall_irds9_1037",ta="_simulationDescSmall_irds9_1048",sa="_categoryInfoPanel_irds9_1072",na="_infoPanelHeader_irds9_1102",aa="_infoPanelText_irds9_1114",ra="_infoPanelStats_irds9_1123",oa="_infoPanelStat_irds9_1123",ia="_statLabel_irds9_1137",la="_statValue_irds9_1145",ca="_categoryIconWrapper_irds9_1151",da="_categoryContent_irds9_1160",ua="_categoryName_irds9_1168",ma="_introOverlay_irds9_1180",ha="_introDialog_irds9_1192",ga="_introHeader_irds9_1213",xa="_introIcon_irds9_1233",pa="_introTitle_irds9_1252",fa="_introContent_irds9_1265",ya="_introSection_irds9_1272",va="_introCallout_irds9_1291",_a="_introCalloutTitle_irds9_1302",ba="_introCalloutText_irds9_1312",ja="_introContact_irds9_1319",Na="_contactItem_irds9_1325",ka="_contactLabel_irds9_1332",wa="_contactValue_irds9_1338",Ca="_contactLink_irds9_1342",Sa="_contactEmail_irds9_1360",La="_introFooter_irds9_1374",Ea="_introButtonSecondary_irds9_1381",Ia="_introButtonPrimary_irds9_1401",d={toggleButton:Ys,overlay:Zs,container:Ks,header:Xs,marquee:Qs,marqueeContent:en,headerLeft:tn,title:sn,glitching:nn,backButton:an,closeButton:rn,content:on,loading:ln,spinner:cn,categoriesGrid:dn,categoryCard:un,categoryCount:mn,entriesList:hn,listHeader:gn,count:xn,entriesGrid:pn,entryCard:fn,entryName:yn,entrySubtitle:vn,entrySummary:_n,entryFooter:bn,entryBadge:jn,lockedBadge:Nn,detail:kn,detailHeader:wn,detailTitle:Cn,detailSubtitle:Sn,detailBadge:Ln,detailSummary:En,section:In,sectionTitle:Bn,infoBlock:Un,infoTitle:Tn,infoContent:An,lockedBlock:Mn,lockedHeader:$n,lockedTitle:Pn,lockedMessage:Rn,simulationsView:On,simulationsHeader:Dn,simulationsList:Hn,simulationCard:Fn,simulationName:Vn,simulationHeader:Gn,simulationIcon:Wn,simulationHeaderText:zn,simulationDescription:qn,simulationStats:Jn,stat:Yn,clickHint:Zn,categoriesView:Kn,categoriesHeader:Xn,simulationHeaderInline:Qn,simulationIconSmall:ea,simulationDescSmall:ta,categoryInfoPanel:sa,infoPanelHeader:na,infoPanelText:aa,infoPanelStats:ra,infoPanelStat:oa,statLabel:ia,statValue:la,categoryIconWrapper:ca,categoryContent:da,categoryName:ua,introOverlay:ma,introDialog:ha,introHeader:ga,introIcon:xa,introTitle:pa,introContent:fa,introSection:ya,introCallout:va,introCalloutTitle:_a,introCalloutText:ba,introContact:ja,contactItem:Na,contactLabel:ka,contactValue:wa,contactLink:Ca,contactEmail:Sa,introFooter:La,introButtonSecondary:Ea,introButtonPrimary:Ia},Ba="https://zrolrdnymkkdcyksuctq.supabase.co",Ua="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpyb2xyZG55bWtrZGN5a3N1Y3RxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzczNTA1NDcsImV4cCI6MjA1MjkyNjU0N30.QBbAW18vTmGe2jFYKdMYFWMAt_-AxLvJUiF2G95-s3c",W=ft(Ba,Ua,{auth:{persistSession:!0,autoRefreshToken:!0}});async function Xe(){const{data:t,error:s}=await W.from("lore_regions").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(s)throw console.error("Error fetching simulations:",s),s;if(!t||t.length===0)return[];const{data:n,error:a}=await W.from("lore_locations").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(a)throw console.error("Error fetching locations:",a),a;return t.map(o=>({...o,locations:n?.filter(i=>i.region_id===o.id)||[]}))}const Ta=Xe;async function Qe(){const{data:t,error:s}=await W.from("lore_config").select("*").eq("config_key","multiverse_background").single();return s?(console.error("Error fetching lore config:",s),null):t}async function Aa(t){const{data:s,error:n}=await W.rpc("upsert_lore_region",{p_region_id:t.region_id,p_name:t.name,p_description:t.description,p_color:t.color,p_cx:t.cx,p_cy:t.cy,p_thumb_url:t.thumb_url,p_background_url:t.background_url,p_image_url:t.image_url,p_sort_order:t.sort_order||0});if(n)throw console.error("Error upserting simulation:",n),n;return s}const Ma=Aa;async function $a(t){const{data:s,error:n}=await W.rpc("upsert_lore_location",{p_location_id:t.location_id,p_region_id:t.region_id,p_name:t.name,p_description:t.description,p_cx:t.cx,p_cy:t.cy,p_location_type:t.location_type,p_thumb_url:t.thumb_url,p_sort_order:t.sort_order||0});if(n)throw console.error("Error upserting location:",n),n;return s}async function Pa(t){const{data:s,error:n}=await W.rpc("update_lore_config",{p_config_key:"multiverse_background",p_config_value:t});if(n)throw console.error("Error updating lore config:",n),n;return s}async function Ra(t){const{data:s,error:n}=await W.rpc("delete_lore_region",{p_region_id:t});if(n)throw console.error("Error deleting simulation:",n),n;return s}const Oa=Ra;async function Da(t){const{data:s,error:n}=await W.rpc("delete_lore_location",{p_location_id:t});if(n)throw console.error("Error deleting location:",n),n;return s}async function et(){const{data:t,error:s}=await W.from("lore_codex_entries").select("*").eq("is_active",!0).eq("is_unlocked",!0).order("sort_order",{ascending:!0});if(s)throw console.error("Error fetching codex entries:",s),s;return t||[]}async function Ha(t){const{data:s,error:n}=await W.rpc("upsert_codex_entry",{p_entry_id:t.entry_id,p_entry_type:t.entry_type,p_name:t.name,p_subtitle:t.subtitle||null,p_summary:t.summary,p_known_info:t.known_info||[],p_locked_sections:t.locked_sections||[],p_icon_url:t.icon_url||null,p_image_url:t.image_url||null,p_color:t.color||"#6366f1",p_primary_location_id:t.primary_location_id||null,p_appears_in_locations:t.appears_in_locations||[],p_is_unlocked:t.is_unlocked!==!1,p_unlock_condition:t.unlock_condition||null,p_sort_order:t.sort_order||0});if(n)throw console.error("Error upserting codex entry:",n),n;return s}async function Fa(t){const{data:s,error:n}=await W.rpc("delete_codex_entry",{p_entry_id:t});if(n)throw console.error("Error deleting codex entry:",n),n;return s}var Va={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ga=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wa=(t,s)=>{const n=c.forwardRef(({color:a="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:i,children:m,...u},f)=>c.createElement("svg",{ref:f,...Va,width:r,height:r,stroke:a,strokeWidth:i?Number(o)*24/Number(r):o,className:`lucide lucide-${Ga(t)}`,...u},[...s.map(([p,l])=>c.createElement(p,l)),...(Array.isArray(m)?m:[m])||[]]));return n.displayName=`${t}`,n};var B=Wa;const de=B("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),tt=B("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),le=B("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),za=B("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),qa=B("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),we=B("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),Ja=B("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ya=B("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),st=B("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),Za=B("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Ka=B("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Xa=B("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ge=B("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Qa=B("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),$e=B("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),se=B("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),nt=B("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Pe=B("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ne=B("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),er=B("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),at=B("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Q=B("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rt=B("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ot={character:at,faction:tt,simulation:we,artifact:st,event:rt},Y={character:"Characters",faction:"Factions",simulation:"Simulations",artifact:"Artifacts",event:"Events"};function tr({onEntrySelect:t,selectedEntry:s,simulationData:n=[]}){const[a,r]=c.useState(!1),[o,i]=c.useState("simulations"),[m,u]=c.useState(null),[f,p]=c.useState(null),[l,b]=c.useState([]),[y,N]=c.useState(!0),[k,j]=c.useState(!1);c.useEffect(()=>{async function C(){try{const U=await et();b(U)}catch(U){console.error("Error loading codex:",U)}finally{N(!1)}}C()},[]),c.useEffect(()=>{const C=setInterval(()=>{j(!0),setTimeout(()=>j(!1),300)},5e3);return()=>clearInterval(C)},[]);const h=l.filter(C=>!m||C.entry_type===m),w=C=>{u(C),i("categories")},v=()=>{s?(t(null),i("categories")):m?(u(null),i(f?"simulation-categories":"simulations")):o==="simulation-categories"&&(i("simulations"),p(null))},S=C=>{t(C),i("detail")};return a?e.jsx(ce,{children:e.jsx(V.div,{className:d.overlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>r(!1),children:e.jsxs(V.div,{className:d.container,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:C=>C.stopPropagation(),children:[e.jsxs("div",{className:d.header,children:[e.jsxs("div",{className:d.headerLeft,children:[(s||m||o==="simulation-categories")&&e.jsx("button",{onClick:v,className:d.backButton,children:"← Back"}),e.jsxs("h1",{className:`${d.title} ${k?d.glitching:""}`,children:[e.jsx(de,{className:"w-6 h-6"}),"Codex Database"]})]}),e.jsx("button",{onClick:()=>r(!1),className:d.closeButton,children:e.jsx(Q,{className:"w-6 h-6"})})]}),e.jsx("div",{className:d.marquee,children:e.jsx("div",{className:d.marqueeContent,children:"SYSTEM_ALERT: UNAUTHORIZED ACCESS // RELAYING DATA TO THE VOID // [01:00:23:55] // SYSTEM_ALERT: UNAUTHORIZED ACCESS // RELAYING DATA TO THE VOID // [01:00:23:55] //"})}),e.jsx("div",{className:d.content,children:y?e.jsxs("div",{className:d.loading,children:[e.jsx("div",{className:d.spinner}),e.jsx("p",{children:"Loading Codex..."})]}):s?e.jsx(nr,{entry:s}):o==="simulations"?e.jsx(Re,{simulationData:n,allEntries:l,glitchActive:k,onSimulationSelect:C=>{p(C),i("simulation-categories")}}):o==="simulation-categories"&&f?e.jsx(ar,{simulation:n.find(C=>C.id===f),allEntries:l,glitchActive:k,onCategoryClick:w}):m?e.jsx(sr,{category:m,entries:h,glitchActive:k,onEntryClick:S}):e.jsx(Re,{simulationData:n,allEntries:l,glitchActive:k,onSimulationSelect:C=>{p(C),i("simulation-categories")}})})]})})}):e.jsx("button",{className:d.toggleButton,onClick:()=>r(!0),title:"Open Codex",children:e.jsx(de,{className:"w-6 h-6"})})}function sr({category:t,entries:s,glitchActive:n,onEntryClick:a}){const r=ot[t];return e.jsxs("div",{className:d.entriesList,children:[e.jsxs("div",{className:d.listHeader,children:[e.jsx(r,{className:"w-6 h-6 text-indigo-400"}),e.jsx("h2",{className:n?d.glitching:"",children:Y[t]}),e.jsxs("span",{className:d.count,children:[s.length," entries"]})]}),e.jsx("div",{className:d.entriesGrid,children:s.map(o=>e.jsxs(V.button,{className:d.entryCard,onClick:()=>a(o),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("h3",{className:`${d.entryName} ${n?d.glitching:""}`,children:o.name}),o.subtitle&&e.jsx("p",{className:d.entrySubtitle,children:o.subtitle}),e.jsx("p",{className:d.entrySummary,children:o.summary}),e.jsxs("div",{className:d.entryFooter,children:[e.jsx("span",{className:d.entryBadge,children:Y[o.entry_type]}),o.is_unlocked===!1&&e.jsxs("span",{className:d.lockedBadge,children:[e.jsx(ge,{className:"w-3 h-3"}),"Locked"]})]})]},o.entry_id))})]})}function nr({entry:t}){return e.jsxs("div",{className:d.detail,children:[e.jsxs("div",{className:d.detailHeader,children:[e.jsxs("div",{children:[e.jsx("h2",{className:d.detailTitle,children:t.name}),t.subtitle&&e.jsx("p",{className:d.detailSubtitle,children:t.subtitle})]}),e.jsx("span",{className:d.detailBadge,children:Y[t.entry_type]})]}),t.summary&&e.jsx("p",{className:d.detailSummary,children:t.summary}),t.known_info&&t.known_info.length>0&&e.jsxs("div",{className:d.section,children:[e.jsx("h3",{className:d.sectionTitle,children:"Known Information"}),t.known_info.map((s,n)=>e.jsxs("div",{className:d.infoBlock,children:[e.jsx("h4",{className:d.infoTitle,children:s.title}),e.jsx("p",{className:d.infoContent,children:s.content})]},n))]}),t.locked_sections&&t.locked_sections.length>0&&e.jsxs("div",{className:d.section,children:[e.jsx("h3",{className:d.sectionTitle,children:"Classified Information"}),t.locked_sections.map((s,n)=>e.jsxs("div",{className:d.lockedBlock,children:[e.jsxs("div",{className:d.lockedHeader,children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("h4",{className:d.lockedTitle,children:s.title})]}),e.jsx("p",{className:d.lockedMessage,children:s.message||"Data Incomplete"})]},n))]})]})}function Re({simulationData:t,allEntries:s,glitchActive:n,onSimulationSelect:a}){const[r,o]=c.useState({});return c.useEffect(()=>{const i=setInterval(()=>{if(Math.random()>.7&&t.length>0){const u=Math.floor(Math.random()*t.length),f=t[u],p="!@#$%^&*()_+{}|:<>?~",b=f.name.split("").map(y=>Math.random()>.8?p[Math.floor(Math.random()*p.length)]:y).join("");o(y=>({...y,[f.id]:b})),setTimeout(()=>{o(y=>{const N={...y};return delete N[f.id],N})},150)}},3e3);return()=>clearInterval(i)},[t]),e.jsxs("div",{className:d.simulationsView,children:[e.jsxs("div",{className:d.simulationsHeader,children:[e.jsx(we,{className:"w-6 h-6"}),e.jsx("h2",{className:n?d.glitching:"",children:"Simulations"}),e.jsxs("span",{className:d.count,children:[t.length," Available"]})]}),e.jsx("div",{className:d.simulationsList,children:t.map((i,m)=>{const u=s.filter(p=>p.appears_in_locations?.some(l=>i.locations?.some(b=>b.id===l))),f=r[i.id]||i.name;return e.jsxs(V.div,{className:d.simulationCard,onClick:()=>a(i.id),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},children:[e.jsx("div",{className:d.simulationHeader,children:e.jsx("div",{className:d.simulationIcon,style:{backgroundImage:`url(${i.thumbUrl})`,borderColor:i.color}})}),e.jsx("div",{className:d.simulationHeaderText,children:e.jsxs("h3",{className:d.simulationName,children:[String(m+1).padStart(2,"0"),". ",f]})}),e.jsx("div",{className:d.simulationDescription,children:e.jsx("p",{children:i.description})}),e.jsxs("div",{className:d.simulationStats,children:[e.jsxs("span",{className:d.stat,children:[i.locations?.length||0," LOC"]}),e.jsxs("span",{className:d.stat,children:[u.length," ENT"]})]}),e.jsx("div",{className:d.clickHint,children:"Access →"})]},i.id)})})]})}function ar({simulation:t,allEntries:s,glitchActive:n,onCategoryClick:a}){const r=s.filter(i=>i.appears_in_locations?.some(m=>t.locations?.some(u=>u.id===m))),o=Object.keys(Y).reduce((i,m)=>(i[m]=r.filter(u=>u.entry_type===m),i),{});return e.jsxs("div",{className:d.categoriesView,children:[e.jsxs("div",{className:d.categoriesHeader,children:[e.jsxs("div",{className:d.simulationHeaderInline,children:[e.jsx("div",{className:d.simulationIconSmall,style:{backgroundImage:`url(${t.thumbUrl})`,borderColor:t.color}}),e.jsxs("div",{children:[e.jsx("h2",{className:n?d.glitching:"",children:t.name}),e.jsx("p",{className:d.simulationDescSmall,children:t.description})]})]}),e.jsxs("span",{className:d.count,children:[r.length," total entries"]})]}),e.jsx("div",{className:d.categoriesGrid,children:Object.keys(Y).map(i=>{const m=ot[i],u=o[i].length;return u===0?null:e.jsxs(V.button,{className:d.categoryCard,onClick:()=>a(i),whileHover:{x:5},whileTap:{scale:.98},children:[e.jsx("div",{className:d.categoryIconWrapper,children:e.jsx(m,{className:"w-6 h-6"})}),e.jsxs("div",{className:d.categoryContent,children:[e.jsx("h3",{className:`${d.categoryName} ${n?d.glitching:""}`,children:Y[i]}),e.jsxs("span",{className:d.categoryCount,children:[u," ENT"]})]})]},i)})}),e.jsxs("div",{className:d.categoryInfoPanel,children:[e.jsxs("div",{className:d.infoPanelHeader,children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"SELECT CATEGORY"})]}),e.jsxs("p",{className:d.infoPanelText,children:["Choose a category from the left panel to view entries for ",t.name,"."]}),e.jsxs("div",{className:d.infoPanelStats,children:[e.jsxs("div",{className:d.infoPanelStat,children:[e.jsx("span",{className:d.statLabel,children:"LOCATIONS:"}),e.jsx("span",{className:d.statValue,children:t.locations?.length||0})]}),e.jsxs("div",{className:d.infoPanelStat,children:[e.jsx("span",{className:d.statLabel,children:"TOTAL ENTRIES:"}),e.jsx("span",{className:d.statValue,children:r.length})]})]})]})]})}function rr({onClose:t}){return e.jsx(V.div,{className:d.introOverlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(V.div,{className:d.introDialog,initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[e.jsxs("div",{className:d.introHeader,children:[e.jsx("div",{className:d.introIcon,children:e.jsx(de,{className:"w-8 h-8"})}),e.jsx("h2",{className:d.introTitle,children:"Welcome to the Scavenjer Codex"})]}),e.jsxs("div",{className:d.introContent,children:[e.jsxs("div",{className:d.introSection,children:[e.jsx(Xa,{className:"w-5 h-5 text-indigo-400 flex-shrink-0"}),e.jsxs("p",{children:["You're viewing an ",e.jsx("strong",{children:"ever-evolving lore system"})," for Scavenjer. As the story unfolds, this codex will grow and change—entries may be updated, new mysteries revealed, and connections deepened."]})]}),e.jsxs("div",{className:d.introSection,children:[e.jsx(Ka,{className:"w-5 h-5 text-purple-400 flex-shrink-0"}),e.jsxs("p",{children:["Scavenjer is currently a ",e.jsx("strong",{children:"new experimental solo project"})," without backing—a passion-driven exploration of interactive storytelling and world-building."]})]}),e.jsxs("div",{className:d.introCallout,children:[e.jsx("h3",{className:d.introCalloutTitle,children:"Want to Help Shape This Universe?"}),e.jsx("p",{className:d.introCalloutText,children:"If you'd like to contribute to the Scavenjer story, help with development, or support the project in other ways:"}),e.jsxs("div",{className:d.introContact,children:[e.jsxs("div",{className:d.contactItem,children:[e.jsx("span",{className:d.contactLabel,children:"Discord:"}),e.jsx("span",{className:d.contactValue,children:e.jsx("a",{href:"https://discord.com/invite/wX9hjx4cwA",target:"_blank",rel:"noopener noreferrer",className:d.contactLink,children:"click here"})})]}),e.jsxs("div",{className:d.contactItem,children:[e.jsx("span",{className:d.contactLabel,children:"Email:"}),e.jsx("span",{className:d.contactEmail,children:"Zaidek@scavenjer.com"})]})]})]})]}),e.jsxs("div",{className:d.introFooter,children:[e.jsx("button",{onClick:t,className:d.introButtonSecondary,children:"Remind Me Later"}),e.jsx("button",{onClick:t,className:d.introButtonPrimary,children:"Got It, Don't Show Again"})]})]})})}const it={multiverseBackgroundUrl:"/videos/Lore%20Background.mp4"},lt=[{id:"nebula-prime",name:"ALPHA ONE",description:"The central hub of the galaxy, teeming with trade and ancient technology.",color:"#4f46e5",cx:500,cy:300,thumbUrl:"/images/nebula-prime-thumb.png",backgroundUrl:"/images/nebula-prime.png",imageUrl:"/images/nebula-prime.png",locations:[{id:"prime-core",name:"The Core",description:"Central command of the hub.",cx:400,cy:350,type:"station",thumbUrl:"/images/nebula-prime-thumb.png"},{id:"trading-outpost",name:"Outpost 7",description:"Busy trading post.",cx:600,cy:250,type:"station",thumbUrl:"/images/nebula-prime-thumb.png"},{id:"ancient-shard",name:"Ancient Shard",description:"Mysterious artifact floating in space.",cx:500,cy:500,type:"anomaly",thumbUrl:"/images/nebula-prime-thumb.png"}]},{id:"cryo-wastes",name:"Cryo Wastes",description:"A frozen sector where entropy has slowed time itself.",color:"#06b6d4",cx:200,cy:200,thumbUrl:"/images/cryo-wastes.png",backgroundUrl:"/images/cryo-wastes.png",imageUrl:"/images/cryo-wastes.png",locations:[{id:"ice-citadel",name:"Ice Base",description:"A fortress built into a moon.",cx:150,cy:150,type:"planet",thumbUrl:"/images/cryo-wastes.png"},{id:"frozen-wreck",name:"Frozen Wreck",description:"A ship lost to the ice.",cx:250,cy:250,type:"anomaly",thumbUrl:"/images/cryo-wastes.png"}]},{id:"magma-forge",name:"Magma Forge",description:"Industrial core mining heavy elements from dying stars.",color:"#ef4444",cx:800,cy:600,thumbUrl:"/images/magma-forge.png",backgroundUrl:"/images/magma-forge.png",imageUrl:"/images/magma-forge.png",locations:[{id:"smelter-complex",name:"Smelter Complex",description:"Primary refining station.",cx:750,cy:550,type:"station",thumbUrl:"/images/magma-forge.png"},{id:"lava-extraction",name:"Extraction Site B",description:"Mining operation in the magma rivers.",cx:850,cy:650,type:"planet",thumbUrl:"/images/magma-forge.png"}]},{id:"void-expanse",name:"Void Expanse",description:"Mysterious dark matter cloud. Enter at your own risk.",color:"#8b5cf6",cx:850,cy:150,thumbUrl:"/images/void-expanse.png",backgroundUrl:"/images/void-expanse.png",imageUrl:"/images/void-expanse.png",locations:[{id:"dark-anchor",name:"Dark Anchor",description:"Stable point in the void.",cx:800,cy:100,type:"anomaly",thumbUrl:"/images/void-expanse.png"},{id:"void-eye",name:"The Eye",description:"Silent observation post.",cx:900,cy:200,type:"station",thumbUrl:"/images/void-expanse.png"}]},{id:"univ-1767135380112",name:"ALPHA ONE",description:"A newly discovered realm.",color:"#ffffff",cx:500,cy:400,thumbUrl:"/images/multiversal-bg.png",backgroundUrl:"/images/multiversal-bg.png",imageUrl:"/images/multiversal-bg.png",locations:[]},{id:"univ-1767136475924",name:"Test Universe",description:"A newly discovered realm.",color:"#ffffff",cx:500,cy:400,thumbUrl:"/images/multiversal-bg.png",backgroundUrl:"/images/multiversal-bg.png",imageUrl:"/images/multiversal-bg.png",locations:[]}];function or(){const[t,s]=c.useState(null),[n,a]=c.useState(null),[r,o]=c.useState(null),[i,m]=c.useState(lt),[u,f]=c.useState(it),[p,l]=c.useState(!1),[b,y]=c.useState(!0),[N,k]=c.useState(null),[j,h]=c.useState(!1),w=c.useRef(null);c.useEffect(()=>{const R=sessionStorage.getItem("codex_intro_timestamp");if(!R)h(!0);else{const O=parseInt(R,10),D=Date.now(),A=24*60*60*1e3;D-O>A&&h(!0)}},[]),c.useEffect(()=>{async function R(){try{const[O,D]=await Promise.all([Xe(),Qe()]);if(O&&O.length>0){const A=O.map(I=>({id:I.region_id,name:I.name,description:I.description,color:I.color,cx:I.cx,cy:I.cy,thumbUrl:I.thumb_url,backgroundUrl:I.background_url,imageUrl:I.image_url,locations:(I.locations||[]).map(G=>({id:G.location_id,name:G.name,description:G.description,cx:G.cx,cy:G.cy,type:G.location_type,thumbUrl:G.thumb_url}))}));m(A),console.log("✅ Loaded data from Supabase")}else{const A=localStorage.getItem("simulationData");A?(m(JSON.parse(A)),console.log("📦 Loaded data from localStorage")):console.log("📋 Using default fallback data")}if(D)f(D.config_value),console.log("✅ Loaded config from Supabase");else{const A=localStorage.getItem("universeConfig");A&&(f(JSON.parse(A)),console.log("📦 Loaded config from localStorage"))}}catch(O){console.error("Error loading data from Supabase:",O);const D=localStorage.getItem("simulationData"),A=localStorage.getItem("universeConfig");if(D)try{m(JSON.parse(D)),console.log("📦 Fallback: Loaded data from localStorage")}catch(I){console.error("Failed to parse saved simulation data:",I)}if(A)try{f(JSON.parse(A)),console.log("📦 Fallback: Loaded config from localStorage")}catch(I){console.error("Failed to parse saved config:",I)}}finally{y(!1),l(!0)}}R()},[]),c.useEffect(()=>{p&&localStorage.setItem("simulationData",JSON.stringify(i))},[i,p]),c.useEffect(()=>{p&&localStorage.setItem("universeConfig",JSON.stringify(u))},[u,p]);const v=t&&i.find(R=>R.id===t.id)||null,S=(R,O)=>{a(R),o(O)},C=()=>{a(null),o(null),w.current?.()},U=()=>{sessionStorage.setItem("codex_intro_timestamp",Date.now().toString()),h(!1)};return b?e.jsx("main",{className:"flex items-center justify-center min-h-screen bg-black",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading Simulations..."})]})}):e.jsxs("main",{children:[j&&e.jsx(rr,{onClose:U}),e.jsx(Ze,{onRegionSelect:s,selectedRegion:v,universeData:i,baseBackground:u.multiverseBackgroundUrl,onLocationSelect:S,onLocationClose:C,zoomResetRef:w}),e.jsx(Ke,{location:n,origin:r,regionColor:v?.color||"#6366f1",onClose:C}),e.jsx(tr,{onEntrySelect:k,selectedEntry:N,simulationData:i})]})}function ir({data:t,config:s,onUpdate:n,onConfigUpdate:a,onCoordPick:r,pickedCoords:o,onPickingStateChange:i}){const[m,u]=c.useState(!0),[f,p]=c.useState("universes"),[l,b]=c.useState(null),[y,N]=c.useState(null),[k,j]=c.useState(!1),[h,w]=c.useState(!1),[v,S]=c.useState(null),[C,U]=c.useState(""),[R,O]=c.useState(""),[D,A]=c.useState(""),I=_=>{const g=t.map($=>$.id===_.id?_:$);n(g),b(_)},G=async()=>{try{console.log("🚀 Starting save to Supabase..."),console.log("📊 Data to save:",{config:s,regions:t}),console.log("💾 Saving config..."),await Pa(s),console.log("✅ Config saved");for(let _=0;_<t.length;_++){const g=t[_];console.log(`📍 Saving region ${_+1}/${t.length}: ${g.name} (${g.id})`);const $=await Ma({region_id:g.id,name:g.name,description:g.description||"",color:g.color,cx:g.cx,cy:g.cy,thumb_url:g.thumbUrl||"",background_url:g.backgroundUrl||"",image_url:g.imageUrl||"",sort_order:_});console.log("✅ Region saved:",$);for(let P=0;P<g.locations.length;P++){const E=g.locations[P];console.log(`  📌 Saving location ${P+1}/${g.locations.length}: ${E.name} (${E.id})`);const ut=await $a({location_id:E.id,region_id:g.id,name:E.name,description:E.description||"",cx:E.cx,cy:E.cy,location_type:E.type||"station",thumb_url:E.thumbUrl||"",sort_order:P});console.log("  ✅ Location saved:",ut)}}console.log("🎉 All data saved successfully!"),alert(`✅ Changes saved to Supabase successfully!

Your lore data is now persistent across all devices.`)}catch(_){console.error("❌ Error saving changes:",_),alert(`❌ Error saving changes:

${_ instanceof Error?_.message:JSON.stringify(_)}

Check console for details.`)}},xe=async _=>{if(confirm("Delete this universe and all its locations?"))try{console.log(`🗑️ Deleting region: ${_}`),await Oa(_),console.log(`✅ Region deleted from database: ${_}`),n(t.filter(g=>g.id!==_)),l?.id===_&&b(null),alert("✅ Universe deleted successfully!")}catch(g){console.error("❌ Error deleting region:",g),alert(`❌ Failed to delete universe:

${g instanceof Error?g.message:"Unknown error"}`)}},ae=()=>{const g={id:`univ-${Date.now()}`,name:"New Universe",description:"A newly discovered realm.",color:"#6366f1",cx:500,cy:400,thumbUrl:"/images/multiversal-bg.png",backgroundUrl:"/images/multiversal-bg.png",imageUrl:"/images/multiversal-bg.png",locations:[]};n([...t,g]),b(g),N(g.id)},re=()=>{const _=!k;j(_),i?.(_),_?w(!1):r(null)},oe=()=>{if(!l||!o)return;const _={...l,cx:Math.round(o.x),cy:Math.round(o.y)};b(_),I(_),j(!1),i?.(!1),r(null)},M=()=>{if(!l||!o)return;const _={id:`loc-${Date.now()}`,name:C||"New Location",description:R||"Description",cx:Math.round(o.x),cy:Math.round(o.y),type:"station",thumbUrl:D||l.thumbUrl},g={...l,locations:[...l.locations,_]};b(g),I(g),w(!1),i?.(!1),r(null),U(""),O(""),A("")},z=_=>{v===_?(S(null),i?.(!1),r(null)):(S(_),w(!1),j(!1),i?.(!0))},ie=_=>{if(!l||!o)return;const g=l.locations.map(P=>P.id===_?{...P,cx:Math.round(o.x),cy:Math.round(o.y)}:P),$={...l,locations:g};b($),I($),S(null),i?.(!1),r(null)},F=async _=>{if(l&&confirm("Delete this location?"))try{console.log(`🗑️ Deleting location: ${_}`),await Da(_),console.log(`✅ Location deleted from database: ${_}`);const g={...l,locations:l.locations.filter($=>$.id!==_)};b(g),I(g),alert("✅ Location deleted successfully!")}catch(g){console.error("❌ Error deleting location:",g),alert(`❌ Failed to delete location:

${g instanceof Error?g.message:"Unknown error"}`)}};return m?e.jsxs("div",{className:"fixed left-0 top-16 bottom-0 w-96 bg-gray-900/95 backdrop-blur-md border-r border-indigo-500/30 shadow-2xl overflow-hidden flex flex-col z-40",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsxs("h2",{className:"text-white font-bold text-lg flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-indigo-400"}),"Control Panel"]}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-white transition-colors p-1",children:e.jsx(za,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-b border-gray-800",children:[e.jsxs("button",{onClick:()=>p("universes"),className:`flex-1 px-4 py-3 text-sm font-semibold transition-all ${f==="universes"?"bg-indigo-500/20 text-indigo-300 border-b-2 border-indigo-500":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Za,{className:"w-4 h-4 inline mr-2"}),"Universes"]}),e.jsxs("button",{onClick:()=>p("settings"),className:`flex-1 px-4 py-3 text-sm font-semibold transition-all ${f==="settings"?"bg-indigo-500/20 text-indigo-300 border-b-2 border-indigo-500":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Pe,{className:"w-4 h-4 inline mr-2"}),"Settings"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[f==="universes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:ae,className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(se,{className:"w-4 h-4"}),"New Universe"]}),e.jsxs("button",{onClick:G,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 shadow-lg",children:[e.jsx(nt,{className:"w-4 h-4"}),"Save"]})]}),e.jsx("div",{className:"space-y-2",children:t.map(_=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700/50 overflow-hidden",children:[e.jsx("div",{className:`p-3 cursor-pointer hover:bg-gray-700/30 transition-all ${l?.id===_.id?"bg-indigo-500/10":""}`,onClick:()=>{b(_),N(y===_.id?null:_.id)},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-cover bg-center border border-gray-600",style:{backgroundImage:`url(${_.thumbUrl})`}}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-sm",children:_.name}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[_.locations.length," locations"]})]})]}),e.jsx("button",{onClick:g=>{g.stopPropagation(),xe(_.id)},className:"text-red-400 hover:text-red-300 p-1.5 hover:bg-red-500/10 rounded transition-all",children:e.jsx(ne,{className:"w-4 h-4"})})]})}),y===_.id&&l?.id===_.id&&e.jsxs("div",{className:"p-4 border-t border-gray-700/50 space-y-4 bg-gray-900/30",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Universe Name"}),e.jsx("input",{type:"text",value:l.name,onChange:g=>b({...l,name:g.target.value}),className:"w-full bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-indigo-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:g=>b({...l,description:g.target.value}),className:"w-full bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-indigo-500 transition-colors resize-none",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Color"}),e.jsx("input",{type:"color",value:l.color,onChange:g=>b({...l,color:g.target.value}),className:"w-full h-10 bg-gray-800 border border-gray-700 rounded-lg cursor-pointer"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700/50 space-y-3",children:[e.jsx("h4",{className:"text-white text-xs font-semibold mb-2",children:"Images"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Thumbnail URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l.thumbUrl||"",onChange:g=>b({...l,thumbUrl:g.target.value}),placeholder:"/images/your-image.png or https://...",className:"flex-1 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-xs focus:outline-none focus:border-indigo-500"}),e.jsx("div",{className:"w-10 h-10 rounded bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${l.thumbUrl})`},title:"Preview"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Background URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l.backgroundUrl||"",onChange:g=>b({...l,backgroundUrl:g.target.value}),placeholder:"/images/your-background.png or https://...",className:"flex-1 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-xs focus:outline-none focus:border-indigo-500"}),e.jsx("div",{className:"w-10 h-10 rounded bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${l.backgroundUrl})`},title:"Preview"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1.5",children:"Detail Image URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l.imageUrl||"",onChange:g=>b({...l,imageUrl:g.target.value}),placeholder:"/images/your-detail.png or https://...",className:"flex-1 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-xs focus:outline-none focus:border-indigo-500"}),e.jsx("div",{className:"w-10 h-10 rounded bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${l.imageUrl})`},title:"Preview"})]})]}),e.jsx("p",{className:"text-gray-500 text-xs italic",children:"💡 Tip: Use /images/your-file.png for local files or https://... for external URLs"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-xs font-semibold",children:"Map Position"}),e.jsxs("span",{className:"text-indigo-300 text-xs font-mono",children:[l.cx,", ",l.cy]})]}),k?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/30 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-indigo-300 text-xs font-semibold mb-1",children:"Click map to select position"}),o&&e.jsxs("p",{className:"text-white text-xs font-mono",children:["New: ",Math.round(o.x),", ",Math.round(o.y)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:oe,disabled:!o,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 disabled:text-gray-500 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Apply"]}),e.jsxs("button",{onClick:re,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Cancel"]})]})]}):e.jsxs("button",{onClick:re,className:"w-full bg-indigo-600/20 hover:bg-indigo-600/30 text-indigo-300 px-3 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),"Reposition"]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-white font-semibold text-sm flex items-center gap-2",children:[e.jsx(Qa,{className:"w-4 h-4 text-indigo-400"}),"Locations (",l.locations.length,")"]}),!h&&e.jsxs("button",{onClick:()=>{w(!0),j(!1),i?.(!0)},className:"bg-indigo-600/20 hover:bg-indigo-600/30 text-indigo-300 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all flex items-center gap-1.5",children:[e.jsx(se,{className:"w-3 h-3"}),"Add"]})]}),h&&e.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/30 rounded-lg p-3 mb-3 space-y-2",children:[e.jsx("p",{className:"text-indigo-300 text-xs font-semibold text-center",children:"Click map to place location"}),o&&e.jsxs("p",{className:"text-white text-xs font-mono text-center",children:[Math.round(o.x),", ",Math.round(o.y)]}),e.jsx("input",{type:"text",placeholder:"Location name",value:C,onChange:g=>U(g.target.value),className:"w-full bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-indigo-500"}),e.jsx("textarea",{placeholder:"Description",value:R,onChange:g=>O(g.target.value),className:"w-full bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-indigo-500 resize-none",rows:2}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1",children:"Image URL (optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"/images/location.png or https://...",value:D,onChange:g=>A(g.target.value),className:"flex-1 bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-xs focus:outline-none focus:border-indigo-500"}),D&&e.jsx("div",{className:"w-8 h-8 rounded bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${D})`},title:"Preview"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:M,disabled:!o,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 disabled:text-gray-500 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Add"]}),e.jsxs("button",{onClick:()=>{w(!1),i?.(!1),U(""),O(""),A("")},className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Cancel"]})]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.locations.map(g=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700/50 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("input",{type:"text",value:g.name,onChange:$=>{const P=l.locations.map(E=>E.id===g.id?{...E,name:$.target.value}:E);b({...l,locations:P})},className:"flex-1 bg-transparent border-none text-white text-sm font-semibold focus:outline-none"}),e.jsx("button",{onClick:()=>F(g.id),className:"text-red-400 hover:text-red-300 p-1 hover:bg-red-500/10 rounded transition-all",children:e.jsx(ne,{className:"w-3.5 h-3.5"})})]}),e.jsxs("select",{value:g.type,onChange:$=>{const P=l.locations.map(E=>E.id===g.id?{...E,type:$.target.value}:E);b({...l,locations:P})},className:"w-full bg-gray-700 border border-gray-600 text-white px-2 py-1.5 rounded text-xs focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"planet",children:"🪐 Planet"}),e.jsx("option",{value:"station",children:"🛰️ Station"}),e.jsx("option",{value:"anomaly",children:"✨ Anomaly"})]}),e.jsx("textarea",{value:g.description,onChange:$=>{const P=l.locations.map(E=>E.id===g.id?{...E,description:$.target.value}:E);b({...l,locations:P})},className:"w-full bg-gray-700 border border-gray-600 text-gray-300 px-2 py-1.5 rounded text-xs focus:outline-none focus:border-indigo-500 resize-none",rows:2,placeholder:"Description..."}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-1",children:"Image URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:g.thumbUrl||"",onChange:$=>{const P=l.locations.map(E=>E.id===g.id?{...E,thumbUrl:$.target.value}:E);b({...l,locations:P})},placeholder:"/images/location.png or https://...",className:"flex-1 bg-gray-700 border border-gray-600 text-white px-2 py-1.5 rounded text-xs focus:outline-none focus:border-indigo-500"}),e.jsx("div",{className:"w-8 h-8 rounded bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${g.thumbUrl})`},title:"Preview"})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-gray-900/50 rounded px-2 py-1.5",children:[e.jsxs("span",{className:"text-gray-400 text-xs",children:["Pos: ",g.cx,", ",g.cy]}),v!==g.id?e.jsxs("button",{onClick:()=>z(g.id),className:"text-indigo-400 hover:text-indigo-300 text-xs font-semibold flex items-center gap-1",children:[e.jsx($e,{className:"w-3 h-3"}),"Move"]}):e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsxs("span",{className:"text-white text-xs font-mono",children:[Math.round(o.x),", ",Math.round(o.y)]}),e.jsx("button",{onClick:()=>ie(g.id),disabled:!o,className:"text-emerald-400 hover:text-emerald-300 disabled:text-gray-600 text-xs font-semibold",children:e.jsx(le,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>z(g.id),className:"text-gray-400 hover:text-gray-300 text-xs font-semibold",children:e.jsx(Q,{className:"w-3 h-3"})})]})]})]},g.id))})]}),e.jsxs("button",{onClick:()=>I(l),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center justify-center gap-2 mt-4",children:[e.jsx(le,{className:"w-4 h-4"}),"Apply Changes"]})]})]},_.id))})]}),f==="settings"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-3",children:"Global Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs font-semibold block mb-2",children:"Multiverse Background URL"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-cover bg-center border border-gray-600 flex-shrink-0",style:{backgroundImage:`url(${s.multiverseBackgroundUrl})`},title:"Preview"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("input",{type:"text",value:s.multiverseBackgroundUrl,onChange:_=>{a({...s,multiverseBackgroundUrl:_.target.value})},placeholder:"/images/multiversal-bg.png or https://...",className:"w-full bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:border-indigo-500"}),e.jsx("p",{className:"text-gray-500 text-xs italic",children:"💡 Use /images/filename.png for local files or paste an external URL"})]})]})]})]})})]})]}):e.jsx("button",{onClick:()=>u(!0),className:"fixed left-0 top-1/2 -translate-y-1/2 bg-gray-900/90 backdrop-blur-md text-white p-3 rounded-r-lg border border-l-0 border-indigo-500/30 hover:bg-gray-800/90 transition-all z-40 shadow-xl",children:e.jsx(qa,{className:"w-5 h-5"})})}const lr="_container_vrkvm_1",cr="_header_vrkvm_21",dr="_headerLeft_vrkvm_39",ur="_title_vrkvm_51",mr="_addButton_vrkvm_65",hr="_content_vrkvm_105",gr="_loading_vrkvm_151",xr="_spinner_vrkvm_171",pr="_entriesList_vrkvm_203",fr="_categorySection_vrkvm_215",yr="_categoryHeader_vrkvm_227",vr="_badge_vrkvm_245",_r="_entriesGrid_vrkvm_263",br="_entryCard_vrkvm_275",jr="_entryHeader_vrkvm_307",Nr="_entryName_vrkvm_321",kr="_entrySubtitle_vrkvm_335",wr="_entryActions_vrkvm_349",Cr="_editButton_vrkvm_359",Sr="_deleteButton_vrkvm_397",Lr="_entrySummary_vrkvm_433",Er="_entryFooter_vrkvm_455",Ir="_statusBadge_vrkvm_467",Br="_editor_vrkvm_493",Ur="_editorHeader_vrkvm_515",Tr="_editorTitle_vrkvm_533",Ar="_editorActions_vrkvm_551",Mr="_cancelButton_vrkvm_561",$r="_saveButton_vrkvm_599",Pr="_editorContent_vrkvm_641",Rr="_section_vrkvm_655",Or="_sectionHeader_vrkvm_675",Dr="_sectionTitle_vrkvm_687",Hr="_addSectionButton_vrkvm_701",Fr="_formGrid_vrkvm_739",Vr="_formGroup_vrkvm_751",Gr="_input_vrkvm_779",Wr="_select_vrkvm_819",zr="_colorInput_vrkvm_851",qr="_textarea_vrkvm_867",Jr="_infoBlock_vrkvm_911",Yr="_lockedBlock_vrkvm_913",Zr="_blockHeader_vrkvm_933",Kr="_removeButton_vrkvm_951",Xr="_helpText_vrkvm_989",Qr="_locationsList_vrkvm_1001",eo="_locationButton_vrkvm_1017",to="_locationSelected_vrkvm_1055",so="_locationInfo_vrkvm_1065",no="_locationName_vrkvm_1077",ao="_checkmark_vrkvm_1097",ro="_toggleGroup_vrkvm_1107",oo="_toggle_vrkvm_1107",x={container:lr,header:cr,headerLeft:dr,title:ur,addButton:mr,content:hr,loading:gr,spinner:xr,entriesList:pr,categorySection:fr,categoryHeader:yr,badge:vr,entriesGrid:_r,entryCard:br,entryHeader:jr,entryName:Nr,entrySubtitle:kr,entryActions:wr,editButton:Cr,deleteButton:Sr,entrySummary:Lr,entryFooter:Er,statusBadge:Ir,editor:Br,editorHeader:Ur,editorTitle:Tr,editorActions:Ar,cancelButton:Mr,saveButton:$r,editorContent:Pr,section:Rr,sectionHeader:Or,sectionTitle:Dr,addSectionButton:Hr,formGrid:Fr,formGroup:Vr,input:Gr,select:Wr,colorInput:zr,textarea:qr,infoBlock:Jr,lockedBlock:Yr,blockHeader:Zr,removeButton:Kr,helpText:Xr,locationsList:Qr,locationButton:eo,locationSelected:to,locationInfo:so,locationName:no,checkmark:ao,toggleGroup:ro,toggle:oo},ct={character:at,faction:tt,simulation:we,artifact:st,event:rt},dt={character:"Character",faction:"Faction",simulation:"Simulation",artifact:"Artifact",event:"Event"};function io({simulationData:t=[]}){const[s,n]=c.useState([]),[a,r]=c.useState(null),[o,i]=c.useState(!0);c.useEffect(()=>{m()},[]);async function m(){i(!0);try{const v=await et();n(v)}catch(v){console.error("Error loading codex entries:",v)}finally{i(!1)}}const u=()=>{const v={id:"",entry_id:`entry-${Date.now()}`,entry_type:"character",name:"New Entry",summary:"",known_info:[],locked_sections:[],color:"#6366f1",appears_in_locations:[],is_unlocked:!0,is_active:!0,sort_order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r(v)},f=async()=>{if(a)try{console.log("💾 Saving codex entry:",a.name);const v=await Ha({entry_id:a.entry_id,entry_type:a.entry_type,name:a.name,subtitle:a.subtitle,summary:a.summary,known_info:a.known_info,locked_sections:a.locked_sections,icon_url:a.icon_url,image_url:a.image_url,color:a.color,primary_location_id:a.primary_location_id,appears_in_locations:a.appears_in_locations,is_unlocked:a.is_unlocked,unlock_condition:a.unlock_condition,sort_order:a.sort_order||0});console.log("✅ Codex entry saved with ID:",v),await m(),r(null),alert("✅ Codex entry saved successfully!")}catch(v){console.error("❌ Error saving codex entry:",v),alert(`❌ Failed to save codex entry:

${v.message||"Unknown error"}`)}},p=async v=>{if(confirm("Delete this codex entry? This cannot be undone!"))try{console.log("🗑️ Deleting codex entry:",v),await Fa(v),await m(),a?.entry_id===v&&r(null),alert("✅ Codex entry deleted successfully!")}catch(S){console.error("❌ Error deleting codex entry:",S),alert(`❌ Failed to delete codex entry:

${S.message||"Unknown error"}`)}},l=()=>{a&&r({...a,known_info:[...a.known_info,{title:"New Info",content:""}]})},b=v=>{a&&r({...a,known_info:a.known_info.filter((S,C)=>C!==v)})},y=(v,S,C)=>{if(!a)return;const U=[...a.known_info];U[v]={...U[v],[S]:C},r({...a,known_info:U})},N=()=>{a&&r({...a,locked_sections:[...a.locked_sections,{title:"Classified",message:"Data Incomplete"}]})},k=v=>{a&&r({...a,locked_sections:a.locked_sections.filter((S,C)=>C!==v)})},j=(v,S,C)=>{if(!a)return;const U=[...a.locked_sections];U[v]={...U[v],[S]:C},r({...a,locked_sections:U})},h=v=>{if(!a)return;const S=a.appears_in_locations||[];S.includes(v)?r({...a,appears_in_locations:S.filter(C=>C!==v)}):r({...a,appears_in_locations:[...S,v]})},w=s.reduce((v,S)=>(v[S.entry_type]||(v[S.entry_type]=[]),v[S.entry_type].push(S),v),{});return e.jsxs("div",{className:x.container,children:[e.jsxs("div",{className:x.header,children:[e.jsxs("div",{className:x.headerLeft,children:[e.jsx(de,{className:"w-6 h-6 text-indigo-400"}),e.jsx("h2",{className:x.title,children:"Codex Admin"})]}),e.jsxs("button",{onClick:u,className:x.addButton,children:[e.jsx(se,{className:"w-5 h-5"}),"Add New Entry"]})]}),e.jsx("div",{className:x.content,children:o?e.jsxs("div",{className:x.loading,children:[e.jsx("div",{className:x.spinner}),e.jsx("p",{children:"Loading codex entries..."})]}):a?e.jsx(co,{entry:a,onChange:r,onSave:f,onCancel:()=>{r(null)},simulationData:t,addKnownInfo:l,removeKnownInfo:b,updateKnownInfo:y,addLockedSection:N,removeLockedSection:k,updateLockedSection:j,toggleLocation:h}):e.jsx(lo,{entriesByType:w,onEdit:r,onDelete:p})})]})}function lo({entriesByType:t,onEdit:s,onDelete:n}){return e.jsx("div",{className:x.entriesList,children:Object.entries(ct).map(([a,r])=>{const o=t[a]||[];return o.length===0?null:e.jsxs("div",{className:x.categorySection,children:[e.jsxs("div",{className:x.categoryHeader,children:[e.jsx(r,{className:"w-5 h-5 text-indigo-400"}),e.jsxs("h3",{children:[dt[a],"s"]}),e.jsx("span",{className:x.badge,children:o.length})]}),e.jsx("div",{className:x.entriesGrid,children:o.map(i=>e.jsxs("div",{className:x.entryCard,children:[e.jsxs("div",{className:x.entryHeader,children:[e.jsxs("div",{children:[e.jsx("h4",{className:x.entryName,children:i.name}),i.subtitle&&e.jsx("p",{className:x.entrySubtitle,children:i.subtitle})]}),e.jsxs("div",{className:x.entryActions,children:[e.jsx("button",{onClick:()=>s(i),className:x.editButton,title:"Edit",children:"✏️"}),e.jsx("button",{onClick:()=>n(i.entry_id),className:x.deleteButton,title:"Delete",children:e.jsx(ne,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:x.entrySummary,children:i.summary}),e.jsxs("div",{className:x.entryFooter,children:[e.jsx("span",{className:x.statusBadge,children:i.is_unlocked?e.jsxs(e.Fragment,{children:[e.jsx(er,{className:"w-3 h-3"})," Unlocked"]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-3 h-3"})," Locked"]})}),e.jsx("span",{className:x.statusBadge,children:i.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Ya,{className:"w-3 h-3"})," Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ja,{className:"w-3 h-3"})," Hidden"]})})]})]},i.entry_id))})]},a)})})}function co({entry:t,onChange:s,onSave:n,onCancel:a,simulationData:r,addKnownInfo:o,removeKnownInfo:i,updateKnownInfo:m,addLockedSection:u,removeLockedSection:f,updateLockedSection:p,toggleLocation:l}){const b=ct[t.entry_type];return e.jsxs("div",{className:x.editor,children:[e.jsxs("div",{className:x.editorHeader,children:[e.jsxs("div",{className:x.editorTitle,children:[e.jsx(b,{className:"w-6 h-6 text-indigo-400"}),e.jsx("h3",{children:t.id?"Edit Entry":"New Entry"})]}),e.jsxs("div",{className:x.editorActions,children:[e.jsxs("button",{onClick:a,className:x.cancelButton,children:[e.jsx(Q,{className:"w-5 h-5"}),"Cancel"]}),e.jsxs("button",{onClick:n,className:x.saveButton,children:[e.jsx(nt,{className:"w-5 h-5"}),"Save"]})]})]}),e.jsxs("div",{className:x.editorContent,children:[e.jsxs("div",{className:x.section,children:[e.jsx("h4",{className:x.sectionTitle,children:"Basic Information"}),e.jsxs("div",{className:x.formGrid,children:[e.jsxs("div",{className:x.formGroup,children:[e.jsx("label",{children:"Type"}),e.jsx("select",{value:t.entry_type,onChange:y=>s({...t,entry_type:y.target.value}),className:x.select,children:Object.entries(dt).map(([y,N])=>e.jsx("option",{value:y,children:N},y))})]}),e.jsxs("div",{className:x.formGroup,children:[e.jsx("label",{children:"Color"}),e.jsx("input",{type:"color",value:t.color,onChange:y=>s({...t,color:y.target.value}),className:x.colorInput})]})]}),e.jsxs("div",{className:x.formGroup,children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:t.name,onChange:y=>s({...t,name:y.target.value}),className:x.input,placeholder:"Entry name..."})]}),e.jsxs("div",{className:x.formGroup,children:[e.jsx("label",{children:"Subtitle (optional)"}),e.jsx("input",{type:"text",value:t.subtitle||"",onChange:y=>s({...t,subtitle:y.target.value}),className:x.input,placeholder:"A short tagline..."})]}),e.jsxs("div",{className:x.formGroup,children:[e.jsx("label",{children:"Summary"}),e.jsx("textarea",{value:t.summary,onChange:y=>s({...t,summary:y.target.value}),className:x.textarea,rows:3,placeholder:"A brief summary..."})]})]}),e.jsxs("div",{className:x.section,children:[e.jsxs("div",{className:x.sectionHeader,children:[e.jsx("h4",{className:x.sectionTitle,children:"Known Information"}),e.jsxs("button",{onClick:o,className:x.addSectionButton,children:[e.jsx(se,{className:"w-4 h-4"}),"Add Info"]})]}),t.known_info.map((y,N)=>e.jsxs("div",{className:x.infoBlock,children:[e.jsxs("div",{className:x.blockHeader,children:[e.jsx("input",{type:"text",value:y.title,onChange:k=>m(N,"title",k.target.value),className:x.input,placeholder:"Info title..."}),e.jsx("button",{onClick:()=>i(N),className:x.removeButton,children:e.jsx(ne,{className:"w-4 h-4"})})]}),e.jsx("textarea",{value:y.content,onChange:k=>m(N,"content",k.target.value),className:x.textarea,rows:4,placeholder:"Information content..."})]},N))]}),e.jsxs("div",{className:x.section,children:[e.jsxs("div",{className:x.sectionHeader,children:[e.jsx("h4",{className:x.sectionTitle,children:"Locked Sections"}),e.jsxs("button",{onClick:u,className:x.addSectionButton,children:[e.jsx(se,{className:"w-4 h-4"}),"Add Locked"]})]}),t.locked_sections.map((y,N)=>e.jsxs("div",{className:x.lockedBlock,children:[e.jsxs("div",{className:x.blockHeader,children:[e.jsx("input",{type:"text",value:y.title,onChange:k=>p(N,"title",k.target.value),className:x.input,placeholder:"Locked section title..."}),e.jsx("button",{onClick:()=>f(N),className:x.removeButton,children:e.jsx(ne,{className:"w-4 h-4"})})]}),e.jsx("input",{type:"text",value:y.message||"",onChange:k=>p(N,"message",k.target.value),className:x.input,placeholder:"Lock message (e.g., 'Data Incomplete')..."})]},N))]}),e.jsxs("div",{className:x.section,children:[e.jsx("h4",{className:x.sectionTitle,children:"Map Locations"}),e.jsx("p",{className:x.helpText,children:"Select locations where this entry appears"}),e.jsx("div",{className:x.locationsList,children:r.map(y=>y.locations.map(N=>{const k=t.appears_in_locations?.includes(N.id);return e.jsxs("button",{onClick:()=>l(N.id),className:`${x.locationButton} ${k?x.locationSelected:""}`,children:[e.jsxs("div",{className:x.locationInfo,children:[e.jsx("span",{className:x.locationName,children:N.name}),e.jsxs("span",{className:x.simulationName,children:["in ",y.name]})]}),k&&e.jsx("span",{className:x.checkmark,children:"✓"})]},N.id)}))})]}),e.jsxs("div",{className:x.section,children:[e.jsx("h4",{className:x.sectionTitle,children:"Status"}),e.jsxs("div",{className:x.toggleGroup,children:[e.jsxs("label",{className:x.toggle,children:[e.jsx("input",{type:"checkbox",checked:t.is_unlocked,onChange:y=>s({...t,is_unlocked:y.target.checked})}),e.jsx("span",{children:"Unlocked (visible to players)"})]}),e.jsxs("label",{className:x.toggle,children:[e.jsx("input",{type:"checkbox",checked:t.is_active,onChange:y=>s({...t,is_active:y.target.checked})}),e.jsx("span",{children:"Active (shown in codex)"})]})]})]})]})]})}function uo(){const[t,s]=c.useState("universes"),[n,a]=c.useState(lt),[r,o]=c.useState(it),[i,m]=c.useState(null),[u,f]=c.useState(!1),[p,l]=c.useState(!0),[b,y]=c.useState(!1),[N,k]=c.useState(""),[j,h]=c.useState(""),[w,v]=c.useState(null),[S,C]=c.useState(null),[U,R]=c.useState(null),O=c.useRef(null),D=Jt(),A="scavenjer2026";c.useEffect(()=>{sessionStorage.getItem("admin_authorized")==="true"?(y(!0),I()):l(!1)},[]);async function I(){l(!0);try{console.log("📥 Loading data from Supabase...");const[M,z]=await Promise.all([Ta(),Qe()]);if(console.log("📊 Fetched regions:",M),console.log("⚙️ Fetched config:",z),M&&M.length>0){const ie=M.map(F=>({id:F.region_id,name:F.name,description:F.description,color:F.color,cx:F.cx,cy:F.cy,thumbUrl:F.thumb_url,backgroundUrl:F.background_url,imageUrl:F.image_url,locations:(F.locations||[]).map(_=>({id:_.location_id,name:_.name,description:_.description,cx:_.cx,cy:_.cy,type:_.location_type,thumbUrl:_.thumb_url}))}));console.log("✅ Transformed regions:",ie),a(ie)}else console.warn("⚠️ No regions found in Supabase, using default data");z&&o(z.config_value)}catch(M){console.error("❌ Error loading admin data:",M)}finally{l(!1)}}const G=M=>{M.preventDefault(),N===A?(sessionStorage.setItem("admin_authorized","true"),y(!0),h(""),I()):h("Incorrect password")},xe=()=>{sessionStorage.removeItem("admin_authorized"),y(!1),D("/")};if(!b)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gray-900 border border-indigo-500/30 rounded-lg p-8 max-w-md w-full",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Access"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Enter password to continue"}),e.jsxs("form",{onSubmit:G,children:[e.jsx("input",{type:"password",value:N,onChange:M=>k(M.target.value),placeholder:"Enter admin password",className:"w-full px-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-indigo-500 mb-4",autoFocus:!0}),j&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:j}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Access Admin Panel"})]}),e.jsx("button",{onClick:()=>D("/"),className:"w-full mt-4 text-gray-400 hover:text-white transition-colors",children:"← Back to Map"}),e.jsx("div",{className:"mt-6 p-4 bg-gray-800/50 rounded border border-gray-700",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("strong",{children:"Default Password:"})," scavenjer2026",e.jsx("br",{}),e.jsx("em",{children:"(Set VITE_ADMIN_PASSWORD in .env.local to change)"})]})})]})});if(p)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading Admin Interface..."})]})});const ae=w&&n.find(M=>M.id===w.id)||null,re=(M,z)=>{C(M),R(z)},oe=()=>{C(null),R(null),O.current?.()};return e.jsxs("div",{className:"min-h-screen bg-black relative overflow-hidden",children:[t==="universes"&&e.jsxs(e.Fragment,{children:[e.jsx(Ze,{onRegionSelect:v,selectedRegion:ae,universeData:n,onCoordPick:u?m:void 0,baseBackground:r.multiverseBackgroundUrl,onLocationSelect:re,onLocationClose:oe,zoomResetRef:O}),S&&e.jsx(Ke,{location:S,origin:U,regionColor:ae?.color||"#6366f1",onClose:oe})]}),e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-gray-900/80 backdrop-blur-md border-b border-indigo-500/30 z-40",children:e.jsxs("div",{className:"max-w-full px-6 py-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h1",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"⚙️"}),"Admin Dashboard"]}),e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-300 text-xs rounded-full font-semibold",children:"● AUTHORIZED"}),e.jsxs("div",{className:"flex gap-2 ml-6",children:[e.jsx("button",{onClick:()=>s("universes"),className:`px-4 py-2 text-sm rounded-lg transition-all font-semibold ${t==="universes"?"bg-indigo-600 text-white":"bg-white/5 text-gray-300 hover:bg-white/10"}`,children:"🌌 Universes"}),e.jsx("button",{onClick:()=>s("codex"),className:`px-4 py-2 text-sm rounded-lg transition-all font-semibold ${t==="codex"?"bg-indigo-600 text-white":"bg-white/5 text-gray-300 hover:bg-white/10"}`,children:"📖 Codex"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>D("/"),className:"px-4 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-lg transition-all",children:"👁️ Public View"}),e.jsx("button",{onClick:xe,className:"px-4 py-2 text-sm bg-red-500/20 text-red-300 hover:bg-red-500/30 rounded-lg transition-all font-semibold",children:"🚪 Logout"})]})]})}),e.jsx("div",{className:"pt-16 h-screen",children:t==="universes"?e.jsx(ir,{data:n,config:r,onUpdate:a,onConfigUpdate:o,onCoordPick:m,pickedCoords:i,onPickingStateChange:f}):e.jsx("div",{className:"h-full p-6",children:e.jsx(io,{simulationData:n})})})]})}function mo(){return e.jsx(gs,{children:e.jsxs(us,{children:[e.jsx(be,{path:"/",element:e.jsx(or,{})}),e.jsx(be,{path:"/admin",element:e.jsx(uo,{})})]})})}ve.createRoot(document.getElementById("root")).render(e.jsx(gt.StrictMode,{children:e.jsx(mo,{})}));
//# sourceMappingURL=index-DNgSjYG-.js.map
